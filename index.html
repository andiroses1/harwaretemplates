<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hardware Production Templates</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --cell-width: 50px;
            --bg-dark: #1e1e1e;
            --bg-darker: #121212;
            --bg-track: #282828;
            --bg-track-alt: #222222;
            --grid-line: rgba(255,255,255,0.08);
            --grid-line-major: rgba(255,255,255,0.18);
            --text-primary: #f5f5f5;
            --text-muted: #b0b0b0;
            --text-dim: #808080;
            
            /* Device colors */
            --syntakt-primary: #ff5c5c;
            --syntakt-dark: #991f28;
            --tonverk-primary: #5ba0f0;
            --tonverk-dark: #2d5a8a;
            --drop-primary: #b87ce8;
            --drop-dark: #5e3370;
            
            /* Element colors - brighter for better visibility */
            --kick-color: #ff6b6b;
            --bass-color: #ffb380;
            --hats-color: #4dd9cc;
            --clap-color: #ff8585;
            --perc-color: #5ce0d6;
            --texture-color: #b99eff;
            --chord-color: #7cb8ff;
            --vocal-color: #ff8ac4;
            --lead-color: #ffc94d;
            --fx-color: #9ba3ff;
            --snapshot-color: #d4a3ff;
        }

        /* View Mode Toggle */
        .view-mode-toggle {
            display: flex;
            background: rgba(0,0,0,0.4);
            border-radius: 6px;
            padding: 3px;
            gap: 2px;
            margin-right: 15px;
        }
        .view-mode-btn {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .view-mode-btn:hover {
            background: rgba(255,255,255,0.08);
            color: var(--text-primary);
        }
        .view-mode-btn.active {
            background: var(--tonverk-primary);
            color: white;
        }
        .view-mode-btn svg {
            width: 14px;
            height: 14px;
        }

        /* Performance View Styles */
        .performance-container {
            display: none;
            padding: 20px;
            background: var(--bg-darker);
        }
        .performance-container.active {
            display: block;
        }
        .perf-section {
            margin-bottom: 30px;
        }
        .perf-section-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--tonverk-primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .perf-section-title::before {
            content: '';
            width: 4px;
            height: 16px;
            background: var(--tonverk-primary);
            border-radius: 2px;
        }
        
        /* Song Mode Timeline */
        .song-timeline {
            display: flex;
            flex-direction: column;
            gap: 2px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
        }
        .song-row {
            display: grid;
            grid-template-columns: 50px 80px 100px 60px 60px 80px 1fr;
            gap: 8px;
            align-items: center;
            padding: 8px 12px;
            background: var(--bg-track);
            border-radius: 4px;
            border-left: 3px solid transparent;
        }
        .song-row.section-intro { border-left-color: #4ade80; }
        .song-row.section-build { border-left-color: #fbbf24; }
        .song-row.section-main { border-left-color: #f97316; }
        .song-row.section-breakdown { border-left-color: #a855f7; }
        .song-row.section-peak { border-left-color: #ef4444; }
        .song-row.section-outro { border-left-color: #6b7280; }
        .song-row-header {
            background: transparent;
            color: var(--text-muted);
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .song-row .row-num { color: var(--text-dim); }
        .song-row .row-label { 
            color: var(--text-primary); 
            font-weight: 500;
        }
        .song-row .row-pattern { 
            color: var(--tonverk-primary);
            font-weight: 600;
        }
        .song-row .row-bars { color: var(--text-muted); }
        .song-row .row-repeat { color: var(--text-muted); }
        .song-row .row-tempo { color: var(--text-dim); }
        .song-row .row-cue {
            color: #fbbf24;
            font-size: 10px;
        }
        
        /* Mute Grid */
        .mute-grid-container {
            overflow-x: auto;
        }
        .mute-grid {
            display: grid;
            gap: 1px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            min-width: max-content;
        }
        .mute-grid-header {
            display: contents;
        }
        .mute-grid-header > div {
            padding: 8px 4px;
            text-align: center;
            color: var(--text-muted);
            background: var(--bg-darker);
            font-weight: 500;
        }
        .mute-grid-row {
            display: contents;
        }
        .mute-grid-row > div {
            padding: 6px 4px;
            text-align: center;
            background: var(--bg-track);
        }
        .mute-grid-row .section-label {
            text-align: left;
            padding-left: 10px;
            color: var(--text-primary);
            font-weight: 500;
            background: var(--bg-track-alt);
        }
        .mute-cell {
            width: 24px;
            height: 24px;
            border-radius: 3px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .mute-cell.active {
            background: var(--tonverk-primary);
            color: white;
        }
        .mute-cell.muted {
            background: rgba(255,255,255,0.08);
            color: var(--text-dim);
        }
        .mute-cell.partial {
            background: rgba(91, 160, 240, 0.4);
            color: white;
        }
        
        /* Performance Cues */
        .perf-cues {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 12px;
        }
        .perf-cue {
            background: var(--bg-track);
            padding: 12px 16px;
            border-radius: 6px;
            border-left: 3px solid var(--tonverk-primary);
        }
        .perf-cue-bar {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            color: var(--tonverk-primary);
            font-weight: 600;
            margin-bottom: 4px;
        }
        .perf-cue-action {
            color: var(--text-primary);
            font-size: 13px;
        }
        .perf-cue-detail {
            color: var(--text-muted);
            font-size: 11px;
            margin-top: 4px;
        }
        .perf-cue.critical {
            border-left-color: #ef4444;
        }
        .perf-cue.critical .perf-cue-bar {
            color: #ef4444;
        }
        
        /* Pattern Bank Map */
        .pattern-map {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
        }
        .pattern-bank {
            background: var(--bg-track);
            padding: 16px;
            border-radius: 8px;
        }
        .pattern-bank-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--tonverk-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .pattern-bank-title .bank-letter {
            background: var(--tonverk-primary);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }
        .pattern-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .pattern-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
        }
        .pattern-item .pattern-num {
            color: var(--text-dim);
            width: 30px;
        }
        .pattern-item .pattern-name {
            color: var(--text-primary);
        }
        .pattern-item .pattern-use {
            color: var(--text-muted);
            margin-left: auto;
            font-size: 10px;
        }

        /* Key Commands Reference */
        .key-commands {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 12px;
        }
        .key-cmd {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 14px;
            background: var(--bg-track);
            border-radius: 6px;
        }
        .key-cmd kbd {
            background: rgba(255,255,255,0.1);
            padding: 4px 8px;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            color: var(--tonverk-primary);
            border: 1px solid rgba(255,255,255,0.15);
            white-space: nowrap;
        }
        .key-cmd-desc {
            color: var(--text-muted);
            font-size: 12px;
        }

        /* Device Split Info */
        .device-split {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .device-card {
            background: var(--bg-track);
            padding: 16px;
            border-radius: 8px;
            border-top: 3px solid var(--syntakt-primary);
        }
        .device-card.tonverk {
            border-top-color: var(--tonverk-primary);
        }
        .device-card-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        .device-card.syntakt .device-card-title { color: var(--syntakt-primary); }
        .device-card.tonverk .device-card-title { color: var(--tonverk-primary); }
        .device-track-list {
            display: flex;
            flex-direction: column;
            gap: 4px;
            font-size: 12px;
        }
        .device-track {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-muted);
        }
        .device-track .track-num {
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            color: var(--text-dim);
            width: 30px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: var(--bg-darker);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: auto;
            font-size: 13px;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            min-width: 1400px;
            padding: 20px;
        }

        /* Header */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            padding: 15px 20px;
            background: linear-gradient(180deg, #2a2a2a 0%, var(--bg-dark) 100%);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
            border-radius: 8px 8px 0 0;
        }

        .header h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 18px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .track-selector {
            display: flex;
            gap: 8px;
        }

        .track-btn {
            padding: 10px 18px;
            background: transparent;
            border: 1px solid rgba(255,255,255,0.25);
            color: var(--text-muted);
            cursor: pointer;
            border-radius: 4px;
            font-size: 12px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.2s;
        }

        .track-btn:hover {
            background: rgba(255,255,255,0.05);
            border-color: rgba(255,255,255,0.3);
            color: var(--text-primary);
        }

        .track-btn.active {
            background: var(--tonverk-primary);
            border-color: var(--tonverk-primary);
            color: white;
        }

        .tempo-info {
            display: flex;
            gap: 24px;
            font-size: 12px;
            color: var(--text-muted);
        }

        .tempo-info span {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tempo-info .value {
            color: var(--text-primary);
            font-weight: 700;
        }

        /* Zoom Controls */
        .zoom-controls {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(0,0,0,0.3);
            padding: 8px 14px;
            border-radius: 6px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .zoom-controls label {
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        .zoom-btn {
            width: 28px;
            height: 28px;
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.15);
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.15s;
        }

        .zoom-btn:hover {
            background: rgba(255,255,255,0.15);
            border-color: rgba(255,255,255,0.25);
        }

        .zoom-btn:active {
            background: rgba(255,255,255,0.2);
        }

        .zoom-slider {
            width: 100px;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(255,255,255,0.15);
            border-radius: 3px;
            cursor: pointer;
        }

        .zoom-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 14px;
            height: 14px;
            background: var(--tonverk-primary);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .zoom-slider::-webkit-slider-thumb:hover {
            transform: scale(1.15);
        }

        .zoom-slider::-moz-range-thumb {
            width: 14px;
            height: 14px;
            background: var(--tonverk-primary);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .zoom-value {
            font-size: 11px;
            color: var(--text-primary);
            font-weight: 600;
            min-width: 36px;
            text-align: center;
        }

        .zoom-btn.fit {
            width: auto;
            padding: 0 10px;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .zoom-hint {
            font-size: 9px;
            color: var(--text-dim);
            margin-left: 8px;
        }

        /* Setup Guide Panels */
        .setup-guide {
            background: var(--bg-darker);
            border-top: 1px solid rgba(255,255,255,0.1);
            overflow: hidden;
        }

        .setup-toggle {
            width: 100%;
            padding: 14px 24px;
            background: linear-gradient(180deg, rgba(255,255,255,0.03) 0%, transparent 100%);
            border: none;
            color: var(--text-primary);
            font-size: 13px;
            font-weight: 600;
            text-align: left;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.2s;
        }

        .setup-toggle:hover {
            background: rgba(255,255,255,0.05);
        }

        .setup-toggle::after {
            content: 'â–¼';
            font-size: 10px;
            transition: transform 0.3s;
        }

        .setup-toggle.open::after {
            transform: rotate(180deg);
        }

        .setup-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }

        .setup-content.open {
            max-height: 2000px;
        }

        /* About Section */
        .about-section {
            margin: 0 0 20px 0;
            background: linear-gradient(180deg, rgba(59, 130, 246, 0.08) 0%, rgba(30,30,30,0.6) 100%);
            border-radius: 10px;
            border: 1px solid rgba(59, 130, 246, 0.2);
            overflow: hidden;
        }

        .about-toggle {
            width: 100%;
            padding: 14px 20px;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
            text-align: left;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background 0.2s ease;
        }

        .about-toggle:hover {
            background: rgba(255,255,255,0.05);
        }

        .about-toggle::after {
            content: 'â–¼';
            margin-left: auto;
            font-size: 10px;
            transition: transform 0.3s ease;
            opacity: 0.5;
        }

        .about-toggle.open::after {
            transform: rotate(180deg);
        }

        .about-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }

        .about-content.open {
            max-height: 800px;
        }

        .about-inner {
            padding: 0 24px 24px;
        }

        .about-cols {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }

        .about-col {
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.06);
        }

        .about-col h3 {
            font-size: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #3b82f6;
            margin-bottom: 14px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }

        .about-col p, .about-col li {
            font-size: 14px;
            color: var(--text-primary);
            line-height: 1.7;
            margin-bottom: 10px;
        }

        .about-col ol, .about-col ul {
            padding-left: 22px;
            margin: 8px 0;
        }

        .about-col ol li, .about-col ul li {
            margin-bottom: 8px;
        }

        .about-col strong {
            color: #fbbf24;
            font-weight: 600;
        }

        .setup-inner {
            padding: 20px 24px 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .setup-section {
            background: rgba(255,255,255,0.02);
            border-radius: 8px;
            padding: 18px;
            border: 1px solid rgba(255,255,255,0.06);
        }

        .setup-section h3 {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            margin-bottom: 14px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }

        .setup-section.full-width {
            grid-column: 1 / -1;
        }

        .pattern-table, .fx-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        .pattern-table th, .fx-table th {
            text-align: left;
            padding: 8px 10px;
            background: rgba(0,0,0,0.3);
            color: var(--text-muted);
            font-weight: 600;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .pattern-table td, .fx-table td {
            padding: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.04);
            color: var(--text-primary);
        }

        .pattern-table tr:hover td, .fx-table tr:hover td {
            background: rgba(255,255,255,0.02);
        }

        .pattern-table .pattern-id {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            color: var(--tonverk-primary);
            width: 60px;
        }

        .pattern-table .pattern-name {
            font-weight: 600;
        }

        .pattern-table .pattern-use {
            color: var(--text-muted);
            font-size: 11px;
        }

        .fx-table .section-name {
            font-weight: 600;
        }

        .fx-table .value {
            font-family: 'JetBrains Mono', monospace;
            color: var(--tonverk-primary);
        }

        .device-group {
            margin-bottom: 20px;
        }

        .device-group:last-child {
            margin-bottom: 0;
        }

        .device-group h4 {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--syntakt-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .device-group h4.tonverk-label {
            color: var(--tonverk-primary);
        }

        .device-group h4::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 2px;
            background: currentColor;
        }

        .tip-box {
            background: rgba(91, 160, 240, 0.1);
            border: 1px solid rgba(91, 160, 240, 0.2);
            border-radius: 6px;
            padding: 12px 14px;
            margin-top: 14px;
            font-size: 11px;
            color: var(--text-muted);
        }

        .tip-box strong {
            color: var(--tonverk-primary);
        }

        /* DAW Layout */
        .daw-container {
            display: none;
            background: var(--bg-dark);
            border-radius: 0 0 8px 8px;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.08);
        }

        .daw-container.active {
            display: block;
        }

        .daw-wrapper {
            display: flex;
        }

        /* Track Labels (Left Sidebar) */
        .track-labels {
            width: 200px;
            min-width: 200px;
            background: var(--bg-darker);
            border-right: 1px solid rgba(255,255,255,0.12);
            position: sticky;
            left: 0;
            z-index: 10;
        }

        .ruler-spacer {
            height: 44px;
            background: var(--bg-darker);
            border-bottom: 1px solid rgba(255,255,255,0.12);
            display: flex;
            align-items: center;
            padding: 0 14px;
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .track-label {
            height: 56px;
            display: flex;
            align-items: center;
            padding: 0 14px;
            border-bottom: 1px solid rgba(255,255,255,0.06);
            gap: 10px;
            transition: background 0.2s;
        }

        .track-label:hover {
            background: rgba(255,255,255,0.04);
        }

        .track-label.device-header {
            background: rgba(255,255,255,0.03);
            height: 36px;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-primary);
            font-weight: 700;
        }

        .track-label.device-header.syntakt {
            border-left: 4px solid var(--syntakt-primary);
        }

        .track-label.device-header.tonverk {
            border-left: 4px solid var(--tonverk-primary);
        }

        .track-label.device-header.drop {
            border-left: 4px solid var(--drop-primary);
        }

        .track-color {
            width: 5px;
            height: 26px;
            border-radius: 2px;
            flex-shrink: 0;
        }

        .track-name {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-primary);
            flex: 1;
        }

        .track-machine {
            font-size: 10px;
            color: var(--text-muted);
            text-transform: uppercase;
            font-weight: 500;
        }

        /* Arrangement Area */
        .arrangement-area {
            flex: 1;
            overflow-x: auto;
            overflow-y: hidden;
        }

        /* Ruler */
        .ruler-container {
            position: relative;
        }
        
        /* Song Row Lane */
        .song-row-lane {
            height: 40px;
            background: linear-gradient(180deg, rgba(91, 160, 240, 0.08) 0%, rgba(0,0,0,0.3) 100%);
            border-bottom: 1px solid rgba(91, 160, 240, 0.2);
            display: flex;
            position: relative;
            transition: height 0.15s;
        }
        
        .song-row-lane.collapsed {
            height: 20px;
            overflow: hidden;
        }
        
        .song-row-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 2px 0 0 rgba(91, 160, 240, 0.4);
            position: relative;
            font-family: 'JetBrains Mono', monospace;
            flex-shrink: 0;
            box-sizing: border-box;
        }
        
        .song-row-cell:first-child {
            box-shadow: none;
        }
        
        .song-row-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1px;
        }
        
        .song-row-num {
            font-size: 9px;
            color: var(--tonverk-primary);
            font-weight: 700;
        }
        
        .song-row-pattern {
            font-size: 10px;
            color: var(--text-primary);
            font-weight: 600;
            background: rgba(91, 160, 240, 0.2);
            padding: 1px 6px;
            border-radius: 3px;
        }
        
        /* Song Row Spacer Label */
        .song-row-spacer {
            width: 200px;
            min-width: 200px;
            height: 40px;
            background: var(--bg-darker);
            display: flex;
            align-items: center;
            padding: 0 14px;
            font-size: 10px;
            color: var(--tonverk-primary);
            font-weight: 600;
            border-bottom: 1px solid rgba(91, 160, 240, 0.2);
            gap: 8px;
            transition: height 0.15s;
        }
        
        .song-row-spacer.collapsed {
            height: 20px;
        }
        
        .song-row-spacer.collapsed span {
            font-size: 8px;
        }
        
        .song-row-spacer .toggle-sm {
            width: 32px;
            height: 16px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            cursor: pointer;
            position: relative;
            transition: background 0.2s;
        }
        
        .song-row-spacer .toggle-sm.active {
            background: rgba(91, 160, 240, 0.5);
        }
        
        .song-row-spacer .toggle-sm::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 12px;
            height: 12px;
            background: #fff;
            border-radius: 50%;
            transition: transform 0.2s;
        }
        
        .song-row-spacer .toggle-sm.active::after {
            transform: translateX(16px);
        }

        .ruler {
            height: 44px;
            background: var(--bg-darker);
            border-bottom: 1px solid rgba(255,255,255,0.12);
            display: flex;
            position: relative;
        }

        .bar-marker {
            width: var(--cell-width, 50px);
            min-width: var(--cell-width, 50px);
            flex-shrink: 0;
            display: flex;
            align-items: flex-end;
            justify-content: flex-start;
            padding: 0 4px 8px;
            font-size: 11px;
            color: var(--text-dim);
            box-shadow: inset 1px 0 0 var(--grid-line-major);
            position: relative;
            font-weight: 500;
            box-sizing: border-box;
        }

        .bar-marker:nth-child(4n+1) {
            color: var(--text-primary);
            font-weight: 700;
        }

        .bar-marker:nth-child(4n+1)::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 1px;
            height: 12px;
            background: var(--text-muted);
        }

        .section-marker {
            position: absolute;
            top: 5px;
            font-size: 10px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 3px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .section-intro { background: rgba(91, 160, 240, 0.25); color: #8dc4ff; }
        .section-build { background: rgba(255, 201, 77, 0.25); color: #ffe082; }
        .section-main { background: rgba(77, 217, 204, 0.25); color: #80f0e5; }
        .section-breakdown { background: rgba(184, 124, 232, 0.25); color: #dbb8ff; }
        .section-peak { background: rgba(255, 92, 92, 0.25); color: #ffb3b3; }
        .section-outro { background: rgba(176, 176, 176, 0.25); color: #e0e0e0; }

        /* Track Lanes */
        .track-lanes {
            position: relative;
        }

        .track-lane {
            height: 56px;
            display: flex;
            position: relative;
            border-bottom: 1px solid rgba(255,255,255,0.06);
            background: var(--bg-track);
        }

        .track-lane:nth-child(even) {
            background: var(--bg-track-alt);
        }

        .track-lane.device-spacer {
            height: 36px;
            background: rgba(0,0,0,0.4);
        }
        
        /* Automation sub-lane - shorter, for secondary params */
        .track-lane.auto-sublane {
            height: 30px;
            min-height: 30px;
            background: rgba(0,0,0,0.25);
            border-bottom: 1px solid rgba(255,255,255,0.03);
        }
        
        .auto-sublane .lane-label {
            font-size: 9px;
            padding: 4px 8px;
        }
        
        .auto-sublane .lane-label .track-name {
            font-size: 9px;
            opacity: 0.8;
        }
        
        .auto-sublane .lane-label .track-device {
            display: none;
        }
        
        /* Auto sublane label in sidebar */
        .track-label.auto-sublane-label {
            height: 30px;
            min-height: 30px;
            padding: 4px 8px 4px 24px;
            background: rgba(0,0,0,0.25);
        }
        
        .track-label.auto-sublane-label .track-name {
            font-size: 9px;
            opacity: 0.7;
            color: #38bdf8;
        }

        .grid-cell {
            width: var(--cell-width, 50px);
            min-width: var(--cell-width, 50px);
            flex-shrink: 0;
            box-shadow: inset 1px 0 0 var(--grid-line);
            position: relative;
            box-sizing: border-box;
        }

        .grid-cell:nth-child(4n+1) {
            box-shadow: inset 1px 0 0 var(--grid-line-major);
        }

        /* Clips */
        .clip {
            position: absolute;
            top: 6px;
            height: 44px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            padding: 0 12px;
            font-size: 12px;
            font-weight: 600;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0,0,0,0.4);
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.1s;
            z-index: 2;
            border: 1px solid rgba(255,255,255,0.15);
            min-width: 2px;
        }
        
        /* Small zoom: hide text, reduce padding */
        .zoom-small .clip {
            padding: 0 2px;
            font-size: 0;
        }
        
        .zoom-small .clip-pattern {
            display: none;
        }
        
        .zoom-small .clip::before {
            width: 2px;
        }
        
        .zoom-small .bar-marker {
            font-size: 0;
        }
        
        .zoom-small .bar-marker:nth-child(8n+1) {
            font-size: 9px;
        }
        
        .zoom-small .section-marker {
            font-size: 8px;
            padding: 2px 4px;
        }
        
        .zoom-small .song-row-label {
            font-size: 0;
        }
        
        .zoom-small .song-row-pattern {
            font-size: 8px;
            padding: 1px 3px;
        }
        
        .zoom-small .song-row-num {
            display: none;
        }
        
        /* Very small zoom (below 10px per bar) */
        .zoom-tiny .clip {
            padding: 0 1px;
        }
        
        .zoom-tiny .clip::before {
            width: 1px;
        }
        
        .zoom-tiny .bar-marker {
            padding: 0 1px 4px;
        }
        
        .zoom-tiny .song-row-pattern {
            font-size: 7px;
            padding: 0 2px;
        }
        
        .zoom-tiny .section-marker {
            font-size: 6px;
            padding: 1px 2px;
        }
        
        /* Automation Only Mode - hide clips, show only automation lines */
        .auto-only .clip {
            display: none !important;
        }
        
        .auto-only .track-lane:not(.device-spacer) {
            background: var(--bg-track);
            min-height: 40px;
        }
        
        .auto-only .track-lane.device-spacer {
            display: flex !important;
            visibility: visible !important;
            min-height: 36px !important;
            height: 36px !important;
            background: rgba(0,0,0,0.4) !important;
        }
        
        .auto-only .track-lane.device-spacer .grid-cell {
            display: block !important;
            height: 36px !important;
        }
        
        .auto-only .track-label.device-header {
            display: flex !important;
            visibility: visible !important;
            height: 36px !important;
        }
        
        .auto-only .automation-line,
        .auto-only .auto-line {
            display: block !important;
        }
        
        .auto-only .inline-automation,
        .auto-only .automation-path {
            display: block !important;
            opacity: 1 !important;
        }

        .clip:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.5);
            z-index: 5;
            border-color: rgba(255,255,255,0.3);
        }

        .clip::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: rgba(255,255,255,0.25);
        }

        .clip-pattern {
            font-size: 10px;
            opacity: 0.85;
            margin-left: 6px;
            font-weight: 500;
        }

        /* Clip Colors - solid backgrounds for better text contrast */
        .clip-kick { background: #d63545; }
        .clip-bass { background: #e8843d; }
        .clip-hats { background: #1a9e93; }
        .clip-clap { background: #dc5555; }
        .clip-perc { background: #2aa8a0; }
        .clip-texture { background: #8b6dd0; }
        .clip-chord { background: #4a8fd9; }
        .clip-vocal { background: #d55a9a; }
        .clip-lead { background: #d9a020; }
        .clip-fx { background: #6670d0; }
        
        .clip-snapshot {
            background: #9b5dc9;
        }

        /* Intensity variations - brightness instead of opacity */
        .clip.low { 
            filter: brightness(0.7);
        }
        .clip.med { 
            filter: brightness(0.85);
        }
        .clip.high { 
            filter: brightness(1);
            border-color: rgba(255,255,255,0.25);
        }

        /* Automation Lane */
        .automation-lane {
            height: 50px;
            background: rgba(0,0,0,0.2);
            position: relative;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .automation-path {
            position: absolute;
            top: 8px;
            left: 0;
            right: 0;
            height: 30px;
        }
        
        .auto-sublane .automation-path {
            top: 0;
            height: 28px;
        }
        
        .automation-label {
            position: absolute;
            top: -2px;
            left: 8px;
            font-size: 9px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            opacity: 0.9;
            z-index: 5;
            text-shadow: 0 1px 2px rgba(0,0,0,0.8);
        }

        .automation-line {
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .automation-fill {
            fill-opacity: 0.15;
        }

        /* Automation Overlay */
        .automation-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 100;
        }

        .automation-overlay.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .automation-overlay svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .automation-overlay .auto-line {
            fill: none;
            stroke-width: 2.5;
            stroke-linecap: round;
            stroke-linejoin: round;
            filter: drop-shadow(0 0 4px currentColor);
        }

        .automation-overlay .auto-fill {
            fill-opacity: 0.1;
        }

        .automation-overlay .auto-point {
            cursor: pointer;
            transition: r 0.15s ease;
        }

        .automation-overlay .auto-point:hover {
            r: 8;
        }

        .auto-tooltip {
            position: fixed;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 13px;
            color: #fff;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.15s ease;
            white-space: nowrap;
            line-height: 1.6;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }

        .auto-tooltip.visible {
            opacity: 1;
        }

        .auto-tooltip .auto-param {
            color: #fbbf24;
            font-weight: 600;
            font-size: 14px;
        }

        .auto-tooltip .auto-value {
            color: #4ade80;
            font-weight: 700;
            font-size: 16px;
        }

        .auto-tooltip .auto-bar {
            color: #a78bfa;
            font-weight: 600;
        }
        
        .auto-tooltip strong {
            color: #38bdf8;
            font-size: 14px;
            font-weight: 600;
        }

        /* Automation Toggle */
        .automation-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 20px;
            padding-left: 20px;
            border-left: 1px solid rgba(255,255,255,0.2);
        }

        .automation-toggle label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .toggle-switch {
            position: relative;
            width: 44px;
            height: 22px;
            background: rgba(255,255,255,0.1);
            border-radius: 11px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: rgba(74, 144, 226, 0.6);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 18px;
            height: 18px;
            background: #fff;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active::after {
            transform: translateX(22px);
        }

        /* Pattern Length Selector */
        .pattern-length-selector {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-left: 20px;
            padding-left: 20px;
            border-left: 1px solid rgba(255,255,255,0.2);
        }

        .pattern-length-selector label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding-right: 4px;
        }

        .pattern-length-btn {
            padding: 5px 10px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
            color: var(--text-secondary);
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
            font-family: 'JetBrains Mono', monospace;
        }

        .pattern-length-btn:hover {
            background: rgba(255,255,255,0.1);
            color: var(--text-primary);
            border-color: rgba(255,255,255,0.3);
        }

        .pattern-length-btn.active {
            background: var(--tonverk-primary);
            color: white;
            border-color: var(--tonverk-primary);
        }

        /* Device Filter */
        .device-filter {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 20px;
            padding-left: 20px;
            border-left: 1px solid rgba(255,255,255,0.2);
        }

        .device-filter label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .device-filter-btns {
            display: flex;
            gap: 4px;
        }

        .device-btn {
            padding: 5px 10px;
            font-size: 10px;
            font-weight: 600;
            border: 1px solid rgba(255,255,255,0.2);
            background: transparent;
            color: var(--text-muted);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .device-btn:hover {
            background: rgba(255,255,255,0.1);
            color: var(--text-primary);
        }

        .device-btn.active {
            background: rgba(255,255,255,0.15);
            color: var(--text-primary);
            border-color: rgba(255,255,255,0.3);
        }

        .device-btn.syntakt.active {
            background: rgba(255, 92, 92, 0.25);
            border-color: var(--syntakt-primary);
            color: var(--syntakt-primary);
        }

        .device-btn.tonverk.active {
            background: rgba(91, 160, 240, 0.25);
            border-color: var(--tonverk-primary);
            color: var(--tonverk-primary);
        }

        /* Hidden state for filtered lanes */
        .track-lane.device-hidden,
        .track-label.device-hidden {
            display: none !important;
        }

        /* Track Notes */
        .track-notes {
            background: linear-gradient(135deg, rgba(91, 160, 240, 0.08) 0%, rgba(0,0,0,0.3) 100%);
            border: 1px solid rgba(91, 160, 240, 0.2);
            border-radius: 8px;
            padding: 16px 20px;
            margin: 16px 0;
            font-size: 13px;
            line-height: 1.6;
            color: var(--text-muted);
        }
        
        .track-notes-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--tonverk-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .track-notes-title::before {
            content: 'ðŸ’¡';
            font-size: 14px;
        }
        
        .track-notes p {
            margin: 0 0 8px 0;
        }
        
        .track-notes p:last-child {
            margin-bottom: 0;
        }
        
        .track-notes strong {
            color: var(--text-primary);
        }

        /* Inline automation within lanes */
        .inline-automation {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 50;
        }

        .inline-automation svg {
            pointer-events: none;
        }

        .inline-automation .auto-point {
            cursor: pointer;
            transition: r 0.15s ease;
            pointer-events: auto;
        }

        .inline-automation .auto-point:hover {
            r: 7;
        }

        .automation-path .auto-point {
            cursor: pointer;
            transition: r 0.15s ease;
            pointer-events: auto;
        }

        .automation-path .auto-point:hover {
            r: 7;
        }

        /* Section Divider - for routing/automation sections */
        .track-label.section-divider {
            height: 40px;
            background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, rgba(30,30,30,0.8) 100%);
            border-top: 2px solid rgba(255,255,255,0.15);
            border-bottom: 1px solid rgba(255,255,255,0.08);
            color: var(--text-muted);
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            justify-content: center;
        }

        .track-lane.section-divider-lane {
            height: 40px;
            background: linear-gradient(180deg, rgba(0,0,0,0.6) 0%, rgba(30,30,30,0.8) 100%);
            border-top: 2px solid rgba(255,255,255,0.15);
        }

        /* Legend */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 18px;
            padding: 18px 24px;
            background: var(--bg-darker);
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 11px;
            color: var(--text-muted);
            font-weight: 500;
        }

        .legend-color {
            width: 14px;
            height: 14px;
            border-radius: 3px;
        }

        /* Tooltip */
        .tooltip {
            position: fixed;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid rgba(255,255,255,0.3);
            padding: 14px 18px;
            border-radius: 8px;
            font-size: 14px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.15s;
            z-index: 100;
            max-width: 400px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.6);
            line-height: 1.6;
        }

        .tooltip.visible {
            opacity: 1;
        }

        .tooltip-title {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .tooltip-detail {
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 13px;
        }

        .tooltip-detail div {
            margin-bottom: 4px;
        }

        .tooltip-param {
            display: flex;
            justify-content: space-between;
            margin-top: 6px;
        }

        .tooltip-param .label {
            color: var(--text-muted);
        }

        .tooltip-param .value {
            color: var(--text-primary);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>HARDWARE PRODUCTION TEMPLATES</h1>
            <div class="track-selector">
                <button class="track-btn active" onclick="showTrack('romanian')">Romminimal</button>
                <button class="track-btn" onclick="showTrack('techhouse')">Tech House</button>
                <button class="track-btn" onclick="showTrack('tonverk')">Minimal Tech</button>
                <button class="track-btn" onclick="showTrack('melodark')">Melodic Dark Techno</button>
                <button class="track-btn" onclick="showTrack('rumble')">Rumble Bass</button>
                <!-- Hidden for now - data preserved -->
                <button class="track-btn" onclick="showTrack('dubtechno')" style="display:none">Dub Techno</button>
                <button class="track-btn" onclick="showTrack('dnb')" style="display:none">Drum & Bass</button>
                <button class="track-btn" onclick="showTrack('ukgarage')" style="display:none">UK Garage</button>
                <button class="track-btn" onclick="showTrack('bootytech')">Booty Tech House</button>
            </div>
            <div class="zoom-controls">
                <label>Zoom</label>
                <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out (Ctrl+-)">âˆ’</button>
                <input type="range" class="zoom-slider" id="zoom-slider" min="5" max="80" value="50" oninput="setZoom(this.value)">
                <button class="zoom-btn" onclick="zoomIn()" title="Zoom In (Ctrl++)">+</button>
                <span class="zoom-value" id="zoom-value">100%</span>
                <button class="zoom-btn fit" onclick="fitToView()" title="Fit to View (Ctrl+0)">Fit</button>
                <span class="zoom-hint">Ctrl+Scroll to zoom</span>
                
                <div class="automation-toggle">
                    <label>Automation</label>
                    <div class="toggle-switch" id="auto-toggle" onclick="toggleAutomation()"></div>
                </div>
                <div class="automation-toggle">
                    <label>Auto Only</label>
                    <div class="toggle-switch" id="auto-only-toggle" onclick="toggleAutoOnly()"></div>
                </div>
                <div class="pattern-length-selector">
                    <label>Pattern:</label>
                    <button class="pattern-length-btn" id="len-64" onclick="setPatternLength(64)">64</button>
                    <button class="pattern-length-btn" id="len-128" onclick="setPatternLength(128)">128</button>
                    <button class="pattern-length-btn active" id="len-256" onclick="setPatternLength(256)">256</button>
                </div>
            </div>
            <div class="tempo-info">
                <span>BPM <span class="value" id="bpm-value">124</span></span>
                <span>KEY <span class="value">Am</span></span>
                <span>BARS <span class="value" id="bar-count">224</span></span>
            </div>
        </div>

        <!-- ABOUT SECTION -->
        <div class="about-section">
            <button class="about-toggle" onclick="this.classList.toggle('open'); this.nextElementSibling.classList.toggle('open')">
                â„¹ï¸ How to Use These Templates
            </button>
            <div class="about-content">
                <div class="about-inner">
                    <div class="about-cols">
                        <div class="about-col">
                            <h3>What This Is</h3>
                            <p>Visual arrangement templates for the <strong>Elektron Tonverk</strong> (and Syntakt) using <strong>Song Mode</strong> with pattern-based automation.</p>
                            <p>Each template shows a complete arrangement with automation curves you can recreate using <strong>lock trigs with p-locks</strong> and <strong>LFOs</strong>.</p>
                            <p><strong>Pattern Length:</strong> Use the 64/128/256 selector to match your sequencer's capabilities. Tonverk supports 256 steps, while Digitakt/Octatrack max at 64 steps per pattern.</p>
                        </div>
                        <div class="about-col">
                            <h3>The Workflow</h3>
                            <ol>
                                <li><strong>Pick a genre</strong> â€” each has different energy curves</li>
                                <li><strong>Set pattern length</strong> â€” 256 for Tonverk, 128/64 for other gear</li>
                                <li><strong>Turn on Automation</strong> â€” see the FX moves</li>
                                <li><strong>Hover the dots</strong> â€” shows Pattern, Step, value, and <strong>trig condition</strong> (for 64/128 modes)</li>
                                <li><strong>Program your gear</strong> â€” place lock trigs with the p-lock values and trig conditions shown</li>
                            </ol>
                        </div>
                        <div class="about-col">
                            <h3>Trig Conditions (64/128 mode)</h3>
                            <p>For sequencers limited to 64 or 128 steps:</p>
                            <ul>
                                <li><strong>64-step mode:</strong> Each pattern loops 4Ã— to cover 16 bars. Use <strong>A:B</strong> conditions where A = which loop, B = 4</li>
                                <li><strong>128-step mode:</strong> Each pattern loops 2Ã— to cover 16 bars. Use <strong>A:B</strong> conditions where A = which loop, B = 2</li>
                                <li><strong>Example:</strong> Bar 9 in 64-step mode shows "2:4" â€” place trig on step 1 with condition 2:4 (fires on 2nd loop)</li>
                                <li><strong>1st loop:</strong> No condition needed â€” trigs fire normally</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ROMANIAN MINIMAL -->
        <div class="daw-container active" id="romanian">
            <div class="daw-wrapper">
                <div class="track-labels">
                    <div class="song-row-spacer">
                        <span>SONG + PATTERN</span>
                    </div>
                    <div class="ruler-spacer">Bars â†’</div>
                    
                    <div class="track-label device-header">AUDIO TRACKS</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--kick-color)"></div>
                        <span class="track-name">Kick</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--hats-color)"></div>
                        <span class="track-name">Closed HH</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--hats-color)"></div>
                        <span class="track-name">Open HH</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--clap-color)"></div>
                        <span class="track-name">Clap</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--perc-color)"></div>
                        <span class="track-name">FM Perc</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--bass-color)"></div>
                        <span class="track-name">Bass</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--chord-color)"></div>
                        <span class="track-name">Chords</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--perc-color)"></div>
                        <span class="track-name">Perc Loops</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Pads</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--vocal-color)"></div>
                        <span class="track-name">Vocals</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--fx-color)"></div>
                        <span class="track-name">FX/Trans</span>
                    </div>
                    
                    <div class="track-label device-header">BUS TRACKS</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 1 (Drums)</span>
                        <span class="track-machine">Dirtshaper: DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Dirtshaper: FREQ</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 2 (Melodic)</span>
                        <span class="track-machine">Supervoid: DEC</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Supervoid: TIME</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 3 (Perc/Tops)</span>
                        <span class="track-machine">Phase 98: SPD</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Degrader: BR</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 4 (Vox/Atmos)</span>
                        <span class="track-machine">Pan Chorus: DEP</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Pan Chorus: DEC</span>
                    </div>
                    
                    <div class="track-label device-header">SENDS & MIX</div>
                    <div class="track-label">
                        <div class="track-color" style="background: #5ba0f0"></div>
                        <span class="track-name">Send 1: Daisy Delay</span>
                        <span class="track-machine">FDBK</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ TIME</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #a78bfa"></div>
                        <span class="track-name">Send 2: Rumsklang</span>
                        <span class="track-machine">SIZE</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ DAMP</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #f59e0b"></div>
                        <span class="track-name">Send 3: Master Comp + Filter</span>
                        <span class="track-machine">FREQ</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #ef4444"></div>
                        <span class="track-name">Mix: Degrader</span>
                        <span class="track-machine">DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name" style="color: #ec4899">â†³ DROP</span>
                    </div>
                </div>

                <div class="arrangement-area">
                    <!-- Song Row Lane -->
                    <div class="song-row-lane" id="romanian-songrow"></div>
                    <!-- Ruler with bar numbers -->
                    <div class="ruler" id="romanian-ruler"></div>
                    
                    <!-- Track Lanes -->
                    <div class="track-lanes" id="romanian-lanes"></div>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: var(--kick-color)"></div>Kick</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--bass-color)"></div>Bass</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--hats-color)"></div>Hi-Hats</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--clap-color)"></div>Clap/Snare</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--perc-color)"></div>Percussion</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--texture-color)"></div>Textures/Pads</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--chord-color)"></div>Chords</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--vocal-color)"></div>Vocals</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--fx-color)"></div>FX/Transitions</div>
            </div>

            <div class="track-notes">
                <div class="track-notes-title">Design Notes</div>
                <p><strong>Sound Design:</strong> Tight amp envelopes (5-15ms decay on hats), heavy swing (54-58%), micro-pitched perc layers. Keep filter envelopes shortâ€”the "pluck" comes from 20-50ms decay, not sustain. Multimode filter in BP mode with slight resonance for that nasal Romanian character.</p>
                <p><strong>Mix Approach:</strong> Kick at -6dB, everything else fighting for -12 to -18dB. The groove lives in the ghost notesâ€”keep velocities varied (60-100 range). Dirtshaper on drum bus adds odd harmonics without destroying transientsâ€”keep DRV under 30%.</p>
                <p><strong>Key Moves:</strong> Filterbank FREQ automation over 16-32 bars creates the "opening up" feel. Phase 98 on perc bus at slow SPD (10-20%) adds subtle movement without obvious modulation. Use BR (bitrate) reduction sparinglyâ€”it's the "dusty vinyl" texture, not the main event.</p>
            </div>

            <div class="setup-guide">
                <button class="setup-toggle" onclick="this.classList.toggle('open'); this.nextElementSibling.classList.toggle('open')">
                    ðŸ“‹ Setup Guide: Pattern Names & FX Settings
                </button>
                <div class="setup-content">
                    <div class="setup-inner">
                        <div class="setup-section">
                            <h3>Syntakt Pattern Bank</h3>
                            <div class="device-group">
                                <h4>Drum Patterns</h4>
                                <table class="pattern-table">
                                    <tr><th>Pattern</th><th>Name</th><th>Use / Notes</th></tr>
                                    <tr><td class="pattern-id">A01</td><td class="pattern-name">Intro_Kick</td><td class="pattern-use">Kick only, minimal velocity variation</td></tr>
                                    <tr><td class="pattern-id">A02</td><td class="pattern-name">Intro_Build</td><td class="pattern-use">+Closed HH sparse, kick same</td></tr>
                                    <tr><td class="pattern-id">A03</td><td class="pattern-name">Build_Full</td><td class="pattern-use">+Open HH, clap enters bar 5</td></tr>
                                    <tr><td class="pattern-id">B01</td><td class="pattern-name">Main_Groove</td><td class="pattern-use">Full drums, all elements, main energy</td></tr>
                                    <tr><td class="pattern-id">B02</td><td class="pattern-name">Main_Var</td><td class="pattern-use">Variation - different HH pattern</td></tr>
                                    <tr><td class="pattern-id">B03</td><td class="pattern-name">Peak_Full</td><td class="pattern-use">Maximum energy, extra perc hits</td></tr>
                                    <tr><td class="pattern-id">C01</td><td class="pattern-name">Break_Strip</td><td class="pattern-use">Breakdown - kick + minimal perc only</td></tr>
                                </table>
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Tonverk Pattern Bank</h3>
                            <div class="device-group">
                                <h4 class="tonverk-label">Melodic / Textural</h4>
                                <table class="pattern-table">
                                    <tr><th>Pattern</th><th>Name</th><th>Use / Notes</th></tr>
                                    <tr><td class="pattern-id">A01</td><td class="pattern-name">Intro_Atmos</td><td class="pattern-use">Pads only, filter 25%, long grains</td></tr>
                                    <tr><td class="pattern-id">A02</td><td class="pattern-name">Intro_Bass</td><td class="pattern-use">Sub bass enters, filter 30%</td></tr>
                                    <tr><td class="pattern-id">B01</td><td class="pattern-name">Main_All</td><td class="pattern-use">Bass + chords + perc loops active</td></tr>
                                    <tr><td class="pattern-id">B02</td><td class="pattern-name">Main_Vox</td><td class="pattern-use">+Vocal slices, sparse placement</td></tr>
                                    <tr><td class="pattern-id">B03</td><td class="pattern-name">Peak_Max</td><td class="pattern-use">All elements, filter 90%, drive up</td></tr>
                                    <tr><td class="pattern-id">C01</td><td class="pattern-name">Break_Pad</td><td class="pattern-use">Pad swell, reverb 70%, no bass</td></tr>
                                    <tr><td class="pattern-id">T01-04</td><td class="pattern-name">Trans_*</td><td class="pattern-use">Risers, sweeps, impacts (one-shots)</td></tr>
                                </table>
                            </div>
                        </div>

                        <div class="setup-section full-width">
                            <h3>FX Settings by Section</h3>
                            <table class="fx-table">
                                <tr>
                                    <th>Section</th>
                                    <th>Bus Câ†’Delay</th>
                                    <th>Bus Dâ†’Reverb</th>
                                    <th>Master Filter</th>
                                    <th>Drive/Sat</th>
                                    <th>Notes</th>
                                </tr>
                                <tr>
                                    <td class="section-name">INTRO (1-32)</td>
                                    <td class="value">Time: 3/16 | FB: 25%</td>
                                    <td class="value">Size: Room | Decay: 1.5s</td>
                                    <td class="value">LP: 30%</td>
                                    <td class="value">5%</td>
                                    <td>Dark, closed, minimal</td>
                                </tr>
                                <tr>
                                    <td class="section-name">BUILD (33-64)</td>
                                    <td class="value">Time: 1/8 | FB: 35%</td>
                                    <td class="value">Size: Room | Decay: 2s</td>
                                    <td class="value">LP: 50%</td>
                                    <td class="value">10%</td>
                                    <td>Opening gradually</td>
                                </tr>
                                <tr>
                                    <td class="section-name">MAIN (65-128)</td>
                                    <td class="value">Time: 1/8 | FB: 45%</td>
                                    <td class="value">Size: Hall | Decay: 2.5s</td>
                                    <td class="value">LP: 75%</td>
                                    <td class="value">15%</td>
                                    <td>Full energy, bright</td>
                                </tr>
                                <tr>
                                    <td class="section-name">BREAK (129-160)</td>
                                    <td class="value">Time: 1/4d | FB: 70%</td>
                                    <td class="value">Size: Large | Decay: 4s</td>
                                    <td class="value">LP: 40%</td>
                                    <td class="value">8%</td>
                                    <td>Washy, atmospheric</td>
                                </tr>
                                <tr>
                                    <td class="section-name">PEAK (161-192)</td>
                                    <td class="value">Time: 1/8 | FB: 40%</td>
                                    <td class="value">Size: Hall | Decay: 2s</td>
                                    <td class="value">LP: 90%</td>
                                    <td class="value">20%</td>
                                    <td>Maximum brightness</td>
                                </tr>
                                <tr>
                                    <td class="section-name">OUTRO (193-224)</td>
                                    <td class="value">Time: 3/16 | FB: 30%</td>
                                    <td class="value">Size: Room | Decay: 2s</td>
                                    <td class="value">LP: 25%</td>
                                    <td class="value">5%</td>
                                    <td>Closing down</td>
                                </tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Workflow Tip:</strong> Use Song Mode on Tonverk with pattern chains. Set up Snapshots on Drop controller for instant FX state recalls. P-lock filter sweeps within patterns for micro-evolution.
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Drop Controller Snapshots</h3>
                            <table class="pattern-table">
                                <tr><th>Snap</th><th>Name</th><th>Settings</th></tr>
                                <tr><td class="pattern-id">S01</td><td class="pattern-name">Intro_State</td><td class="pattern-use">Filter 30% | Delay 10% | Verb 15%</td></tr>
                                <tr><td class="pattern-id">S02</td><td class="pattern-name">Building</td><td class="pattern-use">Filter 50% | Delay 25% | Verb 25%</td></tr>
                                <tr><td class="pattern-id">S03</td><td class="pattern-name">Main_Energy</td><td class="pattern-use">Filter 75% | Delay 35% | Verb 30%</td></tr>
                                <tr><td class="pattern-id">S04</td><td class="pattern-name">Breakdown</td><td class="pattern-use">Filter 40% | Delay 60% | Verb 70%</td></tr>
                                <tr><td class="pattern-id">S05</td><td class="pattern-name">Peak_Max</td><td class="pattern-use">Filter 100% | Delay 40% | Verb 25%</td></tr>
                            </table>
                        </div>

                        <div class="setup-section">
                            <h3>Routing Setup</h3>
                            <table class="pattern-table">
                                <tr><th>Bus</th><th>Source</th><th>Destination</th></tr>
                                <tr><td class="pattern-id">Bus C</td><td class="pattern-name">Perc, Chords</td><td class="pattern-use">â†’ Syntakt FX (Delay Track)</td></tr>
                                <tr><td class="pattern-id">Bus D</td><td class="pattern-name">Pads, Vocals</td><td class="pattern-use">â†’ Syntakt FX (Reverb Track)</td></tr>
                                <tr><td class="pattern-id">Syn FX</td><td class="pattern-name">Processed signal</td><td class="pattern-use">â†’ Tonverk A/B (Master Comp)</td></tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Signal Flow:</strong> Tonverk sends dry to C/D â†’ Syntakt adds delay/verb â†’ Returns to Tonverk master bus for glue compression. This gives external FX character while maintaining cohesive master.
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>LFO Timing Reference (One-Shot Ramp for Automation)</h3>
                            <p style="font-size: 11px; color: #9ca3af; margin-bottom: 8px;">Formula: <strong>SPD Ã— MULT = 128 Ã· bars</strong>. Use RAMP waveform + ONE mode. DEP = total change amount (0-127).</p>
                            <table class="pattern-table">
                                <tr><th>Cycle</th><th>Steps</th><th>SPDÃ—MULT</th><th>Example</th><th>Use Case</th></tr>
                                <tr><td class="pattern-id">1 bar</td><td class="pattern-name">16</td><td class="pattern-use">128</td><td class="pattern-use">SPD 16, MULT Ã—8</td><td class="pattern-use">Fast filter sweeps</td></tr>
                                <tr><td class="pattern-id">2 bars</td><td class="pattern-name">32</td><td class="pattern-use">64</td><td class="pattern-use">SPD 8, MULT Ã—8</td><td class="pattern-use">Quick builds</td></tr>
                                <tr><td class="pattern-id">4 bars</td><td class="pattern-name">64</td><td class="pattern-use">32</td><td class="pattern-use">SPD 4, MULT Ã—8</td><td class="pattern-use">Section changes</td></tr>
                                <tr><td class="pattern-id">8 bars</td><td class="pattern-name">128</td><td class="pattern-use">16</td><td class="pattern-use">SPD 2, MULT Ã—8</td><td class="pattern-use">Slow evolves</td></tr>
                                <tr><td class="pattern-id">16 bars</td><td class="pattern-name">256</td><td class="pattern-use">8</td><td class="pattern-use">SPD 1, MULT Ã—8</td><td class="pattern-use">Full pattern</td></tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Quick Ref:</strong> SPD 32 Ã— MULT 4 = 1 bar. Halve the product to double the time. RAMP waveform = one-shot rise, DEP controls how many units (0-127) it changes.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TECH HOUSE -->
        <div class="daw-container" id="techhouse">
            <div class="daw-wrapper">
                <div class="track-labels">
                    <div class="song-row-spacer"><span>SONG + PATTERN</span></div>
                    <div class="ruler-spacer">Bars â†’</div>
                    
                    <div class="track-label device-header">SYNTAKT</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--kick-color)"></div>
                        <span class="track-name">Kick</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--hats-color)"></div>
                        <span class="track-name">Hi-Hats</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--clap-color)"></div>
                        <span class="track-name">Clap</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--perc-color)"></div>
                        <span class="track-name">Shaker</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--lead-color)"></div>
                        <span class="track-name">Lead</span>
                    </div>
                    
                    <div class="track-label device-header">TONVERK</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--bass-color)"></div>
                        <span class="track-name">Bass</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--chord-color)"></div>
                        <span class="track-name">Stabs</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--perc-color)"></div>
                        <span class="track-name">Tops</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--vocal-color)"></div>
                        <span class="track-name">Vox Chops</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--fx-color)"></div>
                        <span class="track-name">FX/Trans</span>
                    </div>
                    
                    <div class="track-label device-header">BUS TRACKS</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 1 (Drums)</span>
                        <span class="track-machine">Dirtshaper: DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Dirtshaper: FREQ</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 2 (Melodic)</span>
                        <span class="track-machine">Sat Delay: FDBK</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Sat Delay: TIME</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 3 (Tops/Perc)</span>
                        <span class="track-machine">Pan Chorus: DEP</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Degrader: FREZ</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 4 (Vox/FX)</span>
                        <span class="track-machine">Rumsklang: SIZE</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Rumsklang: DAMP</span>
                    </div>
                    
                    <div class="track-label device-header">SENDS & MIX</div>
                    <div class="track-label">
                        <div class="track-color" style="background: #5ba0f0"></div>
                        <span class="track-name">Send 1: Daisy Delay</span>
                        <span class="track-machine">FDBK</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ TIME</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #a78bfa"></div>
                        <span class="track-name">Send 2: Rumsklang</span>
                        <span class="track-machine">SIZE</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ DAMP</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #f59e0b"></div>
                        <span class="track-name">Send 3: Master Comp + Filter</span>
                        <span class="track-machine">FREQ</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #ef4444"></div>
                        <span class="track-name">Mix: Degrader</span>
                        <span class="track-machine">DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name" style="color: #ec4899">â†³ DROP</span>
                    </div>
                </div>

                <div class="arrangement-area">
                    <!-- Song Row Lane -->
                    <div class="song-row-lane" id="techhouse-songrow"></div>
                    <div class="ruler" id="techhouse-ruler"></div>
                    <div class="track-lanes" id="techhouse-lanes"></div>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: var(--kick-color)"></div>Kick</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--bass-color)"></div>Bass</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--hats-color)"></div>Hi-Hats</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--clap-color)"></div>Clap</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--perc-color)"></div>Percussion</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--chord-color)"></div>Stabs</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--vocal-color)"></div>Vocals</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--lead-color)"></div>Lead</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--fx-color)"></div>FX</div>
            </div>

            <div class="track-notes">
                <div class="track-notes-title">Design Notes</div>
                <p><strong>Sound Design:</strong> Punchy 909-style kick (short pitch envelope, 50-60Hz fundamental), offbeat hats with 50% swing. Bass needs upper harmonics (100-300Hz) to cut through on small speakersâ€”use Dirtshaper on Bus 2 to add presence without losing sub weight. Stabs work best with fast attack, medium release, LP filter closing on each hit.</p>
                <p><strong>Mix Approach:</strong> Sidechain the bass to kick (4-6dB gain reduction, fast attack, ~150ms release). Keep the "pump" musical, not extreme. Vox chops sit at -9dB, ducking slightly under stabs. Sat Delay FDBK on melodic bus creates space without washing out the groove.</p>
                <p><strong>Key Moves:</strong> Pan Chorus DEP on tops bus adds stereo width without phase issues in mono. FREZ (freeze) on buildups creates stuttery tensionâ€”automate from 0â†’40% over 4 bars before drops. Use Rumsklang SIZE to widen the breakdown, pull it back tight for drops.</p>
            </div>

            <div class="setup-guide">
                <button class="setup-toggle" onclick="this.classList.toggle('open'); this.nextElementSibling.classList.toggle('open')">
                    ðŸ“‹ Setup Guide: Pattern Names & FX Settings
                </button>
                <div class="setup-content">
                    <div class="setup-inner">
                        <div class="setup-section">
                            <h3>Syntakt Pattern Bank</h3>
                            <div class="device-group">
                                <h4>Drum Patterns</h4>
                                <table class="pattern-table">
                                    <tr><th>Pattern</th><th>Name</th><th>Use / Notes</th></tr>
                                    <tr><td class="pattern-id">A01</td><td class="pattern-name">Intro_Drums</td><td class="pattern-use">Kick + sparse HH, building energy</td></tr>
                                    <tr><td class="pattern-id">A02</td><td class="pattern-name">Build_Drums</td><td class="pattern-use">+Clap enters, fuller hats</td></tr>
                                    <tr><td class="pattern-id">B01</td><td class="pattern-name">Main_Groove</td><td class="pattern-use">Full tech house kit, all elements</td></tr>
                                    <tr><td class="pattern-id">B02</td><td class="pattern-name">Main_Var</td><td class="pattern-use">Variation - extra perc fills</td></tr>
                                    <tr><td class="pattern-id">B03</td><td class="pattern-name">Peak_Drums</td><td class="pattern-use">Maximum energy, ride cymbal added</td></tr>
                                    <tr><td class="pattern-id">C01</td><td class="pattern-name">Break_Min</td><td class="pattern-use">Stripped - sparse kick or none</td></tr>
                                    <tr><td class="pattern-id">D01</td><td class="pattern-name">Outro_Drums</td><td class="pattern-use">Winding down, stripping elements</td></tr>
                                </table>
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Tonverk Pattern Bank</h3>
                            <div class="device-group">
                                <h4 class="tonverk-label">Bass & Melodic</h4>
                                <table class="pattern-table">
                                    <tr><th>Pattern</th><th>Name</th><th>Use / Notes</th></tr>
                                    <tr><td class="pattern-id">A01</td><td class="pattern-name">Bass_Intro</td><td class="pattern-use">Filtered sub, teasing groove</td></tr>
                                    <tr><td class="pattern-id">A02</td><td class="pattern-name">Bass_Build</td><td class="pattern-use">Filter opening 30%â†’50%</td></tr>
                                    <tr><td class="pattern-id">B01</td><td class="pattern-name">Bass_Main</td><td class="pattern-use">Full bassline, filter 70%</td></tr>
                                    <tr><td class="pattern-id">B02</td><td class="pattern-name">Bass_Peak</td><td class="pattern-use">Filter 90%, drive up, aggressive</td></tr>
                                    <tr><td class="pattern-id">C01</td><td class="pattern-name">Bass_Break</td><td class="pattern-use">Sub only, filter 25%, atmospheric</td></tr>
                                    <tr><td class="pattern-id">S01</td><td class="pattern-name">Stab_Off</td><td class="pattern-use">Offbeat stabs, delay 25%</td></tr>
                                    <tr><td class="pattern-id">S02</td><td class="pattern-name">Stab_Full</td><td class="pattern-use">Open stabs, more presence</td></tr>
                                    <tr><td class="pattern-id">V01-03</td><td class="pattern-name">Vox_*</td><td class="pattern-use">Vocal chops - tease/hook/break</td></tr>
                                </table>
                            </div>
                        </div>

                        <div class="setup-section full-width">
                            <h3>FX Settings by Section</h3>
                            <table class="fx-table">
                                <tr>
                                    <th>Section</th>
                                    <th>Delay</th>
                                    <th>Reverb</th>
                                    <th>Bass Filter</th>
                                    <th>Master HP</th>
                                    <th>Notes</th>
                                </tr>
                                <tr>
                                    <td class="section-name">INTRO (1-32)</td>
                                    <td class="value">1/8 | FB: 25%</td>
                                    <td class="value">Room | 1.2s</td>
                                    <td class="value">35%</td>
                                    <td class="value">80Hz</td>
                                    <td>Tight, building</td>
                                </tr>
                                <tr>
                                    <td class="section-name">BUILD (33-64)</td>
                                    <td class="value">1/8 | FB: 30%</td>
                                    <td class="value">Room | 1.5s</td>
                                    <td class="value">55%</td>
                                    <td class="value">60Hz</td>
                                    <td>Opening up</td>
                                </tr>
                                <tr>
                                    <td class="section-name">DROP (65-96)</td>
                                    <td class="value">1/16 | FB: 20%</td>
                                    <td class="value">Plate | 0.8s</td>
                                    <td class="value">80%</td>
                                    <td class="value">30Hz</td>
                                    <td>Full energy, tight verb</td>
                                </tr>
                                <tr>
                                    <td class="section-name">BREAK (97-112)</td>
                                    <td class="value">1/4d | FB: 50%</td>
                                    <td class="value">Hall | 3s</td>
                                    <td class="value">30%</td>
                                    <td class="value">100Hz</td>
                                    <td>Washy, atmospheric</td>
                                </tr>
                                <tr>
                                    <td class="section-name">PEAK (113-128)</td>
                                    <td class="value">1/8 | FB: 25%</td>
                                    <td class="value">Plate | 1s</td>
                                    <td class="value">90%</td>
                                    <td class="value">25Hz</td>
                                    <td>Maximum, bright</td>
                                </tr>
                                <tr>
                                    <td class="section-name">OUTRO (129-144)</td>
                                    <td class="value">1/8 | FB: 30%</td>
                                    <td class="value">Room | 1.5s</td>
                                    <td class="value">40%</td>
                                    <td class="value">80Hz</td>
                                    <td>Filtering down</td>
                                </tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Tech House Tip:</strong> Keep reverb tight on drops (plate or room, <1.5s). The groove should be punchy not washy. Save the big reverb for breakdowns only.
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Drop Controller Snapshots</h3>
                            <table class="pattern-table">
                                <tr><th>Snap</th><th>Name</th><th>Settings</th></tr>
                                <tr><td class="pattern-id">S01</td><td class="pattern-name">TH_Intro</td><td class="pattern-use">Filter 35% | FX low | HP: 80Hz</td></tr>
                                <tr><td class="pattern-id">S02</td><td class="pattern-name">TH_Build</td><td class="pattern-use">Filter 55% | FX med | HP: 60Hz</td></tr>
                                <tr><td class="pattern-id">S03</td><td class="pattern-name">TH_Drop</td><td class="pattern-use">Filter 80% | FX tight | HP: off</td></tr>
                                <tr><td class="pattern-id">S04</td><td class="pattern-name">TH_Break</td><td class="pattern-use">Filter 30% | Verb 60% | Delay 50%</td></tr>
                                <tr><td class="pattern-id">S05</td><td class="pattern-name">TH_Peak</td><td class="pattern-use">Filter 100% | Drive 20% | All open</td></tr>
                            </table>
                        </div>

                        <div class="setup-section">
                            <h3>Key Machines</h3>
                            <table class="pattern-table">
                                <tr><th>Track</th><th>Machine</th><th>Key Settings</th></tr>
                                <tr><td class="pattern-id">Kick</td><td class="pattern-name">Analog BD</td><td class="pattern-use">Punch: 60 | Decay: 250ms | Tone: 45</td></tr>
                                <tr><td class="pattern-id">Clap</td><td class="pattern-name">Clap</td><td class="pattern-use">Noise blend | Decay: 180ms | Verb: 15%</td></tr>
                                <tr><td class="pattern-id">Bass</td><td class="pattern-name">Multi Player</td><td class="pattern-use">Loop on | Filter env | Drive: 15%</td></tr>
                                <tr><td class="pattern-id">Stabs</td><td class="pattern-name">Multi Player</td><td class="pattern-use">One-shot | Delay send: 25%</td></tr>
                            </table>
                        </div>

                        <div class="setup-section">
                            <h3>LFO Timing Reference (One-Shot Ramp for Automation)</h3>
                            <p style="font-size: 11px; color: #9ca3af; margin-bottom: 8px;">Formula: <strong>SPD Ã— MULT = 128 Ã· bars</strong>. Use RAMP waveform + ONE mode. DEP = total change amount (0-127).</p>
                            <table class="pattern-table">
                                <tr><th>Cycle</th><th>Steps</th><th>SPDÃ—MULT</th><th>Example</th><th>Use Case</th></tr>
                                <tr><td class="pattern-id">1 bar</td><td class="pattern-name">16</td><td class="pattern-use">128</td><td class="pattern-use">SPD 16, MULT Ã—8</td><td class="pattern-use">Fast filter sweeps</td></tr>
                                <tr><td class="pattern-id">2 bars</td><td class="pattern-name">32</td><td class="pattern-use">64</td><td class="pattern-use">SPD 8, MULT Ã—8</td><td class="pattern-use">Quick builds</td></tr>
                                <tr><td class="pattern-id">4 bars</td><td class="pattern-name">64</td><td class="pattern-use">32</td><td class="pattern-use">SPD 4, MULT Ã—8</td><td class="pattern-use">Section changes</td></tr>
                                <tr><td class="pattern-id">8 bars</td><td class="pattern-name">128</td><td class="pattern-use">16</td><td class="pattern-use">SPD 2, MULT Ã—8</td><td class="pattern-use">Slow evolves</td></tr>
                                <tr><td class="pattern-id">16 bars</td><td class="pattern-name">256</td><td class="pattern-use">8</td><td class="pattern-use">SPD 1, MULT Ã—8</td><td class="pattern-use">Full pattern</td></tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Quick Ref:</strong> SPD 32 Ã— MULT 4 = 1 bar. Halve the product to double the time. RAMP waveform = one-shot rise, DEP controls how many units (0-127) it changes.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TONVERK ONLY -->
        <div class="daw-container" id="tonverk">
            <div class="daw-wrapper">
                <div class="track-labels">
                    <div class="song-row-spacer"><span>SONG + PATTERN</span></div>
                    <div class="ruler-spacer">Bars â†’</div>
                    
                    <div class="track-label device-header">AUDIO TRACKS (T1-T8)</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--kick-color)"></div>
                        <span class="track-name">T1: Kick</span>
                        <span class="track-machine">Sample â†’ MIX</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--bass-color)"></div>
                        <span class="track-name">T2: Bass</span>
                        <span class="track-machine">Multi Player â†’ MIX</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--hats-color)"></div>
                        <span class="track-name">T3: Hats</span>
                        <span class="track-machine">Subtracks â†’ MIX</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--clap-color)"></div>
                        <span class="track-name">T4: Clap</span>
                        <span class="track-machine">Sample â†’ MIX</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--perc-color)"></div>
                        <span class="track-name">T5: Perc+Tex</span>
                        <span class="track-machine">Subtracks â†’ BUS 1</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--chord-color)"></div>
                        <span class="track-name">T6: Chords</span>
                        <span class="track-machine">Multi Player â†’ BUS 1</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--vocal-color)"></div>
                        <span class="track-name">T7: Vocal</span>
                        <span class="track-machine">Slice â†’ BUS 2</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--fx-color)"></div>
                        <span class="track-name">T8: FX/Trans</span>
                        <span class="track-machine">Sample â†’ MIX</span>
                    </div>
                    
                    <div class="track-label device-header">BUS TRACKS</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 1 (Drums)</span>
                        <span class="track-machine">Dirtshaper: DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Degrader: BR</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 2 (Melodic)</span>
                        <span class="track-machine">Sat Delay: FDBK</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Sat Delay: TIME</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 3 (Texture)</span>
                        <span class="track-machine">Phase 98: SPD</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Degrader: FREZ</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 4 (Vox/FX)</span>
                        <span class="track-machine">Pan Chorus: DEP</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Supervoid: DEC</span>
                    </div>
                    
                    <div class="track-label device-header">SENDS & MIX</div>
                    <div class="track-label">
                        <div class="track-color" style="background: #5ba0f0"></div>
                        <span class="track-name">Send 1: Daisy Delay</span>
                        <span class="track-machine">FDBK</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ TIME</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #a78bfa"></div>
                        <span class="track-name">Send 2: Rumsklang</span>
                        <span class="track-machine">SIZE</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ DAMP</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #f59e0b"></div>
                        <span class="track-name">Send 3: Master Comp + Filter</span>
                        <span class="track-machine">FREQ</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #ef4444"></div>
                        <span class="track-name">Mix: Degrader</span>
                        <span class="track-machine">DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name" style="color: #ec4899">â†³ DROP</span>
                    </div>
                </div>

                <div class="arrangement-area">
                    <!-- Song Row Lane -->
                    <div class="song-row-lane" id="tonverk-songrow"></div>
                    <div class="ruler" id="tonverk-ruler"></div>
                    <div class="track-lanes" id="tonverk-lanes"></div>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: var(--kick-color)"></div>Kick</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--bass-color)"></div>Bass</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--hats-color)"></div>Hi-Hats</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--clap-color)"></div>Clap</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--perc-color)"></div>Perc</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--chord-color)"></div>Chords</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--vocal-color)"></div>Vocals</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--fx-color)"></div>FX/Trans</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--texture-color)"></div>Bus Groups</div>
                <div class="legend-item"><div class="legend-color" style="background: #5ba0f0"></div>Send FX</div>
            </div>

            <div class="track-notes">
                <div class="track-notes-title">Design Notes</div>
                <p><strong>Sound Design:</strong> Classic minimal = tiny envelopes everywhere. Amp decay 10-30ms on perc, filter env even shorter. The "click" is the soundâ€”use HP filter at 200-400Hz to remove body, leave only transient. Chord stabs need fast attack (0-2ms), short decay (50-100ms), no sustain. Think Plastikman: one element, endlessly mutating.</p>
                <p><strong>Mix Approach:</strong> Everything lives in mono except subtle stereo FX. Keep the center focused: kick, bass, main perc all dead center. Phase 98 SPD on texture bus creates slow stereo drift without obvious panning. Sat Delay on melodic bus is your "dub techno in a box"â€”TIME automation creates polyrhythmic echoes.</p>
                <p><strong>Key Moves:</strong> Degrader BR on drum bus adds that classic Minus/Perlon crunchâ€”keep it subtle (values 20-40%). FREZ creates rhythmic stutters on percâ€”sync to tempo for glitchy repeats. Long arrangements (8-10 min) let you evolve one loopâ€”add/remove one element every 16-32 bars.</p>
            </div>

            <div class="setup-guide">
                <button class="setup-toggle" onclick="this.classList.toggle('open'); this.nextElementSibling.classList.toggle('open')">
                    ðŸ“‹ Setup Guide: Pattern Names & FX Settings
                </button>
                <div class="setup-content">
                    <div class="setup-inner">
                        <div class="setup-section">
                            <h3>Tonverk Track Assignments</h3>
                            <div class="device-group">
                                <h4 class="tonverk-label">8 Tracks + Busses</h4>
                                <table class="pattern-table">
                                    <tr><th>Track</th><th>Machine</th><th>Sample/Content</th></tr>
                                    <tr><td class="pattern-id">T1</td><td class="pattern-name">Sample</td><td class="pattern-use">Kick - 909/808 style, punchy</td></tr>
                                    <tr><td class="pattern-id">T2</td><td class="pattern-name">Multi Player</td><td class="pattern-use">Bass - loop mode, filter env</td></tr>
                                    <tr><td class="pattern-id">T3</td><td class="pattern-name">Subtracks</td><td class="pattern-use">Hats - 4-8 variations loaded</td></tr>
                                    <tr><td class="pattern-id">T4</td><td class="pattern-name">Sample</td><td class="pattern-use">Clap - layered, short verb</td></tr>
                                    <tr><td class="pattern-id">T5</td><td class="pattern-name">Subtracksâ†’Bus</td><td class="pattern-use">Perc - routed to Bus A/B</td></tr>
                                    <tr><td class="pattern-id">T6</td><td class="pattern-name">Multi Player</td><td class="pattern-use">Chords - stabs, pads</td></tr>
                                    <tr><td class="pattern-id">T7</td><td class="pattern-name">Slice</td><td class="pattern-use">Vocals - chops, phrases</td></tr>
                                    <tr><td class="pattern-id">T8</td><td class="pattern-name">Various</td><td class="pattern-use">FX - risers, impacts, sweeps</td></tr>
                                </table>
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Song Mode Pattern Bank</h3>
                            <div class="device-group">
                                <h4 class="tonverk-label">Pattern Structure</h4>
                                <table class="pattern-table">
                                    <tr><th>Pattern</th><th>Name</th><th>Active Tracks</th></tr>
                                    <tr><td class="pattern-id">A01</td><td class="pattern-name">Intro_Kick</td><td class="pattern-use">T1 only, filtered</td></tr>
                                    <tr><td class="pattern-id">A02</td><td class="pattern-name">Intro_Build</td><td class="pattern-use">T1, T3 sparse, T2 teasing</td></tr>
                                    <tr><td class="pattern-id">A03</td><td class="pattern-name">Build_Full</td><td class="pattern-use">T1-T5, bass opening</td></tr>
                                    <tr><td class="pattern-id">B01</td><td class="pattern-name">Main_Groove</td><td class="pattern-use">All tracks, full energy</td></tr>
                                    <tr><td class="pattern-id">B02</td><td class="pattern-name">Main_Var</td><td class="pattern-use">All + chord variation</td></tr>
                                    <tr><td class="pattern-id">C01</td><td class="pattern-name">Break_Atmos</td><td class="pattern-use">T1 sparse, T5-T7, no bass</td></tr>
                                    <tr><td class="pattern-id">D01</td><td class="pattern-name">Peak_Max</td><td class="pattern-use">All tracks, filter 100%</td></tr>
                                    <tr><td class="pattern-id">E01</td><td class="pattern-name">Outro_Strip</td><td class="pattern-use">Stripping T3-T7 gradually</td></tr>
                                </table>
                            </div>
                        </div>

                        <div class="setup-section full-width">
                            <h3>FX Settings by Section</h3>
                            <table class="fx-table">
                                <tr>
                                    <th>Section</th>
                                    <th>Bus A (Delay)</th>
                                    <th>Bus B (Reverb)</th>
                                    <th>Filter LP</th>
                                    <th>Send Levels</th>
                                    <th>Notes</th>
                                </tr>
                                <tr>
                                    <td class="section-name">INTRO (1-16)</td>
                                    <td class="value">Time: 1/8 | FB: 30%</td>
                                    <td class="value">Room | 1.2s</td>
                                    <td class="value">25%</td>
                                    <td class="value">A: 15% B: 20%</td>
                                    <td>Dark, filtered, subtle FX</td>
                                </tr>
                                <tr>
                                    <td class="section-name">BUILD (17-32)</td>
                                    <td class="value">Time: 1/8 | FB: 35%</td>
                                    <td class="value">Room | 1.5s</td>
                                    <td class="value">40%</td>
                                    <td class="value">A: 25% B: 25%</td>
                                    <td>Opening gradually</td>
                                </tr>
                                <tr>
                                    <td class="section-name">MAIN (33-128)</td>
                                    <td class="value">Time: 1/4d | FB: 45%</td>
                                    <td class="value">Hall | 2.5s</td>
                                    <td class="value">80%</td>
                                    <td class="value">A: 35% B: 35%</td>
                                    <td>Full energy</td>
                                </tr>
                                <tr>
                                    <td class="section-name">BREAK (129-144)</td>
                                    <td class="value">Time: 1/2 | FB: 60%</td>
                                    <td class="value">Large | 4s</td>
                                    <td class="value">45%</td>
                                    <td class="value">A: 50% B: 60%</td>
                                    <td>Washy, long tails</td>
                                </tr>
                                <tr>
                                    <td class="section-name">PEAK (145-176)</td>
                                    <td class="value">Time: 1/4d | FB: 40%</td>
                                    <td class="value">Hall | 2s</td>
                                    <td class="value">90%</td>
                                    <td class="value">A: 40% B: 40%</td>
                                    <td>Maximum brightness</td>
                                </tr>
                                <tr>
                                    <td class="section-name">OUTRO (177-192)</td>
                                    <td class="value">Time: 1/8 | FB: 25%</td>
                                    <td class="value">Room | 1.5s</td>
                                    <td class="value">20%</td>
                                    <td class="value">A: 20% B: 25%</td>
                                    <td>Closing down</td>
                                </tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Tonverk-Only Workflow:</strong> Use Song Mode for pattern chains. P-lock filter sweeps per step for micro-evolution. Subtracks on T3/T5 give you 8+ sounds per track for variety without pattern changes.
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Bus Routing</h3>
                            <table class="pattern-table">
                                <tr><th>Bus</th><th>FX Type</th><th>Receives From</th></tr>
                                <tr><td class="pattern-id">Bus A</td><td class="pattern-name">Delay</td><td class="pattern-use">T5 Perc, T6 Chords, T7 Vocals</td></tr>
                                <tr><td class="pattern-id">Bus B</td><td class="pattern-name">Reverb</td><td class="pattern-use">T4 Clap, T5 Perc, T7 Vocals</td></tr>
                                <tr><td class="pattern-id">Master</td><td class="pattern-name">Compressor</td><td class="pattern-use">All tracks + bus returns</td></tr>
                            </table>
                        </div>

                        <div class="setup-section">
                            <h3>P-Lock Focus Points</h3>
                            <table class="pattern-table">
                                <tr><th>Track</th><th>Parameter</th><th>Range</th></tr>
                                <tr><td class="pattern-id">T2 Bass</td><td class="pattern-name">Filter Cutoff</td><td class="pattern-use">25% â†’ 90% over 16 bars</td></tr>
                                <tr><td class="pattern-id">T3 Hats</td><td class="pattern-name">Subtrack Select</td><td class="pattern-use">Rotate through 1-4 per bar</td></tr>
                                <tr><td class="pattern-id">T5 Perc</td><td class="pattern-name">Bus Send A</td><td class="pattern-use">15% â†’ 60% for builds</td></tr>
                                <tr><td class="pattern-id">T6 Chords</td><td class="pattern-name">Decay/Release</td><td class="pattern-use">Short stabs â†’ long pads</td></tr>
                            </table>
                        </div>

                        <div class="setup-section">
                            <h3>LFO Timing Reference (One-Shot Ramp for Automation)</h3>
                            <p style="font-size: 11px; color: #9ca3af; margin-bottom: 8px;">Formula: <strong>SPD Ã— MULT = 128 Ã· bars</strong>. Use RAMP waveform + ONE mode. DEP = total change amount (0-127).</p>
                            <table class="pattern-table">
                                <tr><th>Cycle</th><th>Steps</th><th>SPDÃ—MULT</th><th>Example</th><th>Use Case</th></tr>
                                <tr><td class="pattern-id">1 bar</td><td class="pattern-name">16</td><td class="pattern-use">128</td><td class="pattern-use">SPD 16, MULT Ã—8</td><td class="pattern-use">Fast filter sweeps</td></tr>
                                <tr><td class="pattern-id">2 bars</td><td class="pattern-name">32</td><td class="pattern-use">64</td><td class="pattern-use">SPD 8, MULT Ã—8</td><td class="pattern-use">Quick builds</td></tr>
                                <tr><td class="pattern-id">4 bars</td><td class="pattern-name">64</td><td class="pattern-use">32</td><td class="pattern-use">SPD 4, MULT Ã—8</td><td class="pattern-use">Section changes</td></tr>
                                <tr><td class="pattern-id">8 bars</td><td class="pattern-name">128</td><td class="pattern-use">16</td><td class="pattern-use">SPD 2, MULT Ã—8</td><td class="pattern-use">Slow evolves</td></tr>
                                <tr><td class="pattern-id">16 bars</td><td class="pattern-name">256</td><td class="pattern-use">8</td><td class="pattern-use">SPD 1, MULT Ã—8</td><td class="pattern-use">Full pattern</td></tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Quick Ref:</strong> SPD 32 Ã— MULT 4 = 1 bar. Halve the product to double the time. RAMP waveform = one-shot rise, DEP controls how many units (0-127) it changes.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MELODARK / HIGH-TECH MINIMAL (Hozho Style) -->
        <div class="daw-container" id="melodark">
            <div class="daw-wrapper">
                <div class="track-labels">
                    <div class="song-row-spacer"><span>SONG + PATTERN</span></div>
                    <div class="ruler-spacer">Bars â†’</div>
                    
                    <div class="track-label device-header">AUDIO TRACKS (T1-T8)</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--kick-color)"></div>
                        <span class="track-name">Kick</span>
                        <span class="track-machine">909 Style</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--bass-color)"></div>
                        <span class="track-name">Bass</span>
                        <span class="track-machine">Dark Mono</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--hats-color)"></div>
                        <span class="track-name">Hats/Perc</span>
                        <span class="track-machine">Subtracks</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--clap-color)"></div>
                        <span class="track-name">Clap/Snare</span>
                        <span class="track-machine">Layered</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Dark Pad</span>
                        <span class="track-machine">Grainer</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--lead-color)"></div>
                        <span class="track-name">Lead/Arp</span>
                        <span class="track-machine">Multi Player</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--vocal-color)"></div>
                        <span class="track-name">Vocals</span>
                        <span class="track-machine">Slice</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--fx-color)"></div>
                        <span class="track-name">FX/Risers</span>
                        <span class="track-machine">Various</span>
                    </div>
                    
                    <div class="track-label device-header">BUS TRACKS</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 1 (Drums)</span>
                        <span class="track-machine">Dirtshaper: DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Phase 98: SPD</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 2 (Bass)</span>
                        <span class="track-machine">Supervoid: DEC</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Chrono Pitch: FDBK</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 3 (Pads/Atmos)</span>
                        <span class="track-machine">Pan Chorus: WDTH</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Steel Box: DEC</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 4 (Leads/Arps)</span>
                        <span class="track-machine">Phase 98: FREQ</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Daisy Delay: FDBK</span>
                    </div>
                    
                    <div class="track-label device-header">SENDS & MIX</div>
                    <div class="track-label">
                        <div class="track-color" style="background: #5ba0f0"></div>
                        <span class="track-name">Send 1: Daisy Delay</span>
                        <span class="track-machine">FDBK</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ TIME</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #a78bfa"></div>
                        <span class="track-name">Send 2: Rumsklang</span>
                        <span class="track-machine">SIZE</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ DAMP</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #f59e0b"></div>
                        <span class="track-name">Send 3: Master Comp + Filter</span>
                        <span class="track-machine">FREQ</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #ef4444"></div>
                        <span class="track-name">Mix: Degrader</span>
                        <span class="track-machine">DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name" style="color: #ec4899">â†³ DROP</span>
                    </div>
                </div>

                <div class="arrangement-area">
                    <!-- Song Row Lane -->
                    <div class="song-row-lane" id="melodark-songrow"></div>
                    <div class="ruler" id="melodark-ruler"></div>
                    <div class="track-lanes" id="melodark-lanes"></div>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: var(--kick-color)"></div>Kick</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--bass-color)"></div>Bass</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--hats-color)"></div>Hats</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--clap-color)"></div>Clap</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--texture-color)"></div>Pad/Atmos</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--lead-color)"></div>Lead/Arp</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--vocal-color)"></div>Vocals</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--fx-color)"></div>FX/Risers</div>
            </div>

            <div class="track-notes">
                <div class="track-notes-title">Design Notes</div>
                <p><strong>Sound Design:</strong> Pads need long attack (200-500ms), infinite sustain, long release (2-4s). Layer 2-3 detuned oscillators (+/- 5-10 cents) for width. Arps use short decay with high resonance filterâ€”the "pluck" comes from filter env, not amp. Dark = roll off everything above 8kHz on master, keep kick clicking through at 2-4kHz.</p>
                <p><strong>Mix Approach:</strong> Supervoid DEC on bass bus creates infinite sustainâ€”automate to swell during breakdowns. Chrono Pitch FDBK adds shimmer to bass without pitch artifactsâ€”keep subtle (15-30%). Pan Chorus WDTH on pad bus creates massive stereo fieldâ€”collapse to mono on drops for impact.</p>
                <p><strong>Key Moves:</strong> Steel Box reverb on pads = that Afterlife metallic space. Phase 98 FREQ on leads creates slow filter movementâ€”set SPD very low (5-15%) for evolving texture. Daisy Delay FDBK on leads creates rhythmic throwsâ€”sync to dotted values (3/16, 1/4d) for that melodic techno swing. 32-bar breakdowns are standardâ€”earn the drop.</p>
            </div>

            <div class="setup-guide">
                <button class="setup-toggle" onclick="this.classList.toggle('open'); this.nextElementSibling.classList.toggle('open')">
                    ðŸ“‹ Setup Guide: Pattern Names & FX Settings
                </button>
                <div class="setup-content">
                    <div class="setup-inner">
                        <div class="setup-section">
                            <h3>Tonverk Pattern Bank - Drums</h3>
                            <div class="device-group">
                                <h4 class="tonverk-label">Kick & Percussion</h4>
                                <table class="pattern-table">
                                    <tr><th>Pattern</th><th>Name</th><th>Use / Notes</th></tr>
                                    <tr><td class="pattern-id">A01</td><td class="pattern-name">Kick_Filter</td><td class="pattern-use">Filtered kick, HP at 200Hz, tension builder</td></tr>
                                    <tr><td class="pattern-id">A02</td><td class="pattern-name">Kick_Full</td><td class="pattern-use">Full 909-style, punchy, sidechain source</td></tr>
                                    <tr><td class="pattern-id">C01</td><td class="pattern-name">HH_Sparse</td><td class="pattern-use">Minimal hats, every 2 bars, intro only</td></tr>
                                    <tr><td class="pattern-id">C02</td><td class="pattern-name">HH_Groove</td><td class="pattern-use">Full 16ths, shuffle 15%</td></tr>
                                    <tr><td class="pattern-id">C03</td><td class="pattern-name">HH_Intense</td><td class="pattern-use">Driving + open HH accents, peak energy</td></tr>
                                    <tr><td class="pattern-id">D01</td><td class="pattern-name">Clap_Dark</td><td class="pattern-use">Dark clap, reverb tail, 2&4</td></tr>
                                    <tr><td class="pattern-id">D02</td><td class="pattern-name">Clap_Layer</td><td class="pattern-use">Clap + snare layered, extra punch</td></tr>
                                </table>
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Tonverk Pattern Bank - Melodic</h3>
                            <div class="device-group">
                                <h4 class="tonverk-label">Bass, Lead & Atmosphere</h4>
                                <table class="pattern-table">
                                    <tr><th>Pattern</th><th>Name</th><th>Use / Notes</th></tr>
                                    <tr><td class="pattern-id">B01</td><td class="pattern-name">Bass_Tease</td><td class="pattern-use">Sub hints, filter closed, anticipation</td></tr>
                                    <tr><td class="pattern-id">B02</td><td class="pattern-name">Bass_Drive</td><td class="pattern-use">Main line, filter 70%, drive 25%</td></tr>
                                    <tr><td class="pattern-id">B03</td><td class="pattern-name">Bass_Peak</td><td class="pattern-use">Maximum aggression, filter 100%, dist 30%</td></tr>
                                    <tr><td class="pattern-id">E01</td><td class="pattern-name">Pad_Dark</td><td class="pattern-use">Dark drone, Grainer, long grains, LP sweep</td></tr>
                                    <tr><td class="pattern-id">E02</td><td class="pattern-name">Pad_Under</td><td class="pattern-use">Subtle bed under vocals, sidechained</td></tr>
                                    <tr><td class="pattern-id">E03</td><td class="pattern-name">Pad_Swell</td><td class="pattern-use">Breakdown atmosphere, rising tension</td></tr>
                                    <tr><td class="pattern-id">F01</td><td class="pattern-name">Arp_Dark</td><td class="pattern-use">Hypnotic arpeggio, minor key, delay 3/16</td></tr>
                                    <tr><td class="pattern-id">F02</td><td class="pattern-name">Lead_Peak</td><td class="pattern-use">Melodark lead, distorted, filter mod</td></tr>
                                </table>
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Vocal Patterns</h3>
                            <div class="device-group">
                                <h4 class="tonverk-label">Slice Machine Presets</h4>
                                <table class="pattern-table">
                                    <tr><th>Pattern</th><th>Name</th><th>Lyric / Use</th></tr>
                                    <tr><td class="pattern-id">V01</td><td class="pattern-name">Vox_Verse1</td><td class="pattern-use">"Constantly in a fractured state of mind"</td></tr>
                                    <tr><td class="pattern-id">V02</td><td class="pattern-name">Vox_Hook</td><td class="pattern-use">"No holding me back" - main hook, layered</td></tr>
                                    <tr><td class="pattern-id">V03</td><td class="pattern-name">Vox_Break</td><td class="pattern-use">"Losing my sanity" - breakdown, heavy verb</td></tr>
                                    <tr><td class="pattern-id">V04</td><td class="pattern-name">Vox_Verse2</td><td class="pattern-use">"Moving on with my mistakes" - aggressive</td></tr>
                                    <tr><td class="pattern-id">X01-04</td><td class="pattern-name">FX_*</td><td class="pattern-use">Risers, downsweeps, impacts, builds</td></tr>
                                </table>
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Hozho Sound Design Tips</h3>
                            <table class="pattern-table">
                                <tr><th>Element</th><th>Key Settings</th></tr>
                                <tr><td class="pattern-name">Bass Tone</td><td class="pattern-use">Dark, mono, slight distortion, filter env down</td></tr>
                                <tr><td class="pattern-name">Arp Character</td><td class="pattern-use">Minor key, 3/16 delay, filter modulating slowly</td></tr>
                                <tr><td class="pattern-name">Pad Texture</td><td class="pattern-use">Grainer, long grains (200-500ms), LP filter</td></tr>
                                <tr><td class="pattern-name">Vocal Processing</td><td class="pattern-use">Dark delay throws, occasional verb wash</td></tr>
                                <tr><td class="pattern-name">Overall Vibe</td><td class="pattern-use">Dark but driving, hypnotic, tension/release</td></tr>
                            </table>
                        </div>

                        <div class="setup-section full-width">
                            <h3>FX Settings by Section</h3>
                            <table class="fx-table">
                                <tr>
                                    <th>Section</th>
                                    <th>Delay</th>
                                    <th>Reverb</th>
                                    <th>Filter Macro</th>
                                    <th>Drive/Sat</th>
                                    <th>Mood</th>
                                </tr>
                                <tr>
                                    <td class="section-name">INTRO (1-32)</td>
                                    <td class="value">3/16 | FB: 35% | Dark</td>
                                    <td class="value">Dark Hall | 3s | LP filter</td>
                                    <td class="value">25% â†’ 40%</td>
                                    <td class="value">10%</td>
                                    <td>Tension building, mysterious</td>
                                </tr>
                                <tr>
                                    <td class="section-name">DROP 1 (33-64)</td>
                                    <td class="value">Ping-pong | FB: 45%</td>
                                    <td class="value">Room | 1.2s | Tight</td>
                                    <td class="value">70%</td>
                                    <td class="value">25%</td>
                                    <td>Driving, hypnotic groove</td>
                                </tr>
                                <tr>
                                    <td class="section-name">VOCAL (65-96)</td>
                                    <td class="value">Ping-pong | FB: 45%</td>
                                    <td class="value">Room | 1.2s</td>
                                    <td class="value">75%</td>
                                    <td class="value">25%</td>
                                    <td>Space for vocals, bass ducks</td>
                                </tr>
                                <tr>
                                    <td class="section-name">BREAK (97-112)</td>
                                    <td class="value">Long | FB: 70%</td>
                                    <td class="value">Massive Hall | 5s</td>
                                    <td class="value">30% â†’ 50%</td>
                                    <td class="value">15%</td>
                                    <td>Atmospheric, tension rebuild</td>
                                </tr>
                                <tr>
                                    <td class="section-name">DROP 2 (113-144)</td>
                                    <td class="value">Controlled | FB: 40%</td>
                                    <td class="value">Hall | 2.5s</td>
                                    <td class="value">95%</td>
                                    <td class="value">40-50%</td>
                                    <td>Maximum energy, aggressive</td>
                                </tr>
                                <tr>
                                    <td class="section-name">OUTRO (145-176)</td>
                                    <td class="value">3/16 | FB: 30%</td>
                                    <td class="value">Hall | 2s</td>
                                    <td class="value">85% â†’ 20%</td>
                                    <td class="value">15%</td>
                                    <td>Closing down, filtering out</td>
                                </tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Melodark Tip:</strong> The Hozho sound is about tension and darkness. Keep delays dark (LP filtered), use longer attack times on bass, and let the hypnotic groove breathe. Vocals should cut through but not dominate - they're part of the texture.
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Bus Routing</h3>
                            <table class="pattern-table">
                                <tr><th>Bus</th><th>FX</th><th>Key Settings</th></tr>
                                <tr><td class="pattern-id">Bus A</td><td class="pattern-name">Delay</td><td class="pattern-use">3/16 dark, LP filter on returns</td></tr>
                                <tr><td class="pattern-id">Bus B</td><td class="pattern-name">Reverb</td><td class="pattern-use">Dark hall, pre-delay 30ms, LP on verb</td></tr>
                                <tr><td class="pattern-id">Master</td><td class="pattern-name">Glue</td><td class="pattern-use">Soft compression, slight saturation</td></tr>
                            </table>
                        </div>

                        <div class="setup-section">
                            <h3>Automation Focus</h3>
                            <table class="pattern-table">
                                <tr><th>Parameter</th><th>Range</th><th>When</th></tr>
                                <tr><td class="pattern-name">Filter Macro</td><td class="pattern-use">25% â†’ 95%</td><td class="pattern-use">Gradual over builds, snap on drops</td></tr>
                                <tr><td class="pattern-name">Drive/Sat</td><td class="pattern-use">10% â†’ 50%</td><td class="pattern-use">Peak sections only, subtle elsewhere</td></tr>
                                <tr><td class="pattern-name">Reverb Send</td><td class="pattern-use">20% â†’ 70%</td><td class="pattern-use">Max on breakdowns</td></tr>
                                <tr><td class="pattern-name">Delay Feedback</td><td class="pattern-use">35% â†’ 70%</td><td class="pattern-use">Increase for breakdown wash</td></tr>
                            </table>
                        </div>

                        <div class="setup-section">
                            <h3>LFO Timing Reference (One-Shot Ramp for Automation)</h3>
                            <p style="font-size: 11px; color: #9ca3af; margin-bottom: 8px;">Formula: <strong>SPD Ã— MULT = 128 Ã· bars</strong>. Use RAMP waveform + ONE mode. DEP = total change amount (0-127).</p>
                            <table class="pattern-table">
                                <tr><th>Cycle</th><th>Steps</th><th>SPDÃ—MULT</th><th>Example</th><th>Use Case</th></tr>
                                <tr><td class="pattern-id">1 bar</td><td class="pattern-name">16</td><td class="pattern-use">128</td><td class="pattern-use">SPD 16, MULT Ã—8</td><td class="pattern-use">Fast filter sweeps</td></tr>
                                <tr><td class="pattern-id">2 bars</td><td class="pattern-name">32</td><td class="pattern-use">64</td><td class="pattern-use">SPD 8, MULT Ã—8</td><td class="pattern-use">Quick builds</td></tr>
                                <tr><td class="pattern-id">4 bars</td><td class="pattern-name">64</td><td class="pattern-use">32</td><td class="pattern-use">SPD 4, MULT Ã—8</td><td class="pattern-use">Section changes</td></tr>
                                <tr><td class="pattern-id">8 bars</td><td class="pattern-name">128</td><td class="pattern-use">16</td><td class="pattern-use">SPD 2, MULT Ã—8</td><td class="pattern-use">Slow evolves</td></tr>
                                <tr><td class="pattern-id">16 bars</td><td class="pattern-name">256</td><td class="pattern-use">8</td><td class="pattern-use">SPD 1, MULT Ã—8</td><td class="pattern-use">Full pattern</td></tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Quick Ref:</strong> SPD 32 Ã— MULT 4 = 1 bar. Halve the product to double the time. RAMP waveform = one-shot rise, DEP controls how many units (0-127) it changes.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RUMBLE BASS / FINE DAY ANTHEM STYLE -->
        <div class="daw-container" id="rumble">
            <div class="daw-wrapper">
                <div class="track-labels">
                    <div class="song-row-spacer"><span>SONG + PATTERN</span></div>
                    <div class="ruler-spacer">Bars â†’</div>
                    
                    <div class="track-label device-header">AUDIO TRACKS (T1-T8)</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--kick-color)"></div>
                        <span class="track-name">Kick</span>
                        <span class="track-machine">Punchy 909</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--bass-color)"></div>
                        <span class="track-name">RUMBLE BASS</span>
                        <span class="track-machine">25-60Hz Sub</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--bass-color)"></div>
                        <span class="track-name">Mid Bass</span>
                        <span class="track-machine">80-200Hz</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--hats-color)"></div>
                        <span class="track-name">Hats/Tops</span>
                        <span class="track-machine">Rave Energy</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--clap-color)"></div>
                        <span class="track-name">Clap/Snare</span>
                        <span class="track-machine">Big Room</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--vocal-color)"></div>
                        <span class="track-name">Vocals</span>
                        <span class="track-machine">Euphoric</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Pad/Atmos</span>
                        <span class="track-machine">Rave Wash</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--chord-color)"></div>
                        <span class="track-name">Stabs/Chords</span>
                        <span class="track-machine">Classic Rave</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--fx-color)"></div>
                        <span class="track-name">FX/Risers</span>
                        <span class="track-machine">Big Build</span>
                    </div>
                    
                    <div class="track-label device-header">BUS TRACKS</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 1 (Drums)</span>
                        <span class="track-machine">Dirtshaper: DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Degrader: BR</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 2 (Bass)</span>
                        <span class="track-machine">Freq Warper: FREQ</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Dirtshaper: DRV</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 3 (Tops/Perc)</span>
                        <span class="track-machine">Phase 98: SPD</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Degrader: FREZ</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 4 (Vox/Stabs)</span>
                        <span class="track-machine">Sat Delay: FDBK</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Supervoid: DEC</span>
                    </div>
                    
                    <div class="track-label device-header">SENDS & MIX</div>
                    <div class="track-label">
                        <div class="track-color" style="background: #5ba0f0"></div>
                        <span class="track-name">Send 1: Daisy Delay</span>
                        <span class="track-machine">FDBK</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ TIME</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #a78bfa"></div>
                        <span class="track-name">Send 2: Rumsklang</span>
                        <span class="track-machine">SIZE</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ DAMP</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #f59e0b"></div>
                        <span class="track-name">Send 3: Master Comp + Filter</span>
                        <span class="track-machine">FREQ</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #ef4444"></div>
                        <span class="track-name">Mix: Degrader</span>
                        <span class="track-machine">DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name" style="color: #ec4899">â†³ DROP</span>
                    </div>
                </div>

                <div class="arrangement-area">
                    <!-- Song Row Lane -->
                    <div class="song-row-lane" id="rumble-songrow"></div>
                    <div class="ruler" id="rumble-ruler"></div>
                    <div class="track-lanes" id="rumble-lanes"></div>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: var(--kick-color)"></div>Kick</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--bass-color)"></div>Rumble/Mid</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--hats-color)"></div>Tops</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--clap-color)"></div>Clap</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--vocal-color)"></div>Vocals</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--texture-color)"></div>Pad</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--chord-color)"></div>Stabs</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--fx-color)"></div>FX</div>
            </div>

            <div class="track-notes">
                <div class="track-notes-title">Design Notes</div>
                <p><strong>Sound Design:</strong> Two-layer bass: sub (25-50Hz, pure sine) + mid bass (80-200Hz, saturated saw/square). Phase-align themâ€”flip polarity on one if the combined low end feels weak. Kick needs click (2-4kHz) to cut through the sub. Hard-clip the kick transient for that industrial snap. Use a HP filter on everything except kick/bass at 80-120Hz.</p>
                <p><strong>Mix Approach:</strong> Freq Warper FREQ on bass bus creates that "talking bass" modulationâ€”automate slowly over 8 bars. Dirtshaper DRV on bass adds harmonics that translate on small speakersâ€”don't be shy, push it to 40-60%. Sidechain the entire bass bus to kick with aggressive settings (8-10dB reduction, 1ms attack, 100ms release).</p>
                <p><strong>Key Moves:</strong> Phase 98 SPD on tops bus creates that industrial swirlâ€”faster values (60-80%) for aggressive energy. Degrader FREZ on perc creates rhythmic destructionâ€”sync to tempo for controllable chaos. The breakdown should pull sub completelyâ€”HP sweep up to 200Hzâ€”then slam it back on the drop. Sat Delay on stabs = rave euphoria, keep FDBK high (50-70%) for washy throws.</p>
            </div>

            <div class="setup-guide">
                <button class="setup-toggle" onclick="this.classList.toggle('open'); this.nextElementSibling.classList.toggle('open')">
                    ðŸ“‹ Setup Guide: Pattern Names & FX Settings
                </button>
                <div class="setup-content">
                    <div class="setup-inner">
                        <div class="setup-section">
                            <h3>Drum Patterns</h3>
                            <div class="device-group">
                                <h4 class="tonverk-label">Kick & Tops</h4>
                                <table class="pattern-table">
                                    <tr><th>Pattern</th><th>Name</th><th>Use / Notes</th></tr>
                                    <tr><td class="pattern-id">A01</td><td class="pattern-name">Kick_Intro</td><td class="pattern-use">Punchy 909, no sub yet, building</td></tr>
                                    <tr><td class="pattern-id">A02</td><td class="pattern-name">Kick_Full</td><td class="pattern-use">Full energy, tight transient, locked w/rumble</td></tr>
                                    <tr><td class="pattern-id">A03</td><td class="pattern-name">Kick_Build</td><td class="pattern-use">Building pattern, snare roll layered</td></tr>
                                    <tr><td class="pattern-id">D01</td><td class="pattern-name">HH_Intro</td><td class="pattern-use">Sparse tops, offbeat, setting groove</td></tr>
                                    <tr><td class="pattern-id">D02</td><td class="pattern-name">HH_Groove</td><td class="pattern-use">16th hats, rave energy, shuffle 10%</td></tr>
                                    <tr><td class="pattern-id">D03</td><td class="pattern-name">HH_Peak</td><td class="pattern-use">Full tops + ride cymbal, maximum drive</td></tr>
                                    <tr><td class="pattern-id">E01</td><td class="pattern-name">Clap_Rave</td><td class="pattern-use">Big clap, reverb tail, rave energy</td></tr>
                                    <tr><td class="pattern-id">E02</td><td class="pattern-name">Snare_Roll</td><td class="pattern-use">Building snare roll for drops</td></tr>
                                    <tr><td class="pattern-id">E03</td><td class="pattern-name">Clap_Heavy</td><td class="pattern-use">Layered clap + snare, maximum impact</td></tr>
                                </table>
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>RUMBLE BASS System</h3>
                            <div class="device-group">
                                <h4 class="tonverk-label">Split Bass Approach</h4>
                                <table class="pattern-table">
                                    <tr><th>Pattern</th><th>Name</th><th>Frequency / Notes</th></tr>
                                    <tr><td class="pattern-id">B01</td><td class="pattern-name">Sub_Tease</td><td class="pattern-use">30-50Hz, filtered, hints only</td></tr>
                                    <tr><td class="pattern-id">B02</td><td class="pattern-name">Rumble_Full</td><td class="pattern-use">25-60Hz FULL, sidechain pumping, sat 20%</td></tr>
                                    <tr><td class="pattern-id">B03</td><td class="pattern-name">Sub_Sustain</td><td class="pattern-use">Long notes, no pump, breakdown tension</td></tr>
                                    <tr><td class="pattern-id">B04</td><td class="pattern-name">Rumble_Rise</td><td class="pattern-use">HP sweep down, filter opening into drop</td></tr>
                                    <tr><td class="pattern-id">C01</td><td class="pattern-name">Mid_Layer</td><td class="pattern-use">80-200Hz, adds definition to rumble</td></tr>
                                    <tr><td class="pattern-id">C02</td><td class="pattern-name">Mid_Growl</td><td class="pattern-use">More aggressive mid, drive 30%</td></tr>
                                </table>
                                <div class="tip-box">
                                    <strong>ðŸ’¡ Rumble Secret:</strong> Split your bass into SUB (25-60Hz) and MID (80-200Hz) tracks. The sub does the chest-rattling, the mid gives definition on smaller speakers. Sidechain BOTH to kick but with different attack times.
                                </div>
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Vocal & Melodic Patterns</h3>
                            <div class="device-group">
                                <h4 class="tonverk-label">Euphoric Elements</h4>
                                <table class="pattern-table">
                                    <tr><th>Pattern</th><th>Name</th><th>Use / Notes</th></tr>
                                    <tr><td class="pattern-id">V01</td><td class="pattern-name">Vox_Tease</td><td class="pattern-use">Vocal chops filtered, delay throws</td></tr>
                                    <tr><td class="pattern-id">V02</td><td class="pattern-name">Vox_Phrase</td><td class="pattern-use">Main vocal, euphoric, reverb swell</td></tr>
                                    <tr><td class="pattern-id">V03</td><td class="pattern-name">Vox_Break</td><td class="pattern-use">Full vocal, emotional peak, no drums</td></tr>
                                    <tr><td class="pattern-id">V04</td><td class="pattern-name">Vox_Chop</td><td class="pattern-use">Chopped for builds</td></tr>
                                    <tr><td class="pattern-id">P01</td><td class="pattern-name">Pad_Atmos</td><td class="pattern-use">Rave stab reverb tails, mood setter</td></tr>
                                    <tr><td class="pattern-id">P02</td><td class="pattern-name">Pad_Swell</td><td class="pattern-use">Big pad, breakdown emotion, filter sweep</td></tr>
                                    <tr><td class="pattern-id">S01</td><td class="pattern-name">Stab_Rave</td><td class="pattern-use">Classic rave stab, offbeat, delay 25%</td></tr>
                                    <tr><td class="pattern-id">S02</td><td class="pattern-name">Stab_Full</td><td class="pattern-use">Full euphoric chords, maximum rave</td></tr>
                                </table>
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>FX/Riser Patterns</h3>
                            <table class="pattern-table">
                                <tr><th>Pattern</th><th>Name</th><th>Use</th></tr>
                                <tr><td class="pattern-id">X01</td><td class="pattern-name">Rise_White</td><td class="pattern-use">White noise rise, 8 bars, into drops</td></tr>
                                <tr><td class="pattern-id">X02</td><td class="pattern-name">Down_Sub</td><td class="pattern-use">Sub drop/downsweep, into breakdowns</td></tr>
                                <tr><td class="pattern-id">X03</td><td class="pattern-name">Vox_Rev</td><td class="pattern-use">Reverse vocal swell, emotional build</td></tr>
                                <tr><td class="pattern-id">X04</td><td class="pattern-name">Rise_BIG</td><td class="pattern-use">Maximum tension: noise + sub rise + snare</td></tr>
                                <tr><td class="pattern-id">X05</td><td class="pattern-name">Impact</td><td class="pattern-use">Transition hit, downlifter</td></tr>
                            </table>
                        </div>

                        <div class="setup-section full-width">
                            <h3>FX Settings by Section</h3>
                            <table class="fx-table">
                                <tr>
                                    <th>Section</th>
                                    <th>Delay</th>
                                    <th>Reverb</th>
                                    <th>Sub Filter (HP)</th>
                                    <th>Rumble Drive</th>
                                    <th>Vibe</th>
                                </tr>
                                <tr>
                                    <td class="section-name">INTRO (1-16)</td>
                                    <td class="value">1/8 PP | FB: 40%</td>
                                    <td class="value">Large Hall | 3s</td>
                                    <td class="value">200Hz (sub hidden)</td>
                                    <td class="value">5%</td>
                                    <td>Building anticipation</td>
                                </tr>
                                <tr>
                                    <td class="section-name">VOX TEASE (17-32)</td>
                                    <td class="value">1/8 PP | FB: 40%</td>
                                    <td class="value">Large Hall | 3s</td>
                                    <td class="value">100Hz (teasing)</td>
                                    <td class="value">15%</td>
                                    <td>Sub hints, vocal chops</td>
                                </tr>
                                <tr>
                                    <td class="section-name">DROP 1 (33-64)</td>
                                    <td class="value">1/8 | FB: 25%</td>
                                    <td class="value">Room | 1s | Tight</td>
                                    <td class="value">30Hz (OPEN)</td>
                                    <td class="value">25%</td>
                                    <td>Full rumble, tight verb</td>
                                </tr>
                                <tr>
                                    <td class="section-name">BREAK (65-80)</td>
                                    <td class="value">1/4d | FB: 50%</td>
                                    <td class="value">Huge Hall | 5s</td>
                                    <td class="value">80Hz (sustain)</td>
                                    <td class="value">10%</td>
                                    <td>Emotional, washy, vocal focus</td>
                                </tr>
                                <tr>
                                    <td class="section-name">BUILD (81-96)</td>
                                    <td class="value">1/8 | FB: 30%</td>
                                    <td class="value">Hall | 2s</td>
                                    <td class="value">150Hz â†’ 30Hz sweep</td>
                                    <td class="value">30%</td>
                                    <td>Tension! Snare roll, rising</td>
                                </tr>
                                <tr>
                                    <td class="section-name">MAIN DROP (97-128)</td>
                                    <td class="value">1/8 | FB: 35%</td>
                                    <td class="value">Plate | 1.5s</td>
                                    <td class="value">25Hz (MAX OPEN)</td>
                                    <td class="value">40%</td>
                                    <td>FESTIVAL DESTROYER ðŸ”¥</td>
                                </tr>
                                <tr>
                                    <td class="section-name">OUTRO (129-144)</td>
                                    <td class="value">1/8 | FB: 35%</td>
                                    <td class="value">Hall | 2s</td>
                                    <td class="value">60Hz â†’ 150Hz</td>
                                    <td class="value">15%</td>
                                    <td>Winding down</td>
                                </tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Festival System Tip:</strong> The Sub Filter HP automation is KEY. Sweep from 200Hz down to 25Hz into drops - the sub reveal creates massive impact. Keep reverb TIGHT on drops (room/plate) - washy verb kills the rumble punch.
                            </div>
                        </div>

                        <div class="setup-section">
                            <h3>Sidechain Settings</h3>
                            <table class="pattern-table">
                                <tr><th>Track</th><th>Attack</th><th>Release</th><th>Ratio</th></tr>
                                <tr><td class="pattern-name">Rumble Sub</td><td class="pattern-use">1ms</td><td class="pattern-use">150ms</td><td class="pattern-use">4:1 (pumping)</td></tr>
                                <tr><td class="pattern-name">Mid Bass</td><td class="pattern-use">5ms</td><td class="pattern-use">100ms</td><td class="pattern-use">3:1 (tighter)</td></tr>
                                <tr><td class="pattern-name">Pads</td><td class="pattern-use">10ms</td><td class="pattern-use">200ms</td><td class="pattern-use">2:1 (gentle)</td></tr>
                            </table>
                        </div>

                        <div class="setup-section">
                            <h3>Key Frequencies</h3>
                            <table class="pattern-table">
                                <tr><th>Element</th><th>Frequency Range</th><th>Notes</th></tr>
                                <tr><td class="pattern-name">Rumble Sub</td><td class="pattern-use">25-60Hz</td><td class="pattern-use">Pure sub, chest rattling</td></tr>
                                <tr><td class="pattern-name">Mid Bass</td><td class="pattern-use">80-200Hz</td><td class="pattern-use">Definition, small speakers</td></tr>
                                <tr><td class="pattern-name">Kick Fundamental</td><td class="pattern-use">50-80Hz</td><td class="pattern-use">Sits above sub, punches through</td></tr>
                                <tr><td class="pattern-name">Kick Click</td><td class="pattern-use">2-4kHz</td><td class="pattern-use">Transient attack</td></tr>
                            </table>
                        </div>

                        <div class="setup-section">
                            <h3>LFO Timing Reference (One-Shot Ramp for Automation)</h3>
                            <p style="font-size: 11px; color: #9ca3af; margin-bottom: 8px;">Formula: <strong>SPD Ã— MULT = 128 Ã· bars</strong>. Use RAMP waveform + ONE mode. DEP = total change amount (0-127).</p>
                            <table class="pattern-table">
                                <tr><th>Cycle</th><th>Steps</th><th>SPDÃ—MULT</th><th>Example</th><th>Use Case</th></tr>
                                <tr><td class="pattern-id">1 bar</td><td class="pattern-name">16</td><td class="pattern-use">128</td><td class="pattern-use">SPD 16, MULT Ã—8</td><td class="pattern-use">Fast filter sweeps</td></tr>
                                <tr><td class="pattern-id">2 bars</td><td class="pattern-name">32</td><td class="pattern-use">64</td><td class="pattern-use">SPD 8, MULT Ã—8</td><td class="pattern-use">Quick builds</td></tr>
                                <tr><td class="pattern-id">4 bars</td><td class="pattern-name">64</td><td class="pattern-use">32</td><td class="pattern-use">SPD 4, MULT Ã—8</td><td class="pattern-use">Section changes</td></tr>
                                <tr><td class="pattern-id">8 bars</td><td class="pattern-name">128</td><td class="pattern-use">16</td><td class="pattern-use">SPD 2, MULT Ã—8</td><td class="pattern-use">Slow evolves</td></tr>
                                <tr><td class="pattern-id">16 bars</td><td class="pattern-name">256</td><td class="pattern-use">8</td><td class="pattern-use">SPD 1, MULT Ã—8</td><td class="pattern-use">Full pattern</td></tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Quick Ref:</strong> SPD 32 Ã— MULT 4 = 1 bar. Halve the product to double the time. RAMP waveform = one-shot rise, DEP controls how many units (0-127) it changes.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BOOTY TECH HOUSE -->
        <div class="daw-container" id="bootytech">
            <div class="daw-wrapper">
                <div class="track-labels">
                    <div class="song-row-spacer"><span>SONG + PATTERN</span></div>
                    <div class="ruler-spacer">Bars â†’</div>
                    
                    <div class="track-label device-header">SYNTAKT</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--kick-color)"></div>
                        <span class="track-name">Kick</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--clap-color)"></div>
                        <span class="track-name">Clap</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--hats-color)"></div>
                        <span class="track-name">Hats</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--perc-color)"></div>
                        <span class="track-name">808 Toms</span>
                    </div>
                    
                    <div class="track-label device-header">TONVERK</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--bass-color)"></div>
                        <span class="track-name">Bass</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--chord-color)"></div>
                        <span class="track-name">Stabs</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--vocal-color)"></div>
                        <span class="track-name">Vox Chops</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--fx-color)"></div>
                        <span class="track-name">FX/Trans</span>
                    </div>
                    
                    <div class="track-label device-header">BUS TRACKS</div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 1 (Drums)</span>
                        <span class="track-machine">Dirtshaper: DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Degrader: BR</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 2 (Bass)</span>
                        <span class="track-machine">Freq Warper: FREQ</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Dirtshaper: DRV</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 3 (Toms/Stabs)</span>
                        <span class="track-machine">Sat Delay: FDBK</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Sat Delay: TIME</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: var(--texture-color)"></div>
                        <span class="track-name">Bus 4 (Vox)</span>
                        <span class="track-machine">Pan Chorus: DEP</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ Sat Delay: FDBK</span>
                    </div>
                    
                    <div class="track-label device-header">SENDS & MIX</div>
                    <div class="track-label">
                        <div class="track-color" style="background: #5ba0f0"></div>
                        <span class="track-name">Send 1: Daisy Delay</span>
                        <span class="track-machine">FDBK</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ TIME</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #a78bfa"></div>
                        <span class="track-name">Send 2: Rumsklang</span>
                        <span class="track-machine">SIZE</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name">â†³ DAMP</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #f59e0b"></div>
                        <span class="track-name">Send 3: Master Comp + Filter</span>
                        <span class="track-machine">FREQ</span>
                    </div>
                    <div class="track-label">
                        <div class="track-color" style="background: #ef4444"></div>
                        <span class="track-name">Mix: Degrader</span>
                        <span class="track-machine">DRV</span>
                    </div>
                    <div class="track-label auto-sublane-label">
                        <span class="track-name" style="color: #ec4899">â†³ DROP</span>
                    </div>
                </div>

                <div class="arrangement-area">
                    <!-- Song Row Lane -->
                    <div class="song-row-lane" id="bootytech-songrow"></div>
                    <div class="ruler" id="bootytech-ruler"></div>
                    <div class="track-lanes" id="bootytech-lanes"></div>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item"><div class="legend-color" style="background: var(--kick-color)"></div>Kick</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--clap-color)"></div>Clap</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--hats-color)"></div>Hats</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--perc-color)"></div>808 Toms</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--bass-color)"></div>Bass</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--chord-color)"></div>Stabs</div>
                <div class="legend-item"><div class="legend-color" style="background: var(--vocal-color)"></div>Vox Chops</div>
            </div>

            <div class="track-notes">
                <div class="track-notes-title">Design Notes</div>
                <p><strong>Sound Design:</strong> 808 everythingâ€”kick with long pitch decay (300-500ms), tuned toms (C-F range), snappy clap with short verb. Bass needs that "wobbly" characterâ€”use Freq Warper FREQ with slow LFO (0.5-2Hz) for classic ghetto house movement. Stabs: saw waves with fast filter env, high resonance for that acidic bite.</p>
                <p><strong>Mix Approach:</strong> Sidechain the bass HARD to kick (8-10dB, 50ms release)â€”the pump IS the groove. 808 toms sit under the bass, not competing. Keep kick and clap dry, verb only on stabs/vox. Dirtshaper DRV on drum bus adds that crunchy lo-fi 808 characterâ€”push it to 35-50%.</p>
                <p><strong>Key Moves:</strong> 2-bar silences before section changes create tension without risers. Sat Delay on toms/stabs creates the classic house echo throwsâ€”keep TIME synced to 1/8 or 1/16. Vocal chops work best when filtered and rhythmicâ€”treat them like another percussion element. The DROP controller hits hard on those silence gapsâ€”100% wet kills everything for maximum impact.</p>
            </div>

            <div class="setup-guide">
                <button class="setup-toggle" onclick="this.classList.toggle('open'); this.nextElementSibling.classList.toggle('open')">
                    ðŸ“‹ Setup Guide: Pattern Names & FX Settings
                </button>
                <div class="setup-content">
                    <div class="setup-inner">
                        <div class="setup-section">
                            <h3>808 Sound Design Tips</h3>
                            <table class="pattern-table">
                                <tr><th>Element</th><th>Key Settings</th><th>Character</th></tr>
                                <tr><td class="pattern-id">Kick</td><td class="pattern-name">Pitch decay 300-500ms, fundamental at 50-60Hz</td><td class="pattern-use">That classic 808 "boom"</td></tr>
                                <tr><td class="pattern-id">Clap</td><td class="pattern-name">Short decay (100ms), HP at 400Hz, tight plate verb</td><td class="pattern-use">Snappy, cuts through</td></tr>
                                <tr><td class="pattern-id">Hats</td><td class="pattern-name">808 hats with shuffle (54-58%), velocity variation</td><td class="pattern-use">Groove, not grid</td></tr>
                                <tr><td class="pattern-id">Toms</td><td class="pattern-name">Tuned to key (C-F), pitch decay 200ms</td><td class="pattern-use">Melodic percussion</td></tr>
                                <tr><td class="pattern-id">Bass</td><td class="pattern-name">Square/saw, LP filter with res, Freq Warper modulation</td><td class="pattern-use">Wobbly, bouncy weight</td></tr>
                            </table>
                        </div>

                        <div class="setup-section">
                            <h3>LFO Timing Reference (One-Shot Ramp for Automation)</h3>
                            <p style="font-size: 11px; color: #9ca3af; margin-bottom: 8px;">Formula: <strong>SPD Ã— MULT = 128 Ã· bars</strong>. Use RAMP waveform + ONE mode. DEP = total change amount (0-127).</p>
                            <table class="pattern-table">
                                <tr><th>Cycle</th><th>Steps</th><th>SPDÃ—MULT</th><th>Example</th><th>Use Case</th></tr>
                                <tr><td class="pattern-id">1 bar</td><td class="pattern-name">16</td><td class="pattern-use">128</td><td class="pattern-use">SPD 16, MULT Ã—8</td><td class="pattern-use">Fast filter sweeps</td></tr>
                                <tr><td class="pattern-id">2 bars</td><td class="pattern-name">32</td><td class="pattern-use">64</td><td class="pattern-use">SPD 8, MULT Ã—8</td><td class="pattern-use">Quick builds</td></tr>
                                <tr><td class="pattern-id">4 bars</td><td class="pattern-name">64</td><td class="pattern-use">32</td><td class="pattern-use">SPD 4, MULT Ã—8</td><td class="pattern-use">Section changes</td></tr>
                                <tr><td class="pattern-id">8 bars</td><td class="pattern-name">128</td><td class="pattern-use">16</td><td class="pattern-use">SPD 2, MULT Ã—8</td><td class="pattern-use">Slow evolves</td></tr>
                                <tr><td class="pattern-id">16 bars</td><td class="pattern-name">256</td><td class="pattern-use">8</td><td class="pattern-use">SPD 1, MULT Ã—8</td><td class="pattern-use">Full pattern</td></tr>
                            </table>
                            <div class="tip-box">
                                <strong>ðŸ’¡ Quick Ref:</strong> SPD 32 Ã— MULT 4 = 1 bar. Halve the product to double the time. RAMP waveform = one-shot rise, DEP controls how many units (0-127) it changes.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PERFORMANCE VIEW -->
        <div class="performance-container" id="performance-view">
            
            <!-- Song Mode Timeline -->
            <div class="perf-section">
                <div class="perf-section-title">Song Mode Arrangement</div>
                <div class="song-timeline" id="song-timeline">
                    <!-- Generated by JS -->
                </div>
            </div>

            <!-- Pattern Mute Grid -->
            <div class="perf-section">
                <div class="perf-section-title">Pattern Mute States by Section</div>
                <div class="mute-grid-container">
                    <div class="mute-grid" id="mute-grid">
                        <!-- Generated by JS -->
                    </div>
                </div>
            </div>

            <!-- Performance Cues -->
            <div class="perf-section">
                <div class="perf-section-title">Performance Cues</div>
                <div class="perf-cues" id="perf-cues">
                    <!-- Generated by JS -->
                </div>
            </div>

            <!-- Pattern Bank Organization -->
            <div class="perf-section">
                <div class="perf-section-title">Pattern Bank Organization</div>
                <div class="pattern-map" id="pattern-map">
                    <!-- Generated by JS -->
                </div>
            </div>

            <!-- Device Split -->
            <div class="perf-section">
                <div class="perf-section-title">Device Split</div>
                <div class="device-split" id="device-split">
                    <!-- Generated by JS -->
                </div>
            </div>

            <!-- Key Commands -->
            <div class="perf-section">
                <div class="perf-section-title">Elektron Key Commands (Pattern Mute Workflow)</div>
                <div class="key-commands">
                    <div class="key-cmd">
                        <kbd>FUNC + 2Ã—BANK</kbd>
                        <span class="key-cmd-desc">Enter Pattern Mute mode (magenta LEDs)</span>
                    </div>
                    <div class="key-cmd">
                        <kbd>TRIG 1-12</kbd>
                        <span class="key-cmd-desc">Toggle track mute (in Mute mode)</span>
                    </div>
                    <div class="key-cmd">
                        <kbd>SONG + YES</kbd>
                        <span class="key-cmd-desc">Enter/Exit Song mode</span>
                    </div>
                    <div class="key-cmd">
                        <kbd>SONG + RIGHT</kbd>
                        <span class="key-cmd-desc">Open Song Edit screen</span>
                    </div>
                    <div class="key-cmd">
                        <kbd>SONG + LEFT</kbd>
                        <span class="key-cmd-desc">Loop current row</span>
                    </div>
                    <div class="key-cmd">
                        <kbd>FUNC + DOWN</kbd>
                        <span class="key-cmd-desc">Insert new row (in Song Edit)</span>
                    </div>
                    <div class="key-cmd">
                        <kbd>PAGE (hold)</kbd>
                        <span class="key-cmd-desc">Activate Fill mode</span>
                    </div>
                    <div class="key-cmd">
                        <kbd>PTN + TRIG</kbd>
                        <span class="key-cmd-desc">Exit Song mode â†’ Pattern mode</span>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <div class="tooltip" id="tooltip">
        <div class="tooltip-title"></div>
        <div class="tooltip-detail"></div>
    </div>

    <div class="auto-tooltip" id="auto-tooltip">
        <div><span class="auto-param">Filter LP</span></div>
        <div>Bar <span class="auto-bar">64</span> â†’ <span class="auto-value">75%</span></div>
    </div>

    <script>
        // Zoom settings
        let cellWidth = 50; // Default 50px per bar
        const MIN_CELL_WIDTH = 5;
        const MAX_CELL_WIDTH = 80;
        const DEFAULT_CELL_WIDTH = 50;
        let currentTrack = 'romanian';
        let showSongRows = true; // Toggle for song row display

        // Track definitions and clip data
        const tracks = {
            romanian: {
                totalBars: 224,
                bpm: 124,
                sections: [
                    { bar: 1, name: 'INTRO', class: 'section-intro' },
                    { bar: 33, name: 'BUILD', class: 'section-build' },
                    { bar: 65, name: 'MAIN', class: 'section-main' },
                    { bar: 129, name: 'BREAK', class: 'section-breakdown' },
                    { bar: 161, name: 'PEAK', class: 'section-peak' },
                    { bar: 193, name: 'OUTRO', class: 'section-outro' }
                ],
                // Song Mode: 1 row = 16 bars, Bank A for this track
                songRows: [
                    { row: 1, pattern: 'A01', label: 'Intro', section: 'intro' },
                    { row: 2, pattern: 'A02', label: 'Intro', section: 'intro' },
                    { row: 3, pattern: 'A03', label: 'Build', section: 'build' },
                    { row: 4, pattern: 'A04', label: 'Build', section: 'build' },
                    { row: 5, pattern: 'A05', label: 'Main', section: 'main' },
                    { row: 6, pattern: 'A06', label: 'Main', section: 'main' },
                    { row: 7, pattern: 'A07', label: 'Main', section: 'main' },
                    { row: 8, pattern: 'A08', label: 'Main', section: 'main' },
                    { row: 9, pattern: 'A09', label: 'Break', section: 'breakdown' },
                    { row: 10, pattern: 'A10', label: 'Break', section: 'breakdown' },
                    { row: 11, pattern: 'A11', label: 'Peak', section: 'peak' },
                    { row: 12, pattern: 'A12', label: 'Peak', section: 'peak' },
                    { row: 13, pattern: 'A13', label: 'Outro', section: 'outro' },
                    { row: 14, pattern: 'A14', label: 'Outro', section: 'outro' }
                ],
                lanes: [
                    { type: 'header', device: 'syntakt' },
                    { 
                        name: 'Kick',
                        clips: [
                            // INTRO: Filtered kick, GAP before BUILD for bass entry
                            { start: 1, end: 29, label: 'Kick Intro', pattern: 'A01', class: 'clip-kick', intensity: 'low', tooltip: 'HP 120Hz | Knocky | Filter reveals over 29 bars' },
                            // silence bars 30-32 (3 beats) - breathing room for bass/chord entry
                            // BUILD: Returns, GAP before MAIN drop
                            { start: 33, end: 61, label: 'Kick Build', pattern: 'A02', class: 'clip-kick', intensity: 'med', tooltip: 'HP sweep 120â†’60Hz | Punch emerging' },
                            // silence bars 62-64 (3 bars) - tension before MAIN drop
                            // MAIN: Full kick, HP filter last 4 bars into break
                            { start: 65, end: 124, label: 'Kick Main', pattern: 'A03', class: 'clip-kick', intensity: 'high', tooltip: 'Full punch | HP filter bars 121-124 into break' },
                            // silence bars 125-128 (4 bars) - breakdown breathing room
                            // BREAK: Sparse kick returns mid-breakdown
                            { start: 137, end: 157, label: 'Kick Sparse', pattern: 'A01', class: 'clip-kick', intensity: 'low', tooltip: 'Half-time feel | Filtered | Space for melodics' },
                            // silence bars 158-160 (3 bars) - tension before PEAK drop
                            // PEAK: Full kick, filter last 4 bars
                            { start: 161, end: 189, label: 'Kick Peak', pattern: 'A03', class: 'clip-kick', intensity: 'high', tooltip: 'Maximum punch | HP filter bars 186-189' },
                            // silence bars 190-192 (3 bars) - breathing room into outro
                            // OUTRO: Filtered outro
                            { start: 193, end: 224, label: 'Kick Out', pattern: 'A01', class: 'clip-kick', intensity: 'med', tooltip: 'HP rising 60â†’150Hz | Fading to knocky' }
                        ]
                    },
                    { 
                        name: 'Closed HH',
                        clips: [
                            // Starts in INTRO - filtered, revealed by automation
                            { start: 9, end: 32, label: 'HH Tease', pattern: 'A01', class: 'clip-hats', intensity: 'low', tooltip: 'FILTER REVEAL | Starts LP 20% bar 9 | Opens to 50% by bar 32' },
                            { start: 33, end: 64, label: 'HH Build', pattern: 'A02', class: 'clip-hats', intensity: 'med', tooltip: 'Filter 50%â†’80% | Velocity rising | Building energy' },
                            // bleeds across section boundary
                            { start: 65, end: 128, label: 'HH Groove', pattern: 'A01', class: 'clip-hats', intensity: 'med', tooltip: 'Full pattern | Metallic timbre segues to Open HH' },
                            // continues through break - filtered down
                            { start: 129, end: 160, label: 'HH Filter', pattern: 'A01', class: 'clip-hats', intensity: 'low', tooltip: 'LP filtered down | Texture under breakdown' },
                            { start: 161, end: 192, label: 'HH Peak', pattern: 'A03', class: 'clip-hats', intensity: 'high', tooltip: 'Filter snaps open | Maximum energy' },
                            { start: 193, end: 220, label: 'HH Strip', pattern: 'A01', class: 'clip-hats', intensity: 'low', tooltip: 'Filter closing | Stripping back' }
                        ],
                        automation: {
                            name: 'HH Filter',
                            color: '#fbbf24',
                            points: [
                                { bar: 9, value: 20 },
                                { bar: 17, value: 30 },
                                { bar: 25, value: 40 },
                                { bar: 32, value: 50 },
                                { bar: 48, value: 65 },
                                { bar: 64, value: 80 },
                                { bar: 65, value: 85 },
                                { bar: 128, value: 90 },
                                { bar: 129, value: 35 },
                                { bar: 160, value: 45 },
                                { bar: 161, value: 100 },
                                { bar: 192, value: 95 },
                                { bar: 193, value: 60 },
                                { bar: 220, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'Open HH',
                        clips: [
                            // TIMBRE SEGUE: Metallic closed HH leads into metallic open HH
                            { start: 57, end: 64, label: 'OH Hint', pattern: 'A03', class: 'clip-hats', intensity: 'low', tooltip: 'REVERB REVEAL | 100% wet | Hinting before MAIN' },
                            { start: 65, end: 128, label: 'OH Groove', pattern: 'A01', class: 'clip-hats', intensity: 'med', tooltip: 'Reverb 100%â†’20% dry out | Offbeat accents' },
                            // skips most of break
                            { start: 153, end: 160, label: 'OH Build', pattern: 'A03', class: 'clip-hats', intensity: 'med', tooltip: 'REVERSE VERB SWELL | Reversed tail into PEAK' },
                            { start: 161, end: 192, label: 'OH Riding', pattern: 'A03', class: 'clip-hats', intensity: 'high', tooltip: 'Full open hats | Driving the groove' }
                        ],
                        automation: {
                            name: 'Open HH Filter',
                            color: '#fcd34d',
                            points: [
                                { bar: 57, value: 30 },
                                { bar: 64, value: 50 },
                                { bar: 65, value: 65 },
                                { bar: 96, value: 75 },
                                { bar: 128, value: 70 },
                                { bar: 153, value: 40 },
                                { bar: 160, value: 55 },
                                { bar: 161, value: 85 },
                                { bar: 192, value: 80 }
                            ]
                        }
                    },
                    { 
                        name: 'Clap',
                        clips: [
                            // DELAY FB SWELL technique into MAIN
                            { start: 49, end: 64, label: 'Clap Tease', pattern: 'A03', class: 'clip-clap', intensity: 'low', tooltip: 'DELAY FB SWELL | FB 20%â†’70% bars 57-64 | Cuts at drop' },
                            { start: 65, end: 128, label: 'Clap 2&4', pattern: 'A01', class: 'clip-clap', intensity: 'med', tooltip: 'Delay FB cuts to 30% at bar 65 | Clean impact' },
                            // element swap - clap drops, perc enters
                            // silence bars 129-144
                            { start: 145, end: 160, label: 'Clap Roll', pattern: 'A02', class: 'clip-clap', intensity: 'med', tooltip: 'Building roll | 16th notes | Tension to PEAK' },
                            { start: 161, end: 192, label: 'Clap Heavy', pattern: 'A03', class: 'clip-clap', intensity: 'high', tooltip: 'Layered hits | Maximum impact' },
                            { start: 193, end: 216, label: 'Clap Out', pattern: 'A03', class: 'clip-clap', intensity: 'med', tooltip: 'Standard clap | Outro groove' }
                        ],
                        automation: {
                            name: 'Clap Delay',
                            color: '#06b6d4',
                            points: [
                                { bar: 49, value: 20 },
                                { bar: 57, value: 35 },
                                { bar: 64, value: 70 },
                                { bar: 65, value: 30 },
                                { bar: 128, value: 35 },
                                { bar: 145, value: 25 },
                                { bar: 160, value: 40 },
                                { bar: 161, value: 30 },
                                { bar: 192, value: 35 },
                                { bar: 216, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'FM Perc',
                        clips: [
                            // ELEMENT SWAP: Enters as clap exits in breakdown
                            { start: 25, end: 32, label: 'Perc Hint', pattern: 'A02', class: 'clip-perc', intensity: 'low', tooltip: 'GRANULAR HINT | Grabbing tail of sample | Filtered 15%' },
                            { start: 33, end: 64, label: 'Perc Tease', pattern: 'A02', class: 'clip-perc', intensity: 'low', tooltip: 'Filter sweep 15%â†’40% | Micro clicks emerging' },
                            { start: 65, end: 128, label: 'Perc Clicks', pattern: 'A01', class: 'clip-perc', intensity: 'med', tooltip: 'Full FM percussion | Random velocity' },
                            // spotlight in breakdown when clap drops
                            { start: 129, end: 144, label: 'Perc Solo', pattern: 'A01', class: 'clip-perc', intensity: 'med', tooltip: 'ELEMENT SWAP | Clap out, Perc spotlight | High ratio metallic' },
                            { start: 161, end: 192, label: 'Perc Full', pattern: 'A03', class: 'clip-perc', intensity: 'high', tooltip: 'All hits active | Maximum density' },
                            { start: 193, end: 212, label: 'Perc Strip', pattern: 'A02', class: 'clip-perc', intensity: 'low', tooltip: 'Stripping back | Outro texture' }
                        ],
                        automation: {
                            name: 'FM Perc Filter',
                            color: '#f97316',
                            points: [
                                { bar: 25, value: 15 },
                                { bar: 32, value: 25 },
                                { bar: 33, value: 30 },
                                { bar: 64, value: 40 },
                                { bar: 65, value: 65 },
                                { bar: 128, value: 70 },
                                { bar: 129, value: 75 },
                                { bar: 144, value: 80 },
                                { bar: 161, value: 85 },
                                { bar: 192, value: 80 },
                                { bar: 212, value: 40 }
                            ]
                        }
                    },
                    { 
                        name: 'Bass',
                        clips: [
                            // Enters during kick silence - revealed by filter
                            { start: 25, end: 64, label: 'Bass Intro', pattern: 'A01', class: 'clip-bass', intensity: 'low', tooltip: 'FILTER REVEAL | LP 10% bar 25 | Opens during kick gap 30-32 | Sub hints' },
                            // bleeds across into MAIN
                            { start: 65, end: 128, label: 'Bass Full', pattern: 'A01', class: 'clip-bass', intensity: 'high', tooltip: 'Filter 80% | Full harmonics | Locked to kick' },
                            // continuous through break - filtered down
                            { start: 129, end: 160, label: 'Bass Sub', pattern: 'A01', class: 'clip-bass', intensity: 'low', tooltip: 'Filter closes to 20% | Sub only | Breakdown bed' },
                            { start: 161, end: 192, label: 'Bass Peak', pattern: 'A03', class: 'clip-bass', intensity: 'high', tooltip: 'Filter snaps to 100% | Maximum presence' },
                            { start: 193, end: 224, label: 'Bass Out', pattern: 'A02', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 80%â†’20% | Fading out' }
                        ],
                        automation: {
                            name: 'Bass Filter',
                            color: '#a855f7',
                            points: [
                                { bar: 25, value: 10 },
                                { bar: 29, value: 15 },
                                // Opens during kick gap
                                { bar: 30, value: 25 },
                                { bar: 32, value: 35 },
                                { bar: 33, value: 40 },
                                { bar: 48, value: 55 },
                                { bar: 64, value: 70 },
                                { bar: 65, value: 80 },
                                { bar: 128, value: 85 },
                                // Closes for breakdown
                                { bar: 129, value: 25 },
                                { bar: 144, value: 20 },
                                { bar: 160, value: 30 },
                                // Snaps open for peak
                                { bar: 161, value: 100 },
                                { bar: 192, value: 95 },
                                { bar: 193, value: 80 },
                                { bar: 224, value: 20 }
                            ]
                        }
                    },
                    { 
                        name: 'Chords',
                        clips: [
                            // GRANULAR HINT - grabbing quiet part of stab sample
                            { start: 25, end: 40, label: 'Stab Hint', pattern: 'A03', class: 'clip-chord', intensity: 'low', tooltip: 'GRANULAR HINT | Grain position on tail | LP 10% | Just harmonics' },
                            { start: 41, end: 64, label: 'Stab Open', pattern: 'A03', class: 'clip-chord', intensity: 'low', tooltip: 'Filter sweep 10%â†’50% | Grain position moving to attack' },
                            { start: 65, end: 128, label: 'Stab Main', pattern: 'A01', class: 'clip-chord', intensity: 'med', tooltip: 'Filter 70% | Metallic timbre | Similar to hats = smooth segue' },
                            // held chords in breakdown
                            { start: 129, end: 160, label: 'Stab Atmos', pattern: 'A01', class: 'clip-chord', intensity: 'med', tooltip: 'Held chords | 80% wet | Replace rhythm with atmosphere' },
                            { start: 161, end: 192, label: 'Stab Full', pattern: 'A03', class: 'clip-chord', intensity: 'high', tooltip: 'Filter 100% | Dry snap | Peak clarity' },
                            { start: 193, end: 212, label: 'Stab Fade', pattern: 'A03', class: 'clip-chord', intensity: 'low', tooltip: 'Filter closing | Reverb rising | Outro' }
                        ],
                        automation: {
                            name: 'Chord Filter',
                            color: '#14b8a6',
                            points: [
                                { bar: 25, value: 10 },
                                { bar: 32, value: 18 },
                                { bar: 40, value: 25 },
                                { bar: 48, value: 38 },
                                { bar: 64, value: 50 },
                                { bar: 65, value: 70 },
                                { bar: 128, value: 75 },
                                // Held chords - filter stays mid
                                { bar: 129, value: 55 },
                                { bar: 160, value: 60 },
                                // Snaps open
                                { bar: 161, value: 100 },
                                { bar: 192, value: 90 },
                                { bar: 193, value: 50 },
                                { bar: 212, value: 20 }
                            ]
                        }
                    },
                    { 
                        name: 'Perc Loops',
                        clips: [
                            // Starts early, filtered - revealed by automation
                            { start: 9, end: 32, label: 'Loop Hint', pattern: 'A01', class: 'clip-perc', intensity: 'low', tooltip: 'FILTER REVEAL | LP 15% | Subtracks 1-2 | Minimal shuffle hinting' },
                            { start: 33, end: 64, label: 'Loop Build', pattern: 'A02', class: 'clip-perc', intensity: 'med', tooltip: 'Filter 15%â†’60% | Subtracks 1-4 | Building' },
                            { start: 65, end: 128, label: 'Loop Full', pattern: 'A01', class: 'clip-perc', intensity: 'high', tooltip: 'All 8 subtracks | Filter 80% | Maximum groove' },
                            { start: 129, end: 160, label: 'Loop Sparse', pattern: 'A01', class: 'clip-perc', intensity: 'low', tooltip: 'Filter down to 30% | Subtracks 1-2 | Breakdown texture' },
                            { start: 161, end: 192, label: 'Loop Peak', pattern: 'A03', class: 'clip-perc', intensity: 'high', tooltip: 'Filter snaps to 100% | All active | Peak density' },
                            { start: 193, end: 220, label: 'Loop Out', pattern: 'A01', class: 'clip-perc', intensity: 'low', tooltip: 'Filter closing | Stripping subtracks' }
                        ],
                        automation: {
                            name: 'Loop Filter',
                            color: '#f97316',
                            points: [
                                { bar: 9, value: 15 },
                                { bar: 17, value: 22 },
                                { bar: 25, value: 30 },
                                { bar: 32, value: 40 },
                                { bar: 48, value: 55 },
                                { bar: 64, value: 65 },
                                { bar: 65, value: 80 },
                                { bar: 128, value: 85 },
                                // Breakdown - filtered down
                                { bar: 129, value: 30 },
                                { bar: 160, value: 40 },
                                // Snaps open
                                { bar: 161, value: 100 },
                                { bar: 192, value: 90 },
                                { bar: 193, value: 55 },
                                { bar: 220, value: 20 }
                            ]
                        }
                    },
                    { 
                        name: 'Pads',
                        clips: [
                            // Pads run almost continuously - filter does all the work
                            { start: 1, end: 64, label: 'Pad Atmos', pattern: 'A01', class: 'clip-texture', intensity: 'med', tooltip: 'Grainer | Starts full | Filter closes during build to make room' },
                            { start: 65, end: 128, label: 'Pad Bed', pattern: 'A01', class: 'clip-texture', intensity: 'low', tooltip: 'Filter 30% | Subtle bed under groove | Sidechained' },
                            // swells up in breakdown
                            { start: 129, end: 160, label: 'Pad Swell', pattern: 'A01', class: 'clip-texture', intensity: 'high', tooltip: 'Filter opens 30%â†’90% | Breakdown focus | Emotional' },
                            { start: 161, end: 192, label: 'Pad Shimmer', pattern: 'A03', class: 'clip-texture', intensity: 'med', tooltip: 'Filter pulls back to 50% | Under groove again' },
                            { start: 193, end: 224, label: 'Pad Fade', pattern: 'A01', class: 'clip-texture', intensity: 'med', tooltip: 'Filter opens for outro wash | Reverb tail' }
                        ],
                        automation: {
                            name: 'Pad Filter',
                            color: '#8b5cf6',
                            points: [
                                { bar: 1, value: 70 },
                                { bar: 32, value: 50 },
                                { bar: 64, value: 40 },
                                { bar: 65, value: 30 },
                                { bar: 128, value: 35 },
                                { bar: 129, value: 45 },
                                { bar: 145, value: 75 },
                                { bar: 160, value: 90 },
                                { bar: 161, value: 50 },
                                { bar: 192, value: 55 },
                                { bar: 193, value: 65 },
                                { bar: 224, value: 80 }
                            ]
                        }
                    },
                    { 
                        name: 'Vocals',
                        clips: [
                            // REVERSE REVERB technique - reversed tail BEFORE vocal enters
                            { start: 57, end: 64, label: 'Vox RevVerb', pattern: 'A01', class: 'clip-vocal', intensity: 'low', tooltip: 'REVERSE REVERB | Reversed verb tail | Swells INTO bar 65' },
                            { start: 65, end: 80, label: 'Vox Hint', pattern: 'A01', class: 'clip-vocal', intensity: 'low', tooltip: 'Enters on reverb tail | 80% wet | Filter 30%' },
                            { start: 81, end: 128, label: 'Vox Chops', pattern: 'A02', class: 'clip-vocal', intensity: 'med', tooltip: 'REVERB DRY-OUT | 80%â†’20% wet | Filter opens | Full presence' },
                            { start: 129, end: 160, label: 'Vox Ambient', pattern: 'A01', class: 'clip-vocal', intensity: 'med', tooltip: 'Back to 80% wet | Stretched | Breakdown atmosphere' },
                            // reverse reverb again before PEAK
                            { start: 153, end: 160, label: 'Vox RevVerb2', pattern: 'A01', class: 'clip-vocal', intensity: 'low', tooltip: 'REVERSE REVERB | Another reversed tail | Into PEAK' },
                            { start: 161, end: 192, label: 'Vox Hook', pattern: 'A03', class: 'clip-vocal', intensity: 'high', tooltip: 'Snap dry | Filter 100% | Peak hook' }
                        ],
                        automation: {
                            name: 'Vox Filter',
                            color: '#d55a9a',
                            points: [
                                { bar: 57, value: 20 },
                                { bar: 64, value: 35 },
                                { bar: 65, value: 30 },
                                { bar: 80, value: 45 },
                                { bar: 81, value: 55 },
                                { bar: 100, value: 70 },
                                { bar: 128, value: 75 },
                                { bar: 129, value: 50 },
                                { bar: 160, value: 55 },
                                { bar: 161, value: 100 },
                                { bar: 192, value: 85 }
                            ]
                        }
                    },
                    { 
                        name: 'FX/Trans',
                        clips: [
                            // No risers! Just markers for silence/transitions
                            { start: 30, end: 32, label: '3 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'low', tooltip: 'Kick gap | Bass/Chord filter opening | Breathing room' },
                            { start: 62, end: 64, label: '3 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'med', tooltip: 'Kick gap | Tension before MAIN drop | All filters peak' },
                            { start: 125, end: 128, label: '4 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'med', tooltip: 'Kick out | Global filter sweep down | Into breakdown' },
                            { start: 158, end: 160, label: '3 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'high', tooltip: 'Kick gap | Maximum tension | Before PEAK drop' },
                            { start: 190, end: 192, label: '3 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'med', tooltip: 'Kick gap | Transition to outro | Reverb tails' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Bus 1: DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 40 },
                            { bar: 32, value: 50 },
                            { bar: 64, value: 75 },
                            { bar: 128, value: 80 },
                            { bar: 129, value: 35 },
                            { bar: 160, value: 60 },
                            { bar: 161, value: 100 },
                            { bar: 192, value: 95 },
                            { bar: 224, value: 50 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Bus 1: FREQ',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 15 },
                            { bar: 32, value: 20 },
                            { bar: 64, value: 30 },
                            { bar: 128, value: 35 },
                            { bar: 129, value: 15 },
                            { bar: 160, value: 25 },
                            { bar: 161, value: 45 },
                            { bar: 224, value: 20 }
                        ],
                        color: '#f87171'
                    },
                    { 
                        name: 'Bus 2: DEC',
                        automation: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 64, value: 40 },
                            { bar: 128, value: 50 },
                            { bar: 129, value: 70 },
                            { bar: 160, value: 60 },
                            { bar: 161, value: 45 },
                            { bar: 224, value: 35 }
                        ],
                        color: '#f97316'
                    },
                    { 
                        name: 'Bus 2: TIME',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 20 },
                            { bar: 64, value: 30 },
                            { bar: 128, value: 40 },
                            { bar: 129, value: 60 },
                            { bar: 160, value: 50 },
                            { bar: 161, value: 35 },
                            { bar: 224, value: 25 }
                        ],
                        color: '#fb923c'
                    },
                    { 
                        name: 'Bus 3: SPD',
                        automation: true,
                        points: [
                            { bar: 33, value: 30 },
                            { bar: 64, value: 45 },
                            { bar: 96, value: 55 },
                            { bar: 128, value: 50 },
                            { bar: 144, value: 70 },
                            { bar: 160, value: 60 },
                            { bar: 176, value: 80 },
                            { bar: 192, value: 75 },
                            { bar: 224, value: 40 }
                        ],
                        color: '#eab308'
                    },
                    { 
                        name: 'Bus 3: BR',
                        autoLane: true,
                        points: [
                            { bar: 33, value: 0 },
                            { bar: 48, value: 0 },
                            { bar: 49, value: 45 },
                            { bar: 52, value: 0 },
                            { bar: 64, value: 0 },
                            { bar: 80, value: 0 },
                            { bar: 81, value: 60 },
                            { bar: 84, value: 0 },
                            { bar: 96, value: 0 },
                            { bar: 112, value: 0 },
                            { bar: 113, value: 55 },
                            { bar: 116, value: 0 },
                            { bar: 128, value: 0 },
                            { bar: 144, value: 0 },
                            { bar: 145, value: 70 },
                            { bar: 148, value: 0 },
                            { bar: 160, value: 0 },
                            { bar: 176, value: 0 },
                            { bar: 177, value: 80 },
                            { bar: 180, value: 0 },
                            { bar: 192, value: 0 },
                            { bar: 208, value: 0 },
                            { bar: 209, value: 50 },
                            { bar: 212, value: 0 },
                            { bar: 224, value: 0 }
                        ],
                        color: '#facc15'
                    },
                    { 
                        name: 'Bus 4: DEP',
                        automation: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 64, value: 35 },
                            { bar: 96, value: 45 },
                            { bar: 128, value: 40 },
                            { bar: 129, value: 55 },
                            { bar: 160, value: 50 },
                            { bar: 192, value: 45 },
                            { bar: 224, value: 35 }
                        ],
                        color: '#a855f7'
                    },
                    { 
                        name: 'Bus 4: DEC',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 64, value: 30 },
                            { bar: 128, value: 35 },
                            { bar: 129, value: 60 },
                            { bar: 160, value: 55 },
                            { bar: 192, value: 40 },
                            { bar: 224, value: 30 }
                        ],
                        color: '#c084fc'
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Send 1: FDBK',
                        automation: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 30 },
                            { bar: 57, value: 40 },
                            { bar: 64, value: 75 },
                            { bar: 65, value: 40 },
                            { bar: 128, value: 45 },
                            { bar: 160, value: 85 },
                            { bar: 161, value: 35 },
                            { bar: 224, value: 15 }
                        ],
                        color: '#06b6d4'
                    },
                    { 
                        name: 'Send 1: TIME',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 25 },
                            { bar: 33, value: 35 },
                            { bar: 64, value: 35 },
                            { bar: 65, value: 50 },
                            { bar: 128, value: 50 },
                            { bar: 129, value: 65 },
                            { bar: 160, value: 65 },
                            { bar: 161, value: 50 },
                            { bar: 224, value: 25 }
                        ],
                        color: '#38bdf8'
                    },
                    { 
                        name: 'Send 2: SIZE',
                        automation: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 32, value: 35 },
                            { bar: 64, value: 50 },
                            { bar: 128, value: 60 },
                            { bar: 129, value: 80 },
                            { bar: 160, value: 75 },
                            { bar: 161, value: 45 },
                            { bar: 224, value: 55 }
                        ],
                        color: '#a78bfa'
                    },
                    { 
                        name: 'Send 2: DAMP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 40 },
                            { bar: 64, value: 45 },
                            { bar: 128, value: 35 },
                            { bar: 129, value: 25 },
                            { bar: 160, value: 30 },
                            { bar: 161, value: 50 },
                            { bar: 224, value: 45 }
                        ],
                        color: '#8b5cf6'
                    },
                    { 
                        name: 'Send 3: FREQ',
                        automation: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 64, value: 70 },
                            { bar: 65, value: 85 },
                            { bar: 128, value: 80 },
                            { bar: 129, value: 50 },
                            { bar: 160, value: 80 },
                            { bar: 161, value: 100 },
                            { bar: 192, value: 90 },
                            { bar: 224, value: 40 }
                        ],
                        color: '#f59e0b'
                    },
                    { 
                        name: 'Mix: DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 10 },
                            { bar: 64, value: 20 },
                            { bar: 65, value: 25 },
                            { bar: 128, value: 30 },
                            { bar: 129, value: 15 },
                            { bar: 161, value: 40 },
                            { bar: 192, value: 35 },
                            { bar: 224, value: 10 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Mix: DROP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 0 },
                            { bar: 29, value: 0 },
                            { bar: 30, value: 100 },
                            { bar: 32, value: 100 },
                            { bar: 33, value: 0 },
                            { bar: 61, value: 0 },
                            { bar: 62, value: 100 },
                            { bar: 64, value: 100 },
                            { bar: 65, value: 0 },
                            { bar: 124, value: 0 },
                            { bar: 125, value: 100 },
                            { bar: 128, value: 100 },
                            { bar: 129, value: 0 },
                            { bar: 157, value: 0 },
                            { bar: 158, value: 100 },
                            { bar: 160, value: 100 },
                            { bar: 161, value: 0 },
                            { bar: 189, value: 0 },
                            { bar: 190, value: 100 },
                            { bar: 192, value: 100 },
                            { bar: 193, value: 0 },
                            { bar: 224, value: 0 }
                        ],
                        color: '#ec4899'
                    }
                ]
            },
            techhouse: {
                totalBars: 144,
                bpm: 126,
                sections: [
                    { bar: 1, name: 'INTRO', class: 'section-intro' },
                    { bar: 17, name: 'BUILD', class: 'section-build' },
                    { bar: 33, name: 'MAIN', class: 'section-main' },
                    { bar: 65, name: 'BREAK', class: 'section-breakdown' },
                    { bar: 81, name: 'BUILD 2', class: 'section-build' },
                    { bar: 97, name: 'DROP', class: 'section-peak' },
                    { bar: 129, name: 'OUTRO', class: 'section-outro' }
                ],
                songRows: [
                    { row: 1, pattern: 'B01', label: 'Intro', section: 'intro' },
                    { row: 2, pattern: 'B02', label: 'Build', section: 'build' },
                    { row: 3, pattern: 'B03', label: 'Main', section: 'main' },
                    { row: 4, pattern: 'B04', label: 'Main', section: 'main' },
                    { row: 5, pattern: 'B05', label: 'Break', section: 'breakdown' },
                    { row: 6, pattern: 'B06', label: 'Build2', section: 'build' },
                    { row: 7, pattern: 'B07', label: 'Drop', section: 'peak' },
                    { row: 8, pattern: 'B08', label: 'Drop', section: 'peak' },
                    { row: 9, pattern: 'B09', label: 'Outro', section: 'outro' }
                ],
                lanes: [
                    { type: 'header', device: 'syntakt' },
                    { 
                        name: 'Kick',
                        clips: [
                            // INTRO - full kick establishes groove
                            { start: 1, end: 14, label: 'Kick Intro', pattern: 'B01', class: 'clip-kick', intensity: 'med', tooltip: 'Punchy kick | Establishing groove' },
                            // 2 bar silence before BUILD (bars 15-16)
                            { start: 17, end: 30, label: 'Kick Build', pattern: 'B01', class: 'clip-kick', intensity: 'med', tooltip: 'Building energy | HP filter opening' },
                            // 2 bar silence before MAIN (bars 31-32)
                            { start: 33, end: 62, label: 'Kick Main', pattern: 'B02', class: 'clip-kick', intensity: 'high', tooltip: 'Full punch | Sidechain master' },
                            // 2 bar silence before BREAK (bars 63-64)
                            // sparse kick in break
                            { start: 73, end: 78, label: 'Kick Sparse', pattern: 'B01', class: 'clip-kick', intensity: 'low', tooltip: 'Half-time | Mid-break tension' },
                            { start: 81, end: 94, label: 'Kick Build2', pattern: 'B02', class: 'clip-kick', intensity: 'med', tooltip: 'Building back | HP sweep' },
                            // 2 bar silence before DROP (bars 95-96)
                            { start: 97, end: 128, label: 'Kick Peak', pattern: 'B02', class: 'clip-kick', intensity: 'high', tooltip: 'Maximum punch | Peak energy' },
                            { start: 129, end: 144, label: 'Kick Outro', pattern: 'B01', class: 'clip-kick', intensity: 'med', tooltip: 'Outro groove | HP filtering up' }
                        ]
                    },
                    { 
                        name: 'Hi-Hats',
                        clips: [
                            // FILTER REVEAL - starts bar 5, filtered
                            { start: 5, end: 16, label: 'HH Tease', pattern: 'B01', class: 'clip-hats', intensity: 'low', tooltip: 'FILTER REVEAL | LP 20% | Hinting at groove' },
                            { start: 17, end: 32, label: 'HH Build', pattern: 'B02', class: 'clip-hats', intensity: 'med', tooltip: 'Filter 20%â†’60% | Opening up' },
                            { start: 33, end: 64, label: 'HH Main', pattern: 'B01', class: 'clip-hats', intensity: 'high', tooltip: 'Filter 80% | Full pattern' },
                            { start: 65, end: 80, label: 'HH Filter', pattern: 'B01', class: 'clip-hats', intensity: 'low', tooltip: 'Filter closes to 30% | Breakdown texture' },
                            { start: 81, end: 96, label: 'HH Return', pattern: 'B02', class: 'clip-hats', intensity: 'med', tooltip: 'Filter opens 30%â†’70% | Building' },
                            { start: 97, end: 128, label: 'HH Peak', pattern: 'B02', class: 'clip-hats', intensity: 'high', tooltip: 'Filter snaps to 100% | Maximum energy' },
                            { start: 129, end: 140, label: 'HH Strip', pattern: 'B01', class: 'clip-hats', intensity: 'med', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'HH Filter',
                            color: '#fbbf24',
                            points: [
                                { bar: 5, value: 20 },
                                { bar: 16, value: 35 },
                                { bar: 24, value: 50 },
                                { bar: 32, value: 60 },
                                { bar: 33, value: 80 },
                                { bar: 64, value: 85 },
                                { bar: 65, value: 30 },
                                { bar: 80, value: 35 },
                                { bar: 88, value: 55 },
                                { bar: 96, value: 70 },
                                { bar: 97, value: 100 },
                                { bar: 128, value: 95 },
                                { bar: 129, value: 60 },
                                { bar: 140, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'Clap',
                        clips: [
                            // DELAY FB SWELL before MAIN
                            { start: 17, end: 32, label: 'Clap Intro', pattern: 'B02', class: 'clip-clap', intensity: 'low', tooltip: 'DELAY FB SWELL | FB rises 20%â†’60% bars 25-32' },
                            { start: 33, end: 64, label: 'Clap Main', pattern: 'B01', class: 'clip-clap', intensity: 'med', tooltip: 'FB cuts to 25% at drop | Clean impact' },
                            // element swap - clap out during break, rolls back in
                            { start: 89, end: 96, label: 'Clap Roll', pattern: 'B02', class: 'clip-clap', intensity: 'med', tooltip: 'Building roll | 16ths | Tension' },
                            { start: 97, end: 128, label: 'Clap Big', pattern: 'B01', class: 'clip-clap', intensity: 'high', tooltip: 'Layered claps | Peak energy' },
                            { start: 129, end: 140, label: 'Clap Out', pattern: 'B02', class: 'clip-clap', intensity: 'med', tooltip: 'Standard clap | Outro' }
                        ]
                    },
                    { 
                        name: 'Shaker',
                        clips: [
                            // Starts early, filtered - FILTER REVEAL
                            { start: 9, end: 32, label: 'Shaker Hint', pattern: 'B02', class: 'clip-perc', intensity: 'low', tooltip: 'FILTER REVEAL | LP 25% bar 9 | Opens to 50%' },
                            { start: 33, end: 64, label: 'Shaker Main', pattern: 'B01', class: 'clip-perc', intensity: 'med', tooltip: 'Filter 70% | Full groove' },
                            { start: 65, end: 80, label: 'Shaker Filter', pattern: 'B01', class: 'clip-perc', intensity: 'low', tooltip: 'Filter down to 25% | Breakdown' },
                            { start: 97, end: 128, label: 'Shaker Full', pattern: 'B01', class: 'clip-perc', intensity: 'high', tooltip: 'Filter 100% | Peak energy' },
                            { start: 129, end: 140, label: 'Shaker Out', pattern: 'B02', class: 'clip-perc', intensity: 'low', tooltip: 'Fading | Outro' }
                        ],
                        automation: {
                            name: 'Shaker Filter',
                            color: '#f97316',
                            points: [
                                { bar: 9, value: 25 },
                                { bar: 16, value: 35 },
                                { bar: 24, value: 45 },
                                { bar: 32, value: 50 },
                                { bar: 33, value: 70 },
                                { bar: 64, value: 75 },
                                { bar: 65, value: 25 },
                                { bar: 80, value: 30 },
                                { bar: 97, value: 100 },
                                { bar: 128, value: 90 },
                                { bar: 140, value: 30 }
                            ]
                        }
                    },
                    { 
                        name: 'Lead',
                        clips: [
                            // REVERB REVEAL - 100% wet hint before full lead
                            { start: 25, end: 32, label: 'Lead Hint', pattern: 'B01', class: 'clip-lead', intensity: 'low', tooltip: 'REVERB REVEAL | 100% wet | Ghostly hint' },
                            { start: 33, end: 48, label: 'Lead Tease', pattern: 'B01', class: 'clip-lead', intensity: 'med', tooltip: 'Reverb 100%â†’40% | Drying out' },
                            { start: 65, end: 80, label: 'Lead Break', pattern: 'B01', class: 'clip-lead', intensity: 'med', tooltip: 'Breakdown melody | Full phrase | Emotional' },
                            // REVERSE REVERB before peak
                            { start: 89, end: 96, label: 'Lead RevVerb', pattern: 'T01', class: 'clip-lead', intensity: 'low', tooltip: 'REVERSE REVERB | Swell into DROP' },
                            { start: 97, end: 128, label: 'Lead Hook', pattern: 'B01', class: 'clip-lead', intensity: 'high', tooltip: 'Main hook | Dry snap | Peak moment' }
                        ],
                        automation: {
                            name: 'Lead Filter',
                            color: '#f59e0b',
                            points: [
                                { bar: 25, value: 30 },
                                { bar: 32, value: 45 },
                                { bar: 33, value: 55 },
                                { bar: 48, value: 70 },
                                { bar: 65, value: 60 },
                                { bar: 80, value: 75 },
                                { bar: 89, value: 40 },
                                { bar: 96, value: 55 },
                                { bar: 97, value: 100 },
                                { bar: 128, value: 90 }
                            ]
                        }
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Bass',
                        clips: [
                            // Starts bar 1 but heavily filtered
                            { start: 1, end: 16, label: 'Bass Sub', pattern: 'B01', class: 'clip-bass', intensity: 'low', tooltip: 'FILTER REVEAL | LP 15% | Just sub hinting' },
                            // Opens during kick gap bars 15-16
                            { start: 17, end: 32, label: 'Bass Build', pattern: 'B02', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 15%â†’50% | Harmonics emerging' },
                            { start: 33, end: 64, label: 'Bass Main', pattern: 'B01', class: 'clip-bass', intensity: 'high', tooltip: 'Filter 80% | Full groove | Locked to kick' },
                            { start: 65, end: 80, label: 'Bass Sub', pattern: 'B01', class: 'clip-bass', intensity: 'med', tooltip: 'Filter closes to 25% | Sub bed for break' },
                            { start: 81, end: 96, label: 'Bass Rise', pattern: 'B02', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 25%â†’70% | Building' },
                            { start: 97, end: 128, label: 'Bass Full', pattern: 'B01', class: 'clip-bass', intensity: 'high', tooltip: 'Filter snaps to 100% | Maximum energy' },
                            { start: 129, end: 144, label: 'Bass Out', pattern: 'B01', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 80%â†’20% | Outro fade' }
                        ],
                        automation: {
                            name: 'Bass Filter',
                            color: '#a855f7',
                            points: [
                                { bar: 1, value: 15 },
                                { bar: 14, value: 20 },
                                { bar: 15, value: 30 },
                                { bar: 17, value: 35 },
                                { bar: 24, value: 45 },
                                { bar: 32, value: 50 },
                                { bar: 33, value: 80 },
                                { bar: 64, value: 85 },
                                { bar: 65, value: 25 },
                                { bar: 80, value: 30 },
                                { bar: 88, value: 50 },
                                { bar: 96, value: 70 },
                                { bar: 97, value: 100 },
                                { bar: 128, value: 95 },
                                { bar: 129, value: 80 },
                                { bar: 144, value: 20 }
                            ]
                        }
                    },
                    { 
                        name: 'Stabs',
                        clips: [
                            // GRANULAR HINT - grabbing tail of stab
                            { start: 9, end: 16, label: 'Stab Hint', pattern: 'B02', class: 'clip-chord', intensity: 'low', tooltip: 'GRANULAR HINT | Grain on tail | LP 15%' },
                            { start: 17, end: 32, label: 'Stab Tease', pattern: 'B02', class: 'clip-chord', intensity: 'low', tooltip: 'Filter 15%â†’45% | Grain moving to attack' },
                            { start: 33, end: 64, label: 'Stab Main', pattern: 'B01', class: 'clip-chord', intensity: 'med', tooltip: 'Filter 70% | Offbeat stabs | Delay: 30%' },
                            { start: 65, end: 80, label: 'Stab Atmos', pattern: 'B01', class: 'clip-chord', intensity: 'med', tooltip: 'Held chords | Reverb: 60% | Breakdown' },
                            { start: 97, end: 128, label: 'Stab Full', pattern: 'B01', class: 'clip-chord', intensity: 'high', tooltip: 'Filter 100% | Dry snap | Peak energy' },
                            { start: 129, end: 140, label: 'Stab Fade', pattern: 'B02', class: 'clip-chord', intensity: 'low', tooltip: 'Filter closing | Reverb rising | Outro' }
                        ],
                        automation: {
                            name: 'Stab Filter',
                            color: '#14b8a6',
                            points: [
                                { bar: 9, value: 15 },
                                { bar: 16, value: 25 },
                                { bar: 24, value: 35 },
                                { bar: 32, value: 45 },
                                { bar: 33, value: 70 },
                                { bar: 64, value: 75 },
                                { bar: 65, value: 50 },
                                { bar: 80, value: 55 },
                                { bar: 97, value: 100 },
                                { bar: 128, value: 90 },
                                { bar: 140, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'Tops',
                        clips: [
                            { start: 9, end: 16, label: 'Tops Hint', pattern: 'B02', class: 'clip-perc', intensity: 'low', tooltip: 'FILTER REVEAL | Subtracks 1-2 | LP 20%' },
                            { start: 17, end: 32, label: 'Tops Build', pattern: 'B02', class: 'clip-perc', intensity: 'med', tooltip: 'Filter opening | Subtracks 1-4' },
                            { start: 33, end: 64, label: 'Tops Main', pattern: 'B01', class: 'clip-perc', intensity: 'med', tooltip: 'Filter 75% | All subtracks | Main groove' },
                            { start: 65, end: 80, label: 'Tops Filter', pattern: 'B01', class: 'clip-perc', intensity: 'low', tooltip: 'Filter down to 25% | Breakdown' },
                            { start: 81, end: 96, label: 'Tops Build', pattern: 'B02', class: 'clip-perc', intensity: 'med', tooltip: 'Filter opening | Building back' },
                            { start: 97, end: 128, label: 'Tops Full', pattern: 'B01', class: 'clip-perc', intensity: 'high', tooltip: 'Filter 100% | Maximum groove' },
                            { start: 129, end: 140, label: 'Tops Strip', pattern: 'B01', class: 'clip-perc', intensity: 'low', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'Tops Filter',
                            color: '#2dd4bf',
                            points: [
                                { bar: 9, value: 20 },
                                { bar: 16, value: 35 },
                                { bar: 17, value: 45 },
                                { bar: 32, value: 60 },
                                { bar: 33, value: 75 },
                                { bar: 64, value: 80 },
                                { bar: 65, value: 25 },
                                { bar: 80, value: 30 },
                                { bar: 81, value: 45 },
                                { bar: 96, value: 70 },
                                { bar: 97, value: 100 },
                                { bar: 128, value: 95 },
                                { bar: 140, value: 30 }
                            ]
                        }
                    },
                    { 
                        name: 'Vox Chops',
                        clips: [
                            // REVERSE REVERB into first vocal
                            { start: 21, end: 24, label: 'Vox RevVerb', pattern: 'B03', class: 'clip-vocal', intensity: 'low', tooltip: 'REVERSE REVERB | Swell into vocals' },
                            { start: 25, end: 32, label: 'Vox Tease', pattern: 'B03', class: 'clip-vocal', intensity: 'low', tooltip: 'First chops | 80% wet | Filtered' },
                            { start: 33, end: 64, label: 'Vox Hook', pattern: 'B01', class: 'clip-vocal', intensity: 'med', tooltip: 'Reverb dries 80%â†’30% | Main groove' },
                            { start: 65, end: 80, label: 'Vox Stretch', pattern: 'B01', class: 'clip-vocal', intensity: 'med', tooltip: 'Time-stretched | Reverb: 80% | Emotional breakdown' },
                            // Another reverse reverb swell
                            { start: 89, end: 96, label: 'Vox RevVerb2', pattern: 'B03', class: 'clip-vocal', intensity: 'low', tooltip: 'REVERSE REVERB | Building to drop' },
                            { start: 97, end: 112, label: 'Vox Full', pattern: 'B01', class: 'clip-vocal', intensity: 'high', tooltip: 'Snap dry | Filter 100% | Peak hook' },
                            { start: 113, end: 128, label: 'Vox Echo', pattern: 'B01', class: 'clip-vocal', intensity: 'med', tooltip: 'Reverb rising | Fading back' },
                            { start: 129, end: 136, label: 'Vox Out', pattern: 'B03', class: 'clip-vocal', intensity: 'low', tooltip: 'Final chops | Outro' }
                        ],
                        automation: {
                            name: 'Vox Filter',
                            color: '#d55a9a',
                            points: [
                                { bar: 21, value: 20 },
                                { bar: 24, value: 35 },
                                { bar: 25, value: 40 },
                                { bar: 32, value: 55 },
                                { bar: 33, value: 70 },
                                { bar: 64, value: 75 },
                                { bar: 65, value: 50 },
                                { bar: 80, value: 60 },
                                { bar: 89, value: 30 },
                                { bar: 96, value: 50 },
                                { bar: 97, value: 100 },
                                { bar: 112, value: 90 },
                                { bar: 113, value: 60 },
                                { bar: 128, value: 45 },
                                { bar: 136, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'FX/Trans',
                        clips: [
                            // No risers - just silence markers
                            { start: 15, end: 16, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'low', tooltip: 'Kick gap | Breathing room before BUILD' },
                            { start: 31, end: 32, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'med', tooltip: 'Kick gap | Tension before MAIN' },
                            { start: 63, end: 64, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'med', tooltip: 'Kick gap | Into breakdown' },
                            { start: 95, end: 96, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'high', tooltip: 'Maximum tension | Before DROP' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Bus 1: DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 32, value: 45 },
                            { bar: 64, value: 60 },
                            { bar: 65, value: 25 },
                            { bar: 80, value: 35 },
                            { bar: 96, value: 55 },
                            { bar: 97, value: 80 },
                            { bar: 128, value: 75 },
                            { bar: 144, value: 40 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Bus 1: FREQ',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 50 },
                            { bar: 32, value: 65 },
                            { bar: 64, value: 80 },
                            { bar: 65, value: 35 },
                            { bar: 80, value: 45 },
                            { bar: 96, value: 70 },
                            { bar: 97, value: 100 },
                            { bar: 128, value: 95 },
                            { bar: 144, value: 50 }
                        ],
                        color: '#f87171'
                    },
                    { 
                        name: 'Bus 2: FDBK',
                        automation: true,
                        points: [
                            { bar: 1, value: 20 },
                            { bar: 32, value: 30 },
                            { bar: 64, value: 40 },
                            { bar: 65, value: 60 },
                            { bar: 80, value: 55 },
                            { bar: 96, value: 45 },
                            { bar: 97, value: 35 },
                            { bar: 128, value: 40 },
                            { bar: 144, value: 25 }
                        ],
                        color: '#f97316'
                    },
                    { 
                        name: 'Bus 2: TIME',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 25 },
                            { bar: 33, value: 35 },
                            { bar: 64, value: 35 },
                            { bar: 65, value: 50 },
                            { bar: 80, value: 50 },
                            { bar: 81, value: 40 },
                            { bar: 96, value: 40 },
                            { bar: 97, value: 30 },
                            { bar: 144, value: 25 }
                        ],
                        color: '#fb923c'
                    },
                    { 
                        name: 'Bus 3: DEP',
                        automation: true,
                        points: [
                            { bar: 1, value: 35 },
                            { bar: 32, value: 45 },
                            { bar: 64, value: 55 },
                            { bar: 65, value: 40 },
                            { bar: 80, value: 50 },
                            { bar: 96, value: 60 },
                            { bar: 97, value: 75 },
                            { bar: 128, value: 70 },
                            { bar: 144, value: 40 }
                        ],
                        color: '#eab308'
                    },
                    { 
                        name: 'Bus 3: FREZ',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 0 },
                            { bar: 32, value: 0 },
                            { bar: 33, value: 15 },
                            { bar: 64, value: 25 },
                            { bar: 65, value: 0 },
                            { bar: 80, value: 10 },
                            { bar: 96, value: 35 },
                            { bar: 97, value: 45 },
                            { bar: 128, value: 30 },
                            { bar: 144, value: 0 }
                        ],
                        color: '#facc15'
                    },
                    { 
                        name: 'Bus 4: SIZE',
                        automation: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 35 },
                            { bar: 64, value: 40 },
                            { bar: 65, value: 65 },
                            { bar: 80, value: 70 },
                            { bar: 96, value: 50 },
                            { bar: 97, value: 30 },
                            { bar: 128, value: 35 },
                            { bar: 144, value: 45 }
                        ],
                        color: '#a855f7'
                    },
                    { 
                        name: 'Bus 4: DAMP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 40 },
                            { bar: 32, value: 45 },
                            { bar: 64, value: 50 },
                            { bar: 65, value: 35 },
                            { bar: 80, value: 40 },
                            { bar: 96, value: 50 },
                            { bar: 97, value: 55 },
                            { bar: 128, value: 50 },
                            { bar: 144, value: 45 }
                        ],
                        color: '#c084fc'
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Send 1: FDBK',
                        automation: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 35 },
                            { bar: 57, value: 45 },
                            { bar: 64, value: 70 },
                            { bar: 65, value: 35 },
                            { bar: 80, value: 45 },
                            { bar: 96, value: 30 },
                            { bar: 97, value: 20 },
                            { bar: 128, value: 25 },
                            { bar: 144, value: 15 }
                        ],
                        color: '#06b6d4'
                    },
                    { 
                        name: 'Send 1: TIME',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 25 },
                            { bar: 33, value: 35 },
                            { bar: 64, value: 35 },
                            { bar: 65, value: 50 },
                            { bar: 80, value: 50 },
                            { bar: 81, value: 40 },
                            { bar: 96, value: 40 },
                            { bar: 97, value: 30 },
                            { bar: 144, value: 25 }
                        ],
                        color: '#38bdf8'
                    },
                    { 
                        name: 'Send 2: SIZE',
                        automation: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 30 },
                            { bar: 64, value: 35 },
                            { bar: 65, value: 60 },
                            { bar: 80, value: 55 },
                            { bar: 96, value: 40 },
                            { bar: 97, value: 25 },
                            { bar: 128, value: 30 },
                            { bar: 144, value: 40 }
                        ],
                        color: '#a78bfa'
                    },
                    { 
                        name: 'Send 2: DAMP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 40 },
                            { bar: 64, value: 45 },
                            { bar: 65, value: 35 },
                            { bar: 80, value: 40 },
                            { bar: 96, value: 45 },
                            { bar: 97, value: 50 },
                            { bar: 128, value: 45 },
                            { bar: 144, value: 40 }
                        ],
                        color: '#8b5cf6'
                    },
                    { 
                        name: 'Send 3: FREQ',
                        automation: true,
                        points: [
                            { bar: 1, value: 40 },
                            { bar: 16, value: 55 },
                            { bar: 32, value: 70 },
                            { bar: 33, value: 80 },
                            { bar: 64, value: 85 },
                            { bar: 65, value: 55 },
                            { bar: 80, value: 65 },
                            { bar: 96, value: 85 },
                            { bar: 97, value: 100 },
                            { bar: 128, value: 95 },
                            { bar: 129, value: 70 },
                            { bar: 144, value: 50 }
                        ],
                        color: '#f59e0b'
                    },
                    { 
                        name: 'Mix: DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 15 },
                            { bar: 32, value: 20 },
                            { bar: 64, value: 25 },
                            { bar: 65, value: 10 },
                            { bar: 80, value: 15 },
                            { bar: 96, value: 25 },
                            { bar: 97, value: 35 },
                            { bar: 128, value: 40 },
                            { bar: 129, value: 20 },
                            { bar: 144, value: 10 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Mix: DROP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 0 },
                            { bar: 14, value: 0 },
                            { bar: 15, value: 100 },
                            { bar: 16, value: 100 },
                            { bar: 17, value: 0 },
                            { bar: 30, value: 0 },
                            { bar: 31, value: 100 },
                            { bar: 32, value: 100 },
                            { bar: 33, value: 0 },
                            { bar: 62, value: 0 },
                            { bar: 63, value: 100 },
                            { bar: 64, value: 100 },
                            { bar: 65, value: 0 },
                            { bar: 94, value: 0 },
                            { bar: 95, value: 100 },
                            { bar: 96, value: 100 },
                            { bar: 97, value: 0 },
                            { bar: 144, value: 0 }
                        ],
                        color: '#ec4899'
                    }
                ]
            },
            tonverk: {
                totalBars: 192,
                bpm: 128,
                sections: [
                    { bar: 1, name: 'INTRO', class: 'section-intro' },
                    { bar: 33, name: 'BUILD', class: 'section-build' },
                    { bar: 65, name: 'MAIN', class: 'section-main' },
                    { bar: 97, name: 'BREAK', class: 'section-breakdown' },
                    { bar: 129, name: 'PEAK', class: 'section-peak' },
                    { bar: 161, name: 'OUTRO', class: 'section-outro' }
                ],
                songRows: [
                    { row: 1, pattern: 'C01', label: 'Intro', section: 'intro' },
                    { row: 2, pattern: 'C02', label: 'Intro', section: 'intro' },
                    { row: 3, pattern: 'C03', label: 'Build', section: 'build' },
                    { row: 4, pattern: 'C04', label: 'Build', section: 'build' },
                    { row: 5, pattern: 'C05', label: 'Main', section: 'main' },
                    { row: 6, pattern: 'C06', label: 'Main', section: 'main' },
                    { row: 7, pattern: 'C07', label: 'Break', section: 'breakdown' },
                    { row: 8, pattern: 'C08', label: 'Break', section: 'breakdown' },
                    { row: 9, pattern: 'C09', label: 'Peak', section: 'peak' },
                    { row: 10, pattern: 'C10', label: 'Peak', section: 'peak' },
                    { row: 11, pattern: 'C11', label: 'Outro', section: 'outro' },
                    { row: 12, pattern: 'C12', label: 'Outro', section: 'outro' }
                ],
                lanes: [
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'T1: Kick',
                        clips: [
                            { start: 1, end: 16, label: 'Kick Intro', pattern: 'C01', class: 'clip-kick', intensity: 'low', tooltip: 'Filtered kick | HP: 150Hz | Building tension | Sample machine' },
                            { start: 17, end: 32, label: 'Kick Open', pattern: 'C01', class: 'clip-kick', intensity: 'med', tooltip: 'Filter opening | HP: 80Hz | Punch increasing' },
                            { start: 33, end: 64, label: 'Kick Build', pattern: 'C02', class: 'clip-kick', intensity: 'med', tooltip: 'Full kick | HP: 40Hz | Building to main' },
                            { start: 65, end: 96, label: 'Kick Main', pattern: 'C02', class: 'clip-kick', intensity: 'high', tooltip: 'Maximum punch | No HP | Sidechain master | Main groove' },
                            { start: 97, end: 112, label: 'Kick Sparse', pattern: 'C01', class: 'clip-kick', intensity: 'low', tooltip: 'Breakdown | Half-time or sparse | Creates space' },
                            { start: 113, end: 128, label: 'Kick Build 2', pattern: 'C02', class: 'clip-kick', intensity: 'med', tooltip: 'Building back | Filter sweep up' },
                            { start: 129, end: 160, label: 'Kick Peak', pattern: 'C02', class: 'clip-kick', intensity: 'high', tooltip: 'Peak energy | Maximum punch | Drive: 15%' },
                            { start: 161, end: 176, label: 'Kick Out', pattern: 'C01', class: 'clip-kick', intensity: 'med', tooltip: 'Filtering down | HP returning' },
                            { start: 177, end: 192, label: 'Kick Fade', pattern: 'C01', class: 'clip-kick', intensity: 'low', tooltip: 'Final bars | Sparse | Tail out' }
                        ]
                    },
                    { 
                        name: 'T2: Bass',
                        clips: [
                            { start: 9, end: 16, label: 'Bass Tease', pattern: 'C01', class: 'clip-bass', intensity: 'low', tooltip: 'FILTER REVEAL | LP 15% | Sub hints' },
                            { start: 17, end: 32, label: 'Bass Sub', pattern: 'C02', class: 'clip-bass', intensity: 'low', tooltip: 'Filter: 30% | Sub only | Building' },
                            { start: 33, end: 64, label: 'Bass Open', pattern: 'C03', class: 'clip-bass', intensity: 'med', tooltip: 'Filter: 30%â†’60% | Opening groove' },
                            { start: 65, end: 96, label: 'Bass Full', pattern: 'C01', class: 'clip-bass', intensity: 'high', tooltip: 'Filter: 80% | Full presence' },
                            { start: 97, end: 112, label: 'Bass Sub Only', pattern: 'C01', class: 'clip-bass', intensity: 'low', tooltip: 'Breakdown | Sub only | Filter: 25%' },
                            { start: 113, end: 128, label: 'Bass Rise', pattern: 'C03', class: 'clip-bass', intensity: 'med', tooltip: 'Filter sweep 25%â†’75%' },
                            { start: 129, end: 160, label: 'Bass Peak', pattern: 'C02', class: 'clip-bass', intensity: 'high', tooltip: 'Filter: 90% | Maximum presence' },
                            { start: 161, end: 192, label: 'Bass Out', pattern: 'C02', class: 'clip-bass', intensity: 'med', tooltip: 'Filter closing | 75%â†’20%' }
                        ],
                        automation: {
                            name: 'Bass Filter',
                            color: '#a855f7',
                            points: [
                                { bar: 9, value: 15 },
                                { bar: 16, value: 25 },
                                { bar: 32, value: 30 },
                                { bar: 48, value: 45 },
                                { bar: 64, value: 60 },
                                { bar: 80, value: 75 },
                                { bar: 96, value: 80 },
                                { bar: 97, value: 25 },
                                { bar: 112, value: 35 },
                                { bar: 120, value: 55 },
                                { bar: 128, value: 75 },
                                { bar: 129, value: 90 },
                                { bar: 160, value: 85 },
                                { bar: 176, value: 50 },
                                { bar: 192, value: 20 }
                            ]
                        }
                    },
                    { 
                        name: 'T3: Hats',
                        clips: [
                            { start: 17, end: 32, label: 'HH Tease', pattern: 'C02', class: 'clip-hats', intensity: 'low', tooltip: 'FILTER REVEAL | LP 25% | Sparse' },
                            { start: 33, end: 64, label: 'HH Minimal', pattern: 'C02', class: 'clip-hats', intensity: 'med', tooltip: 'Filter 25%â†’55% | Building' },
                            { start: 65, end: 96, label: 'HH Groove', pattern: 'C01', class: 'clip-hats', intensity: 'high', tooltip: 'Filter 80% | Full groove' },
                            { start: 97, end: 112, label: 'HH Filter', pattern: 'C01', class: 'clip-hats', intensity: 'low', tooltip: 'Filter down to 30% | Breakdown' },
                            { start: 113, end: 128, label: 'HH Return', pattern: 'C02', class: 'clip-hats', intensity: 'med', tooltip: 'Filter opening | Building' },
                            { start: 129, end: 160, label: 'HH Full', pattern: 'C01', class: 'clip-hats', intensity: 'high', tooltip: 'Filter 100% | Peak energy' },
                            { start: 161, end: 176, label: 'HH Strip', pattern: 'C01', class: 'clip-hats', intensity: 'med', tooltip: 'Filter closing | Outro' },
                            { start: 177, end: 184, label: 'HH Fade', pattern: 'C01', class: 'clip-hats', intensity: 'low', tooltip: 'Final hats' }
                        ],
                        automation: {
                            name: 'HH Filter',
                            color: '#fbbf24',
                            points: [
                                { bar: 17, value: 25 },
                                { bar: 32, value: 35 },
                                { bar: 48, value: 50 },
                                { bar: 64, value: 55 },
                                { bar: 65, value: 80 },
                                { bar: 96, value: 85 },
                                { bar: 97, value: 30 },
                                { bar: 112, value: 40 },
                                { bar: 120, value: 60 },
                                { bar: 128, value: 75 },
                                { bar: 129, value: 100 },
                                { bar: 160, value: 95 },
                                { bar: 176, value: 50 },
                                { bar: 184, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'T4: Clap',
                        clips: [
                            { start: 25, end: 32, label: 'Clap Intro', pattern: 'C02', class: 'clip-clap', intensity: 'low', tooltip: 'First claps | Soft | Filtered | Introducing' },
                            { start: 33, end: 64, label: 'Clap Light', pattern: 'C03', class: 'clip-clap', intensity: 'med', tooltip: '2&4 | Low velocity | Building' },
                            { start: 65, end: 96, label: 'Clap Full', pattern: 'C01', class: 'clip-clap', intensity: 'high', tooltip: 'Standard 2&4 | Reverb: 30% | Full presence' },
                            { start: 97, end: 112, label: 'Clap Sparse', pattern: 'C01', class: 'clip-clap', intensity: 'low', tooltip: 'Breakdown | Sparse hits | Tension' },
                            { start: 113, end: 128, label: 'Clap Roll', pattern: 'C03', class: 'clip-clap', intensity: 'med', tooltip: 'Building roll | Into peak' },
                            { start: 129, end: 160, label: 'Clap Peak', pattern: 'C02', class: 'clip-clap', intensity: 'high', tooltip: 'Layered hits | Extra velocity | Chorus: 25%' },
                            { start: 161, end: 176, label: 'Clap Out', pattern: 'C01', class: 'clip-clap', intensity: 'med', tooltip: 'Outro clap | Reverb tail' }
                        ]
                    },
                    { 
                        name: 'T5: Perc+Tex',
                        clips: [
                            { start: 17, end: 32, label: 'Perc Intro', pattern: 'C02', class: 'clip-perc', intensity: 'low', tooltip: 'Subtracks 1-2 | Minimal perc | Introducing' },
                            { start: 33, end: 64, label: 'Perc â†’ Bus A', pattern: 'C03', class: 'clip-perc', intensity: 'med', tooltip: 'Subtracks 1-4 | Bus A delay | Texture building' },
                            { start: 65, end: 96, label: 'Perc â†’ Bus B', pattern: 'C01', class: 'clip-perc', intensity: 'high', tooltip: 'All subtracks | Bus B reverb | Full atmosphere' },
                            { start: 97, end: 112, label: 'Perc Solo', pattern: 'C01', class: 'clip-perc', intensity: 'med', tooltip: 'Breakdown | Perc focus | Heavy FX | Spotlight' },
                            { start: 113, end: 128, label: 'Perc Build', pattern: 'C03', class: 'clip-perc', intensity: 'med', tooltip: 'Building back | FX increasing' },
                            { start: 129, end: 160, label: 'Perc â†’ A+B', pattern: 'C02', class: 'clip-perc', intensity: 'high', tooltip: 'Both busses | Maximum texture | Delay + Reverb' },
                            { start: 161, end: 176, label: 'Perc Strip', pattern: 'C02', class: 'clip-perc', intensity: 'med', tooltip: 'Stripping subtracks | Outro' }
                        ],
                        automation: {
                            name: 'Perc Filter',
                            color: '#2dd4bf',
                            points: [
                                { bar: 17, value: 35 },
                                { bar: 32, value: 50 },
                                { bar: 33, value: 60 },
                                { bar: 64, value: 70 },
                                { bar: 65, value: 75 },
                                { bar: 96, value: 80 },
                                { bar: 97, value: 65 },
                                { bar: 112, value: 70 },
                                { bar: 128, value: 75 },
                                { bar: 129, value: 85 },
                                { bar: 160, value: 90 },
                                { bar: 176, value: 50 }
                            ]
                        }
                    },
                    { 
                        name: 'T6: Chords',
                        clips: [
                            { start: 49, end: 64, label: 'Stab Intro', pattern: 'C03', class: 'clip-chord', intensity: 'low', tooltip: 'First stabs | Filtered | Every 8 bars | Teasing' },
                            { start: 65, end: 96, label: 'Stab Main', pattern: 'C01', class: 'clip-chord', intensity: 'med', tooltip: 'Sparse hits | Every 8-16 bars | Bus A: 30% | Groove accent' },
                            { start: 97, end: 112, label: 'Stab Atmos', pattern: 'C01', class: 'clip-chord', intensity: 'med', tooltip: 'Held chords | Bus B reverb: 60% | Breakdown atmosphere' },
                            { start: 129, end: 160, label: 'Stab Full', pattern: 'C02', class: 'clip-chord', intensity: 'high', tooltip: 'More frequent | Bigger presence | Both busses' },
                            { start: 161, end: 176, label: 'Stab Fade', pattern: 'C03', class: 'clip-chord', intensity: 'med', tooltip: 'Long releases | Filtering out | Outro' }
                        ],
                        automation: {
                            name: 'Chord Filter',
                            color: '#14b8a6',
                            points: [
                                { bar: 49, value: 35 },
                                { bar: 64, value: 50 },
                                { bar: 65, value: 65 },
                                { bar: 96, value: 70 },
                                { bar: 97, value: 55 },
                                { bar: 112, value: 60 },
                                { bar: 129, value: 80 },
                                { bar: 145, value: 90 },
                                { bar: 160, value: 85 },
                                { bar: 176, value: 45 }
                            ]
                        }
                    },
                    { 
                        name: 'T7: Vocal',
                        clips: [
                            { start: 81, end: 96, label: 'Vox Tease', pattern: 'C01', class: 'clip-vocal', intensity: 'low', tooltip: 'Slice hints | Filtered | Bus A delay throws' },
                            { start: 97, end: 112, label: 'Vox Chops', pattern: 'C01', class: 'clip-vocal', intensity: 'med', tooltip: 'Sparse chops | Breakdown texture | Delay: 40%' },
                            { start: 113, end: 128, label: 'Vox Build', pattern: 'C01', class: 'clip-vocal', intensity: 'med', tooltip: 'More chops | Building to peak' },
                            { start: 129, end: 144, label: 'Vox Hook', pattern: 'C02', class: 'clip-vocal', intensity: 'high', tooltip: 'Main phrase | Upfront | Dry + Bus B verb' },
                            { start: 145, end: 160, label: 'Vox Echo', pattern: 'C01', class: 'clip-vocal', intensity: 'med', tooltip: 'Hook echoing | Delay: 60% | Fading out' }
                        ],
                        automation: {
                            name: 'Vox Filter',
                            color: '#d55a9a',
                            points: [
                                { bar: 81, value: 40 },
                                { bar: 96, value: 55 },
                                { bar: 97, value: 60 },
                                { bar: 112, value: 70 },
                                { bar: 113, value: 75 },
                                { bar: 128, value: 85 },
                                { bar: 129, value: 100 },
                                { bar: 144, value: 90 },
                                { bar: 145, value: 65 },
                                { bar: 160, value: 45 }
                            ]
                        }
                    },
                    { 
                        name: 'T8: FX/Trans',
                        clips: [
                            { start: 25, end: 32, label: 'Rise 1', pattern: 'T01', class: 'clip-fx', intensity: 'med', tooltip: 'Subtle riser | Into build section' },
                            { start: 57, end: 64, label: 'Rise 2', pattern: 'T01', class: 'clip-fx', intensity: 'high', tooltip: 'Noise sweep up | Filter opening | Into main' },
                            { start: 89, end: 96, label: 'Down FX', pattern: 'T02', class: 'clip-fx', intensity: 'med', tooltip: 'Filter sweep down | Into breakdown' },
                            { start: 105, end: 112, label: 'Break FX', pattern: 'T03', class: 'clip-fx', intensity: 'med', tooltip: 'Atmospheric hits | Breakdown texture' },
                            { start: 121, end: 128, label: 'Big Rise', pattern: 'T04', class: 'clip-fx', intensity: 'high', tooltip: 'Maximum tension | Snare roll | Into peak' },
                            { start: 153, end: 160, label: 'Impact', pattern: 'T05', class: 'clip-fx', intensity: 'med', tooltip: 'Crash + downsweep | Signals outro' },
                            { start: 185, end: 192, label: 'Tail', pattern: 'T02', class: 'clip-fx', intensity: 'low', tooltip: 'Reverb wash | Final tail | Fade out' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Bus 1: Dirtshaper DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 32, value: 40 },
                            { bar: 64, value: 50 },
                            { bar: 97, value: 35 },
                            { bar: 128, value: 45 },
                            { bar: 129, value: 70 },
                            { bar: 192, value: 65 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Bus 1: Degrader BR',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 20 },
                            { bar: 32, value: 30 },
                            { bar: 64, value: 40 },
                            { bar: 97, value: 25 },
                            { bar: 128, value: 35 },
                            { bar: 129, value: 55 },
                            { bar: 192, value: 50 }
                        ],
                        color: '#f87171'
                    },
                    { 
                        name: 'Bus 2: Sat Delay FDBK',
                        automation: true,
                        points: [
                            { bar: 1, value: 15 },
                            { bar: 64, value: 25 },
                            { bar: 65, value: 35 },
                            { bar: 128, value: 40 },
                            { bar: 129, value: 55 },
                            { bar: 192, value: 50 }
                        ],
                        color: '#f97316'
                    },
                    { 
                        name: 'Bus 2: Sat Delay TIME',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 64, value: 35 },
                            { bar: 65, value: 45 },
                            { bar: 128, value: 50 },
                            { bar: 129, value: 40 },
                            { bar: 192, value: 35 }
                        ],
                        color: '#fb923c'
                    },
                    { 
                        name: 'Bus 3: Phase 98 SPD',
                        automation: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 64, value: 45 },
                            { bar: 65, value: 55 },
                            { bar: 96, value: 60 },
                            { bar: 97, value: 50 },
                            { bar: 128, value: 55 },
                            { bar: 129, value: 70 },
                            { bar: 192, value: 65 }
                        ],
                        color: '#eab308'
                    },
                    { 
                        name: 'Bus 3: Degrader FREZ',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 0 },
                            { bar: 64, value: 15 },
                            { bar: 65, value: 25 },
                            { bar: 96, value: 35 },
                            { bar: 97, value: 20 },
                            { bar: 128, value: 30 },
                            { bar: 129, value: 45 },
                            { bar: 192, value: 35 }
                        ],
                        color: '#facc15'
                    },
                    { 
                        name: 'Bus 4: Pan Chorus DEP',
                        automation: true,
                        points: [
                            { bar: 1, value: 35 },
                            { bar: 64, value: 45 },
                            { bar: 65, value: 55 },
                            { bar: 96, value: 60 },
                            { bar: 97, value: 75 },
                            { bar: 128, value: 70 },
                            { bar: 129, value: 50 },
                            { bar: 160, value: 55 },
                            { bar: 192, value: 60 }
                        ],
                        color: '#a855f7'
                    },
                    { 
                        name: 'Bus 4: Supervoid DEC',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 64, value: 40 },
                            { bar: 65, value: 50 },
                            { bar: 96, value: 55 },
                            { bar: 97, value: 70 },
                            { bar: 128, value: 65 },
                            { bar: 129, value: 45 },
                            { bar: 160, value: 50 },
                            { bar: 192, value: 55 }
                        ],
                        color: '#c084fc'
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Send 1: FDBK',
                        automation: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 30 },
                            { bar: 64, value: 40 },
                            { bar: 96, value: 50 },
                            { bar: 97, value: 55 },
                            { bar: 120, value: 65 },
                            { bar: 128, value: 60 },
                            { bar: 129, value: 50 },
                            { bar: 160, value: 45 },
                            { bar: 192, value: 20 }
                        ],
                        color: '#06b6d4'
                    },
                    { 
                        name: 'Send 1: TIME',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 25 },
                            { bar: 64, value: 35 },
                            { bar: 96, value: 50 },
                            { bar: 97, value: 65 },
                            { bar: 128, value: 65 },
                            { bar: 129, value: 50 },
                            { bar: 160, value: 50 },
                            { bar: 192, value: 25 }
                        ],
                        color: '#38bdf8'
                    },
                    { 
                        name: 'Send 2: SIZE',
                        automation: true,
                        points: [
                            { bar: 1, value: 15 },
                            { bar: 32, value: 20 },
                            { bar: 64, value: 30 },
                            { bar: 96, value: 35 },
                            { bar: 104, value: 60 },
                            { bar: 128, value: 45 },
                            { bar: 160, value: 50 },
                            { bar: 192, value: 40 }
                        ],
                        color: '#a78bfa'
                    },
                    { 
                        name: 'Send 2: DAMP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 30 },
                            { bar: 64, value: 40 },
                            { bar: 96, value: 50 },
                            { bar: 97, value: 70 },
                            { bar: 128, value: 65 },
                            { bar: 129, value: 45 },
                            { bar: 160, value: 50 },
                            { bar: 192, value: 55 }
                        ],
                        color: '#8b5cf6'
                    },
                    { 
                        name: 'Send 3: FREQ',
                        automation: true,
                        points: [
                            { bar: 1, value: 20 },
                            { bar: 32, value: 35 },
                            { bar: 64, value: 60 },
                            { bar: 96, value: 85 },
                            { bar: 104, value: 35 },
                            { bar: 128, value: 70 },
                            { bar: 144, value: 90 },
                            { bar: 160, value: 85 },
                            { bar: 192, value: 20 }
                        ],
                        color: '#f59e0b'
                    },
                    { 
                        name: 'Mix: DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 10 },
                            { bar: 32, value: 15 },
                            { bar: 64, value: 20 },
                            { bar: 96, value: 30 },
                            { bar: 97, value: 15 },
                            { bar: 128, value: 20 },
                            { bar: 129, value: 40 },
                            { bar: 160, value: 35 },
                            { bar: 192, value: 10 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Mix: DROP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 0 },
                            { bar: 30, value: 0 },
                            { bar: 31, value: 100 },
                            { bar: 32, value: 100 },
                            { bar: 33, value: 0 },
                            { bar: 62, value: 0 },
                            { bar: 63, value: 100 },
                            { bar: 64, value: 100 },
                            { bar: 65, value: 0 },
                            { bar: 94, value: 0 },
                            { bar: 95, value: 100 },
                            { bar: 96, value: 100 },
                            { bar: 97, value: 0 },
                            { bar: 126, value: 0 },
                            { bar: 127, value: 100 },
                            { bar: 128, value: 100 },
                            { bar: 129, value: 0 },
                            { bar: 158, value: 0 },
                            { bar: 159, value: 100 },
                            { bar: 160, value: 100 },
                            { bar: 161, value: 0 },
                            { bar: 192, value: 0 }
                        ],
                        color: '#ec4899'
                    }
                ]
            },
            melodark: {
                totalBars: 176,
                bpm: 122,
                sections: [
                    { bar: 1, name: 'INTRO', class: 'section-intro' },
                    { bar: 33, name: 'DROP 1', class: 'section-build' },
                    { bar: 65, name: 'VOCAL 1', class: 'section-main' },
                    { bar: 97, name: 'BREAK', class: 'section-breakdown' },
                    { bar: 113, name: 'DROP 2', class: 'section-peak' },
                    { bar: 145, name: 'OUTRO', class: 'section-outro' }
                ],
                songRows: [
                    { row: 1, pattern: 'D01', label: 'Intro', section: 'intro' },
                    { row: 2, pattern: 'D02', label: 'Intro', section: 'intro' },
                    { row: 3, pattern: 'D03', label: 'Drop1', section: 'build' },
                    { row: 4, pattern: 'D04', label: 'Drop1', section: 'build' },
                    { row: 5, pattern: 'D05', label: 'Vocal', section: 'main' },
                    { row: 6, pattern: 'D06', label: 'Vocal', section: 'main' },
                    { row: 7, pattern: 'D07', label: 'Break', section: 'breakdown' },
                    { row: 8, pattern: 'D08', label: 'Drop2', section: 'peak' },
                    { row: 9, pattern: 'D09', label: 'Drop2', section: 'peak' },
                    { row: 10, pattern: 'D10', label: 'Outro', section: 'outro' },
                    { row: 11, pattern: 'D11', label: 'Outro', section: 'outro' }
                ],
                lanes: [
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Kick',
                        clips: [
                            { start: 1, end: 32, label: 'Kick Intro', pattern: 'D01', class: 'clip-kick', intensity: 'low', tooltip: 'Filtered kick | Building tension | HP filter at 200Hz' },
                            { start: 33, end: 96, label: 'Kick Full', pattern: 'D02', class: 'clip-kick', intensity: 'high', tooltip: 'Full kick | Punchy 909-style | Sidechain source' },
                            { start: 97, end: 112, label: 'Kick Out', pattern: 'D01', class: 'clip-kick', intensity: 'low', tooltip: 'Breakdown | Kick filtered/sparse' },
                            { start: 113, end: 144, label: 'Kick Peak', pattern: 'D02', class: 'clip-kick', intensity: 'high', tooltip: 'Full energy return | Maximum punch' },
                            { start: 145, end: 176, label: 'Kick Fade', pattern: 'D01', class: 'clip-kick', intensity: 'med', tooltip: 'Outro | Gradually filtering out' }
                        ]
                    },
                    { 
                        name: 'Bass',
                        clips: [
                            { start: 17, end: 32, label: 'Bass Tease', pattern: 'D01', class: 'clip-bass', intensity: 'low', tooltip: 'FILTER REVEAL | LP 20% | Sub hints' },
                            { start: 33, end: 64, label: 'Bass Drive', pattern: 'D02', class: 'clip-bass', intensity: 'high', tooltip: 'Filter 70% | Dark & hypnotic' },
                            { start: 65, end: 96, label: 'Bass + Vox', pattern: 'D02', class: 'clip-bass', intensity: 'high', tooltip: 'Filter 75% | Locked with vocals' },
                            { start: 97, end: 112, label: 'Bass Sub', pattern: 'D01', class: 'clip-bass', intensity: 'low', tooltip: 'Filter closes to 25% | Breakdown' },
                            { start: 113, end: 144, label: 'Bass Peak', pattern: 'D03', class: 'clip-bass', intensity: 'high', tooltip: 'Filter snaps to 100% | Maximum' },
                            { start: 145, end: 168, label: 'Bass Out', pattern: 'D01', class: 'clip-bass', intensity: 'med', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'Bass Filter',
                            color: '#a855f7',
                            points: [
                                { bar: 17, value: 20 },
                                { bar: 32, value: 35 },
                                { bar: 33, value: 70 },
                                { bar: 64, value: 75 },
                                { bar: 96, value: 78 },
                                { bar: 97, value: 25 },
                                { bar: 112, value: 40 },
                                { bar: 113, value: 100 },
                                { bar: 144, value: 95 },
                                { bar: 145, value: 60 },
                                { bar: 168, value: 20 }
                            ]
                        }
                    },
                    { 
                        name: 'Hats/Perc',
                        clips: [
                            { start: 17, end: 32, label: 'HH Sparse', pattern: 'D01', class: 'clip-hats', intensity: 'low', tooltip: 'FILTER REVEAL | LP 25% | Minimal' },
                            { start: 33, end: 96, label: 'HH Groove', pattern: 'D02', class: 'clip-hats', intensity: 'med', tooltip: 'Filter 70% | Full pattern' },
                            { start: 113, end: 144, label: 'HH Intense', pattern: 'D03', class: 'clip-hats', intensity: 'high', tooltip: 'Filter 100% | Maximum energy' },
                            { start: 145, end: 168, label: 'HH Strip', pattern: 'D01', class: 'clip-hats', intensity: 'low', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'HH Filter',
                            color: '#fbbf24',
                            points: [
                                { bar: 17, value: 25 },
                                { bar: 32, value: 45 },
                                { bar: 33, value: 70 },
                                { bar: 64, value: 75 },
                                { bar: 96, value: 78 },
                                { bar: 113, value: 100 },
                                { bar: 144, value: 95 },
                                { bar: 145, value: 50 },
                                { bar: 168, value: 20 }
                            ]
                        }
                    },
                    { 
                        name: 'Clap/Snare',
                        clips: [
                            { start: 33, end: 96, label: 'Clap 2&4', pattern: 'D01', class: 'clip-clap', intensity: 'med', tooltip: 'Dark clap | Reverb tail | Hits on 2 & 4' },
                            { start: 113, end: 144, label: 'Clap Layer', pattern: 'D02', class: 'clip-clap', intensity: 'high', tooltip: 'Layered clap + snare | Extra punch for peak' },
                            { start: 145, end: 168, label: 'Clap Out', pattern: 'D01', class: 'clip-clap', intensity: 'med', tooltip: 'Standard clap | Outro groove' }
                        ]
                    },
                    { 
                        name: 'Dark Pad',
                        clips: [
                            { start: 1, end: 32, label: 'Atmos Intro', pattern: 'D01', class: 'clip-texture', intensity: 'med', tooltip: 'Dark drone | Sets mood | Grainer long grains | LP filter sweep' },
                            { start: 65, end: 96, label: 'Pad Under Vox', pattern: 'D02', class: 'clip-texture', intensity: 'low', tooltip: 'Subtle bed | Supports vocals | Sidechain ducking' },
                            { start: 97, end: 112, label: 'Pad Swell', pattern: 'D03', class: 'clip-texture', intensity: 'high', tooltip: 'Breakdown atmosphere | Rising tension | Filter opening' },
                            { start: 145, end: 176, label: 'Pad Fade', pattern: 'D01', class: 'clip-texture', intensity: 'med', tooltip: 'Outro atmosphere | Long reverb tail' }
                        ],
                        automation: {
                            name: 'Pad Filter',
                            color: '#8b5cf6',
                            points: [
                                { bar: 1, value: 40 },
                                { bar: 16, value: 55 },
                                { bar: 32, value: 60 },
                                { bar: 65, value: 35 },
                                { bar: 80, value: 40 },
                                { bar: 96, value: 45 },
                                { bar: 97, value: 55 },
                                { bar: 105, value: 75 },
                                { bar: 112, value: 85 },
                                { bar: 145, value: 50 },
                                { bar: 160, value: 60 },
                                { bar: 176, value: 70 }
                            ]
                        }
                    },
                    { 
                        name: 'Lead/Arp',
                        clips: [
                            { start: 33, end: 64, label: 'Dark Arp', pattern: 'D01', class: 'clip-lead', intensity: 'med', tooltip: 'Hypnotic arpeggio | Minor key | Delay: 3/16' },
                            { start: 113, end: 144, label: 'Lead Peak', pattern: 'D02', class: 'clip-lead', intensity: 'high', tooltip: 'Melodark lead | Distorted | Filter modulating' }
                        ],
                        automation: {
                            name: 'Lead Filter',
                            color: '#f59e0b',
                            points: [
                                { bar: 33, value: 45 },
                                { bar: 48, value: 60 },
                                { bar: 64, value: 70 },
                                { bar: 113, value: 65 },
                                { bar: 128, value: 85 },
                                { bar: 136, value: 90 },
                                { bar: 144, value: 75 }
                            ]
                        }
                    },
                    { 
                        name: 'Vocals',
                        clips: [
                            { start: 65, end: 80, label: 'Vox Verse 1', pattern: 'V01', class: 'clip-vocal', intensity: 'high', tooltip: '"Constantly in a fractured state of mind" | Dark delivery | Delay throws' },
                            { start: 81, end: 96, label: 'Vox Hook', pattern: 'V02', class: 'clip-vocal', intensity: 'high', tooltip: '"No holding me back" | Main hook | Layered vocals' },
                            { start: 97, end: 104, label: 'Vox Break', pattern: 'V03', class: 'clip-vocal', intensity: 'med', tooltip: '"Losing my sanity" | Breakdown vocal | Heavy reverb' },
                            { start: 113, end: 128, label: 'Vox Verse 2', pattern: 'V04', class: 'clip-vocal', intensity: 'high', tooltip: '"Moving on with my mistakes" | Second verse | More aggressive' },
                            { start: 129, end: 144, label: 'Vox Hook 2', pattern: 'V02', class: 'clip-vocal', intensity: 'high', tooltip: '"Bring me down" | Final hook | Maximum intensity' }
                        ],
                        automation: {
                            name: 'Vox Filter',
                            color: '#d55a9a',
                            points: [
                                { bar: 65, value: 60 },
                                { bar: 72, value: 70 },
                                { bar: 80, value: 75 },
                                { bar: 81, value: 85 },
                                { bar: 96, value: 90 },
                                { bar: 97, value: 55 },
                                { bar: 104, value: 60 },
                                { bar: 113, value: 75 },
                                { bar: 128, value: 85 },
                                { bar: 129, value: 95 },
                                { bar: 144, value: 80 }
                            ]
                        }
                    },
                    { 
                        name: 'FX/Risers',
                        clips: [
                            { start: 25, end: 32, label: 'Riser 1', pattern: 'X01', class: 'clip-fx', intensity: 'med', tooltip: 'White noise sweep | Into first drop' },
                            { start: 89, end: 96, label: 'Downsweep', pattern: 'X02', class: 'clip-fx', intensity: 'med', tooltip: 'Reverse crash | Into breakdown' },
                            { start: 105, end: 112, label: 'Build FX', pattern: 'X03', class: 'clip-fx', intensity: 'high', tooltip: 'Tension riser | Snare roll | Into peak drop' },
                            { start: 141, end: 144, label: 'Impact', pattern: 'X04', class: 'clip-fx', intensity: 'med', tooltip: 'Transition hit | Into outro' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Bus 1: Dirtshaper DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 35 },
                            { bar: 33, value: 50 },
                            { bar: 96, value: 55 },
                            { bar: 97, value: 30 },
                            { bar: 112, value: 40 },
                            { bar: 113, value: 70 },
                            { bar: 176, value: 65 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Bus 1: Phase 98 SPD',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 40 },
                            { bar: 32, value: 55 },
                            { bar: 33, value: 70 },
                            { bar: 96, value: 75 },
                            { bar: 97, value: 45 },
                            { bar: 112, value: 60 },
                            { bar: 113, value: 90 },
                            { bar: 176, value: 85 }
                        ],
                        color: '#f87171'
                    },
                    { 
                        name: 'Bus 2: Supervoid DEC',
                        automation: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 64, value: 40 },
                            { bar: 96, value: 45 },
                            { bar: 97, value: 65 },
                            { bar: 112, value: 70 },
                            { bar: 113, value: 50 },
                            { bar: 176, value: 45 }
                        ],
                        color: '#f97316'
                    },
                    { 
                        name: 'Bus 2: Chrono Pitch FDBK',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 20 },
                            { bar: 64, value: 30 },
                            { bar: 96, value: 35 },
                            { bar: 97, value: 55 },
                            { bar: 112, value: 60 },
                            { bar: 113, value: 40 },
                            { bar: 176, value: 35 }
                        ],
                        color: '#fb923c'
                    },
                    { 
                        name: 'Bus 3: Pan Chorus WDTH',
                        automation: true,
                        points: [
                            { bar: 1, value: 35 },
                            { bar: 32, value: 45 },
                            { bar: 33, value: 55 },
                            { bar: 96, value: 60 },
                            { bar: 97, value: 75 },
                            { bar: 112, value: 80 },
                            { bar: 113, value: 65 },
                            { bar: 176, value: 55 }
                        ],
                        color: '#eab308'
                    },
                    { 
                        name: 'Bus 3: Steel Box DEC',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 32, value: 40 },
                            { bar: 33, value: 50 },
                            { bar: 96, value: 55 },
                            { bar: 97, value: 70 },
                            { bar: 112, value: 75 },
                            { bar: 113, value: 55 },
                            { bar: 176, value: 45 }
                        ],
                        color: '#facc15'
                    },
                    { 
                        name: 'Bus 4: Phase 98 FREQ',
                        automation: true,
                        points: [
                            { bar: 1, value: 40 },
                            { bar: 32, value: 50 },
                            { bar: 33, value: 60 },
                            { bar: 96, value: 65 },
                            { bar: 97, value: 45 },
                            { bar: 112, value: 55 },
                            { bar: 113, value: 80 },
                            { bar: 176, value: 70 }
                        ],
                        color: '#a855f7'
                    },
                    { 
                        name: 'Bus 4: Daisy Delay FDBK',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 35 },
                            { bar: 33, value: 45 },
                            { bar: 96, value: 50 },
                            { bar: 97, value: 65 },
                            { bar: 112, value: 70 },
                            { bar: 113, value: 50 },
                            { bar: 176, value: 40 }
                        ],
                        color: '#c084fc'
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Send 1: FDBK',
                        automation: true,
                        points: [
                            { bar: 1, value: 35 },
                            { bar: 32, value: 40 },
                            { bar: 33, value: 45 },
                            { bar: 64, value: 50 },
                            { bar: 96, value: 55 },
                            { bar: 97, value: 60 },
                            { bar: 105, value: 70 },
                            { bar: 112, value: 65 },
                            { bar: 113, value: 40 },
                            { bar: 144, value: 45 },
                            { bar: 176, value: 30 }
                        ],
                        color: '#06b6d4'
                    },
                    { 
                        name: 'Send 1: TIME',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 25 },
                            { bar: 33, value: 40 },
                            { bar: 96, value: 40 },
                            { bar: 97, value: 60 },
                            { bar: 112, value: 60 },
                            { bar: 113, value: 35 },
                            { bar: 144, value: 35 },
                            { bar: 145, value: 45 },
                            { bar: 176, value: 30 }
                        ],
                        color: '#38bdf8'
                    },
                    { 
                        name: 'Send 2: SIZE',
                        automation: true,
                        points: [
                            { bar: 1, value: 40 },
                            { bar: 32, value: 45 },
                            { bar: 33, value: 25 },
                            { bar: 64, value: 30 },
                            { bar: 96, value: 35 },
                            { bar: 97, value: 60 },
                            { bar: 105, value: 75 },
                            { bar: 112, value: 70 },
                            { bar: 113, value: 40 },
                            { bar: 144, value: 45 },
                            { bar: 176, value: 50 }
                        ],
                        color: '#a78bfa'
                    },
                    { 
                        name: 'Send 2: DAMP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 50 },
                            { bar: 32, value: 55 },
                            { bar: 33, value: 30 },
                            { bar: 96, value: 35 },
                            { bar: 97, value: 75 },
                            { bar: 112, value: 80 },
                            { bar: 113, value: 45 },
                            { bar: 176, value: 50 }
                        ],
                        color: '#8b5cf6'
                    },
                    { 
                        name: 'Send 3: FREQ',
                        automation: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 16, value: 35 },
                            { bar: 32, value: 40 },
                            { bar: 48, value: 70 },
                            { bar: 64, value: 75 },
                            { bar: 96, value: 80 },
                            { bar: 104, value: 30 },
                            { bar: 112, value: 50 },
                            { bar: 128, value: 95 },
                            { bar: 144, value: 85 },
                            { bar: 176, value: 20 }
                        ],
                        color: '#f59e0b'
                    },
                    { 
                        name: 'Mix: DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 10 },
                            { bar: 32, value: 15 },
                            { bar: 64, value: 25 },
                            { bar: 96, value: 20 },
                            { bar: 112, value: 35 },
                            { bar: 128, value: 50 },
                            { bar: 144, value: 40 },
                            { bar: 176, value: 15 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Mix: DROP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 0 },
                            { bar: 30, value: 0 },
                            { bar: 31, value: 100 },
                            { bar: 32, value: 100 },
                            { bar: 33, value: 0 },
                            { bar: 94, value: 0 },
                            { bar: 95, value: 100 },
                            { bar: 96, value: 100 },
                            { bar: 97, value: 0 },
                            { bar: 110, value: 0 },
                            { bar: 111, value: 100 },
                            { bar: 112, value: 100 },
                            { bar: 113, value: 0 },
                            { bar: 142, value: 0 },
                            { bar: 143, value: 100 },
                            { bar: 144, value: 100 },
                            { bar: 145, value: 0 },
                            { bar: 176, value: 0 }
                        ],
                        color: '#ec4899'
                    }
                ]
            },
            rumble: {
                totalBars: 144,
                bpm: 140,
                sections: [
                    { bar: 1, name: 'INTRO', class: 'section-intro' },
                    { bar: 17, name: 'VOX TEASE', class: 'section-build' },
                    { bar: 33, name: 'DROP 1', class: 'section-main' },
                    { bar: 65, name: 'BREAK', class: 'section-breakdown' },
                    { bar: 81, name: 'BUILD', class: 'section-build' },
                    { bar: 97, name: 'MAIN DROP', class: 'section-peak' },
                    { bar: 129, name: 'OUTRO', class: 'section-outro' }
                ],
                songRows: [
                    { row: 1, pattern: 'E01', label: 'Intro', section: 'intro' },
                    { row: 2, pattern: 'E02', label: 'VoxTse', section: 'build' },
                    { row: 3, pattern: 'E03', label: 'Drop1', section: 'main' },
                    { row: 4, pattern: 'E04', label: 'Drop1', section: 'main' },
                    { row: 5, pattern: 'E05', label: 'Break', section: 'breakdown' },
                    { row: 6, pattern: 'E06', label: 'Build', section: 'build' },
                    { row: 7, pattern: 'E07', label: 'Main', section: 'peak' },
                    { row: 8, pattern: 'E08', label: 'Main', section: 'peak' },
                    { row: 9, pattern: 'E09', label: 'Outro', section: 'outro' }
                ],
                lanes: [
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Kick',
                        clips: [
                            { start: 1, end: 16, label: 'Kick Intro', pattern: 'E01', class: 'clip-kick', intensity: 'med', tooltip: 'Punchy kick | No sub yet | Building energy | 138 BPM' },
                            { start: 17, end: 32, label: 'Kick + Rumble', pattern: 'E02', class: 'clip-kick', intensity: 'med', tooltip: 'Kick tightens | Room for sub bass | Sidechain prepped' },
                            { start: 33, end: 64, label: 'Kick Full', pattern: 'E02', class: 'clip-kick', intensity: 'high', tooltip: 'Full energy kick | Locked with rumble | Tight transient' },
                            { start: 65, end: 80, label: 'Kick Out', pattern: 'E01', class: 'clip-kick', intensity: 'low', tooltip: 'Breakdown | Sparse kicks or none | Tension building' },
                            { start: 81, end: 96, label: 'Kick Build', pattern: 'E03', class: 'clip-kick', intensity: 'med', tooltip: 'Building pattern | Snare roll layered | Into main drop' },
                            { start: 97, end: 128, label: 'Kick Peak', pattern: 'E02', class: 'clip-kick', intensity: 'high', tooltip: 'Maximum punch | Main drop energy | Festival destroyer' },
                            { start: 129, end: 144, label: 'Kick Outro', pattern: 'E01', class: 'clip-kick', intensity: 'med', tooltip: 'Outro groove | Winding down' }
                        ]
                    },
                    { 
                        name: 'RUMBLE BASS',
                        clips: [
                            { start: 17, end: 32, label: 'Sub Tease', pattern: 'E01', class: 'clip-bass', intensity: 'low', tooltip: 'FILTER REVEAL | LP 25% | Sub hints' },
                            { start: 33, end: 64, label: 'Rumble Full', pattern: 'E02', class: 'clip-bass', intensity: 'high', tooltip: 'Filter 80% | FULL RUMBLE | Chest-rattling' },
                            { start: 65, end: 80, label: 'Sub Sustain', pattern: 'E03', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 40% | Breakdown sub | Long notes' },
                            { start: 81, end: 96, label: 'Rumble Rise', pattern: 'E04', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 40%â†’80% | Building' },
                            { start: 97, end: 128, label: 'RUMBLE MAX', pattern: 'E02', class: 'clip-bass', intensity: 'high', tooltip: 'Filter 100% | MAXIMUM SUB' },
                            { start: 129, end: 140, label: 'Sub Out', pattern: 'E01', class: 'clip-bass', intensity: 'med', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'Rumble Filter',
                            color: '#a855f7',
                            points: [
                                { bar: 17, value: 25 },
                                { bar: 32, value: 45 },
                                { bar: 33, value: 80 },
                                { bar: 64, value: 85 },
                                { bar: 65, value: 40 },
                                { bar: 80, value: 45 },
                                { bar: 88, value: 60 },
                                { bar: 96, value: 80 },
                                { bar: 97, value: 100 },
                                { bar: 128, value: 95 },
                                { bar: 129, value: 60 },
                                { bar: 140, value: 20 }
                            ]
                        }
                    },
                    { 
                        name: 'Mid Bass',
                        clips: [
                            { start: 33, end: 64, label: 'Mid Layer', pattern: 'E01', class: 'clip-bass', intensity: 'med', tooltip: '80-200Hz layer | Adds definition to rumble | Slight grit' },
                            { start: 97, end: 128, label: 'Mid Growl', pattern: 'E02', class: 'clip-bass', intensity: 'high', tooltip: 'More aggressive mid | Harmonics for small speakers | Drive: 30%' }
                        ],
                        automation: {
                            name: 'Mid Bass Filter',
                            color: '#f97316',
                            points: [
                                { bar: 33, value: 50 },
                                { bar: 48, value: 65 },
                                { bar: 64, value: 70 },
                                { bar: 97, value: 75 },
                                { bar: 112, value: 90 },
                                { bar: 128, value: 85 }
                            ]
                        }
                    },
                    { 
                        name: 'Hats/Tops',
                        clips: [
                            { start: 1, end: 16, label: 'HH Intro', pattern: 'E01', class: 'clip-hats', intensity: 'low', tooltip: 'FILTER REVEAL | LP 30% | Sparse' },
                            { start: 17, end: 64, label: 'HH Groove', pattern: 'E02', class: 'clip-hats', intensity: 'med', tooltip: 'Filter 70% | 16th hats' },
                            { start: 97, end: 128, label: 'HH Peak', pattern: 'E03', class: 'clip-hats', intensity: 'high', tooltip: 'Filter 100% | Maximum drive' },
                            { start: 129, end: 144, label: 'HH Strip', pattern: 'E01', class: 'clip-hats', intensity: 'med', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'HH Filter',
                            color: '#fbbf24',
                            points: [
                                { bar: 1, value: 30 },
                                { bar: 16, value: 45 },
                                { bar: 17, value: 70 },
                                { bar: 64, value: 75 },
                                { bar: 97, value: 100 },
                                { bar: 128, value: 95 },
                                { bar: 129, value: 55 },
                                { bar: 144, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'Clap/Snare',
                        clips: [
                            { start: 17, end: 64, label: 'Clap 2&4', pattern: 'E01', class: 'clip-clap', intensity: 'med', tooltip: 'Big clap | Reverb tail | Rave energy' },
                            { start: 81, end: 96, label: 'Snare Roll', pattern: 'E02', class: 'clip-clap', intensity: 'high', tooltip: 'Building snare roll | Tension to drop | Classic rave build' },
                            { start: 97, end: 128, label: 'Clap Heavy', pattern: 'E03', class: 'clip-clap', intensity: 'high', tooltip: 'Layered clap + snare | Maximum impact' },
                            { start: 129, end: 144, label: 'Clap Out', pattern: 'E01', class: 'clip-clap', intensity: 'med', tooltip: 'Standard clap | Outro' }
                        ]
                    },
                    { 
                        name: 'Vocals',
                        clips: [
                            { start: 17, end: 32, label: 'Vox Tease', pattern: 'V01', class: 'clip-vocal', intensity: 'med', tooltip: 'Vocal chops | Filtered | Building anticipation | Delay throws' },
                            { start: 33, end: 48, label: 'Vox Phrase 1', pattern: 'V02', class: 'clip-vocal', intensity: 'high', tooltip: 'Main vocal phrase | Euphoric delivery | Reverb swell' },
                            { start: 65, end: 80, label: 'Vox Break', pattern: 'V03', class: 'clip-vocal', intensity: 'high', tooltip: 'Full vocal | Breakdown focus | Emotional peak | No drums' },
                            { start: 81, end: 88, label: 'Vox Chop', pattern: 'V04', class: 'clip-vocal', intensity: 'med', tooltip: 'Chopped vocal | Building with snare roll' },
                            { start: 97, end: 112, label: 'Vox Drop', pattern: 'V02', class: 'clip-vocal', intensity: 'high', tooltip: 'Vocal over drop | Maximum euphoria | Delay + verb' },
                            { start: 129, end: 140, label: 'Vox Outro', pattern: 'V01', class: 'clip-vocal', intensity: 'med', tooltip: 'Vocal fading | Outro atmosphere' }
                        ],
                        automation: {
                            name: 'Vox Filter',
                            color: '#d55a9a',
                            points: [
                                { bar: 17, value: 40 },
                                { bar: 32, value: 55 },
                                { bar: 33, value: 75 },
                                { bar: 48, value: 85 },
                                { bar: 65, value: 90 },
                                { bar: 80, value: 95 },
                                { bar: 81, value: 60 },
                                { bar: 88, value: 70 },
                                { bar: 97, value: 100 },
                                { bar: 112, value: 90 },
                                { bar: 129, value: 55 },
                                { bar: 140, value: 40 }
                            ]
                        }
                    },
                    { 
                        name: 'Pad/Atmos',
                        clips: [
                            { start: 1, end: 16, label: 'Atmos Intro', pattern: 'P01', class: 'clip-texture', intensity: 'med', tooltip: 'Rave stab reverb | Setting mood | Anticipation' },
                            { start: 65, end: 96, label: 'Pad Swell', pattern: 'P02', class: 'clip-texture', intensity: 'high', tooltip: 'Big pad | Breakdown emotion | Filter sweep up | Into drop' },
                            { start: 129, end: 144, label: 'Pad Outro', pattern: 'P01', class: 'clip-texture', intensity: 'med', tooltip: 'Atmospheric fade | Reverb tails' }
                        ],
                        automation: {
                            name: 'Pad Filter',
                            color: '#8b5cf6',
                            points: [
                                { bar: 1, value: 45 },
                                { bar: 16, value: 55 },
                                { bar: 65, value: 50 },
                                { bar: 80, value: 75 },
                                { bar: 96, value: 90 },
                                { bar: 129, value: 55 },
                                { bar: 144, value: 65 }
                            ]
                        }
                    },
                    { 
                        name: 'Stabs/Chords',
                        clips: [
                            { start: 33, end: 64, label: 'Rave Stab', pattern: 'S01', class: 'clip-chord', intensity: 'med', tooltip: 'Classic rave stab | Offbeat hits | Filtered | Delay: 25%' },
                            { start: 97, end: 128, label: 'Stab Full', pattern: 'S02', class: 'clip-chord', intensity: 'high', tooltip: 'Full stabs | Euphoric chords | Maximum rave energy' }
                        ],
                        automation: {
                            name: 'Stab Filter',
                            color: '#14b8a6',
                            points: [
                                { bar: 33, value: 55 },
                                { bar: 48, value: 70 },
                                { bar: 64, value: 75 },
                                { bar: 97, value: 85 },
                                { bar: 112, value: 95 },
                                { bar: 128, value: 90 }
                            ]
                        }
                    },
                    { 
                        name: 'FX/Risers',
                        clips: [
                            { start: 25, end: 32, label: 'Riser 1', pattern: 'X01', class: 'clip-fx', intensity: 'med', tooltip: 'White noise rise | Into first drop' },
                            { start: 57, end: 64, label: 'Downsweep', pattern: 'X02', class: 'clip-fx', intensity: 'med', tooltip: 'Sub drop | Into breakdown' },
                            { start: 73, end: 80, label: 'Vocal Rev', pattern: 'X03', class: 'clip-fx', intensity: 'med', tooltip: 'Reverse vocal swell | Emotional build' },
                            { start: 89, end: 96, label: 'BIG RISER', pattern: 'X04', class: 'clip-fx', intensity: 'high', tooltip: 'Maximum tension | Noise + sub rise | Snare intensifying | Into main drop' },
                            { start: 121, end: 128, label: 'Impact', pattern: 'X05', class: 'clip-fx', intensity: 'med', tooltip: 'Transition FX | Into outro' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Bus 1: Dirtshaper DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 40 },
                            { bar: 32, value: 45 },
                            { bar: 64, value: 40 },
                            { bar: 96, value: 50 },
                            { bar: 97, value: 70 },
                            { bar: 128, value: 75 },
                            { bar: 144, value: 55 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Bus 1: Degrader BR',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 32, value: 35 },
                            { bar: 64, value: 30 },
                            { bar: 96, value: 40 },
                            { bar: 97, value: 55 },
                            { bar: 128, value: 60 },
                            { bar: 144, value: 45 }
                        ],
                        color: '#f87171'
                    },
                    { 
                        name: 'Bus 2: Freq Warper FREQ',
                        automation: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 32, value: 35 },
                            { bar: 64, value: 40 },
                            { bar: 65, value: 50 },
                            { bar: 80, value: 65 },
                            { bar: 96, value: 55 },
                            { bar: 97, value: 25 },
                            { bar: 128, value: 30 },
                            { bar: 144, value: 40 }
                        ],
                        color: '#f97316'
                    },
                    { 
                        name: 'Bus 2: Dirtshaper DRV',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 20 },
                            { bar: 32, value: 25 },
                            { bar: 64, value: 30 },
                            { bar: 65, value: 40 },
                            { bar: 80, value: 55 },
                            { bar: 96, value: 45 },
                            { bar: 97, value: 60 },
                            { bar: 128, value: 65 },
                            { bar: 144, value: 50 }
                        ],
                        color: '#fb923c'
                    },
                    { 
                        name: 'Bus 3: Phase 98 SPD',
                        automation: true,
                        points: [
                            { bar: 1, value: 45 },
                            { bar: 32, value: 55 },
                            { bar: 64, value: 75 },
                            { bar: 65, value: 35 },
                            { bar: 96, value: 50 },
                            { bar: 97, value: 100 },
                            { bar: 128, value: 95 },
                            { bar: 144, value: 60 }
                        ],
                        color: '#eab308'
                    },
                    { 
                        name: 'Bus 3: Degrader FREZ',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 0 },
                            { bar: 32, value: 15 },
                            { bar: 64, value: 30 },
                            { bar: 65, value: 10 },
                            { bar: 96, value: 25 },
                            { bar: 97, value: 50 },
                            { bar: 128, value: 45 },
                            { bar: 144, value: 20 }
                        ],
                        color: '#facc15'
                    },
                    { 
                        name: 'Bus 4: Sat Delay FDBK',
                        automation: true,
                        points: [
                            { bar: 1, value: 40 },
                            { bar: 32, value: 50 },
                            { bar: 64, value: 50 },
                            { bar: 65, value: 70 },
                            { bar: 80, value: 80 },
                            { bar: 96, value: 75 },
                            { bar: 97, value: 45 },
                            { bar: 128, value: 50 },
                            { bar: 144, value: 60 }
                        ],
                        color: '#a855f7'
                    },
                    { 
                        name: 'Bus 4: Supervoid DEC',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 35 },
                            { bar: 32, value: 45 },
                            { bar: 64, value: 45 },
                            { bar: 65, value: 65 },
                            { bar: 80, value: 75 },
                            { bar: 96, value: 70 },
                            { bar: 97, value: 40 },
                            { bar: 128, value: 45 },
                            { bar: 144, value: 55 }
                        ],
                        color: '#c084fc'
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Send 1: FDBK',
                        automation: true,
                        points: [
                            { bar: 1, value: 40 },
                            { bar: 32, value: 35 },
                            { bar: 64, value: 30 },
                            { bar: 80, value: 50 },
                            { bar: 96, value: 45 },
                            { bar: 97, value: 35 },
                            { bar: 128, value: 40 },
                            { bar: 144, value: 30 }
                        ],
                        color: '#06b6d4'
                    },
                    { 
                        name: 'Send 1: TIME',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 35 },
                            { bar: 32, value: 35 },
                            { bar: 64, value: 25 },
                            { bar: 65, value: 55 },
                            { bar: 96, value: 55 },
                            { bar: 97, value: 30 },
                            { bar: 128, value: 30 },
                            { bar: 144, value: 35 }
                        ],
                        color: '#38bdf8'
                    },
                    { 
                        name: 'Send 2: SIZE',
                        automation: true,
                        points: [
                            { bar: 1, value: 35 },
                            { bar: 32, value: 35 },
                            { bar: 64, value: 25 },
                            { bar: 65, value: 55 },
                            { bar: 80, value: 70 },
                            { bar: 96, value: 60 },
                            { bar: 97, value: 35 },
                            { bar: 128, value: 40 },
                            { bar: 144, value: 45 }
                        ],
                        color: '#a78bfa'
                    },
                    { 
                        name: 'Send 2: DAMP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 50 },
                            { bar: 32, value: 45 },
                            { bar: 64, value: 30 },
                            { bar: 65, value: 75 },
                            { bar: 96, value: 70 },
                            { bar: 97, value: 40 },
                            { bar: 144, value: 45 }
                        ],
                        color: '#8b5cf6'
                    },
                    { 
                        name: 'Send 3: FREQ',
                        automation: true,
                        points: [
                            { bar: 1, value: 20 },
                            { bar: 32, value: 50 },
                            { bar: 48, value: 85 },
                            { bar: 64, value: 90 },
                            { bar: 72, value: 40 },
                            { bar: 96, value: 60 },
                            { bar: 112, value: 95 },
                            { bar: 128, value: 90 },
                            { bar: 144, value: 25 }
                        ],
                        color: '#f59e0b'
                    },
                    { 
                        name: 'Mix: DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 5 },
                            { bar: 32, value: 15 },
                            { bar: 48, value: 25 },
                            { bar: 64, value: 20 },
                            { bar: 80, value: 10 },
                            { bar: 96, value: 30 },
                            { bar: 112, value: 40 },
                            { bar: 128, value: 35 },
                            { bar: 144, value: 10 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Mix: DROP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 0 },
                            { bar: 30, value: 0 },
                            { bar: 31, value: 100 },
                            { bar: 32, value: 100 },
                            { bar: 33, value: 0 },
                            { bar: 62, value: 0 },
                            { bar: 63, value: 100 },
                            { bar: 64, value: 100 },
                            { bar: 65, value: 0 },
                            { bar: 94, value: 0 },
                            { bar: 95, value: 100 },
                            { bar: 96, value: 100 },
                            { bar: 97, value: 0 },
                            { bar: 126, value: 0 },
                            { bar: 127, value: 100 },
                            { bar: 128, value: 100 },
                            { bar: 129, value: 0 },
                            { bar: 144, value: 0 }
                        ],
                        color: '#ec4899'
                    }
                ]
            },
            dubtechno: {
                totalBars: 256,
                bpm: 120,
                sections: [
                    { bar: 1, name: 'INTRO', class: 'section-intro' },
                    { bar: 33, name: 'BUILD', class: 'section-build' },
                    { bar: 65, name: 'MAIN', class: 'section-main' },
                    { bar: 129, name: 'DUB OUT', class: 'section-breakdown' },
                    { bar: 161, name: 'DEEP', class: 'section-peak' },
                    { bar: 225, name: 'OUTRO', class: 'section-outro' }
                ],
                songRows: [
                    { row: 1, pattern: 'C01', label: 'Intro', section: 'intro' },
                    { row: 2, pattern: 'C02', label: 'Intro', section: 'intro' },
                    { row: 3, pattern: 'C03', label: 'Build', section: 'build' },
                    { row: 4, pattern: 'C04', label: 'Build', section: 'build' },
                    { row: 5, pattern: 'C05', label: 'Main', section: 'main' },
                    { row: 6, pattern: 'C06', label: 'Main', section: 'main' },
                    { row: 7, pattern: 'C07', label: 'Main', section: 'main' },
                    { row: 8, pattern: 'C08', label: 'Main', section: 'main' },
                    { row: 9, pattern: 'C09', label: 'DubOut', section: 'breakdown' },
                    { row: 10, pattern: 'C10', label: 'DubOut', section: 'breakdown' },
                    { row: 11, pattern: 'C11', label: 'Deep', section: 'peak' },
                    { row: 12, pattern: 'C12', label: 'Deep', section: 'peak' },
                    { row: 13, pattern: 'C13', label: 'Deep', section: 'peak' },
                    { row: 14, pattern: 'C14', label: 'Deep', section: 'peak' },
                    { row: 15, pattern: 'C15', label: 'Outro', section: 'outro' },
                    { row: 16, pattern: 'C16', label: 'Outro', section: 'outro' }
                ],
                lanes: [
                    { type: 'header', device: 'syntakt' },
                    { 
                        name: 'Kick',
                        clips: [
                            { start: 1, end: 30, label: 'Kick Intro', pattern: 'A01', class: 'clip-kick', intensity: 'low', tooltip: 'Muted kick | HP 150Hz | Distant' },
                            // 2 bar silence before BUILD
                            { start: 33, end: 62, label: 'Kick Build', pattern: 'A01', class: 'clip-kick', intensity: 'med', tooltip: 'HP opening | 150â†’60Hz' },
                            // 2 bar silence before MAIN
                            { start: 65, end: 128, label: 'Kick Main', pattern: 'A02', class: 'clip-kick', intensity: 'med', tooltip: 'Steady 4/4 | Room for dub space' },
                            { start: 129, end: 158, label: 'Kick Dub', pattern: 'A01', class: 'clip-kick', intensity: 'low', tooltip: 'Filtered | Delay throws | Dubby' },
                            // 2 bar silence before DEEP
                            { start: 161, end: 222, label: 'Kick Deep', pattern: 'A02', class: 'clip-kick', intensity: 'med', tooltip: 'Full kick | Deep groove' },
                            // 2 bar silence before OUTRO
                            { start: 225, end: 256, label: 'Kick Fade', pattern: 'A01', class: 'clip-kick', intensity: 'low', tooltip: 'HP rising | Fading out' }
                        ]
                    },
                    { 
                        name: 'Hats',
                        clips: [
                            { start: 9, end: 32, label: 'HH Hint', pattern: 'A01', class: 'clip-hats', intensity: 'low', tooltip: 'FILTER REVEAL | LP 20% | Sparse' },
                            { start: 33, end: 64, label: 'HH Build', pattern: 'A02', class: 'clip-hats', intensity: 'med', tooltip: 'Filter 20%â†’50% | Opening' },
                            { start: 65, end: 128, label: 'HH Groove', pattern: 'B01', class: 'clip-hats', intensity: 'med', tooltip: 'Filter 70% | Shuffled | Delay sends' },
                            { start: 129, end: 160, label: 'HH Dub', pattern: 'C01', class: 'clip-hats', intensity: 'low', tooltip: 'Filter closes | Heavy delay' },
                            { start: 161, end: 224, label: 'HH Deep', pattern: 'B01', class: 'clip-hats', intensity: 'med', tooltip: 'Filter 80% | Full groove' },
                            { start: 225, end: 248, label: 'HH Strip', pattern: 'A01', class: 'clip-hats', intensity: 'low', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'HH Filter',
                            color: '#fbbf24',
                            points: [
                                { bar: 9, value: 20 },
                                { bar: 32, value: 35 },
                                { bar: 48, value: 45 },
                                { bar: 64, value: 50 },
                                { bar: 65, value: 70 },
                                { bar: 128, value: 75 },
                                { bar: 129, value: 30 },
                                { bar: 160, value: 40 },
                                { bar: 161, value: 80 },
                                { bar: 224, value: 75 },
                                { bar: 248, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'Rimshot',
                        clips: [
                            { start: 33, end: 64, label: 'Rim Intro', pattern: 'A02', class: 'clip-clap', intensity: 'low', tooltip: 'DELAY FB SWELL | FB rises | Dubby' },
                            { start: 65, end: 128, label: 'Rim Main', pattern: 'B01', class: 'clip-clap', intensity: 'med', tooltip: 'Classic dub rim | Delay: 3/16 | FB: 40%' },
                            { start: 129, end: 160, label: 'Rim Echo', pattern: 'C01', class: 'clip-clap', intensity: 'med', tooltip: 'FB swell to 70% | Dub out section' },
                            { start: 161, end: 224, label: 'Rim Deep', pattern: 'B01', class: 'clip-clap', intensity: 'med', tooltip: 'Standard groove | FB: 45%' },
                            { start: 225, end: 248, label: 'Rim Fade', pattern: 'A02', class: 'clip-clap', intensity: 'low', tooltip: 'FB trails off | Outro' }
                        ]
                    },
                    { 
                        name: 'Perc',
                        clips: [
                            { start: 17, end: 64, label: 'Perc Hint', pattern: 'A02', class: 'clip-perc', intensity: 'low', tooltip: 'FILTER REVEAL | Congas/Bongos | LP 25%' },
                            { start: 65, end: 128, label: 'Perc Groove', pattern: 'B01', class: 'clip-perc', intensity: 'med', tooltip: 'Filter 60% | Polyrhythmic | Delay throws' },
                            { start: 129, end: 160, label: 'Perc Dub', pattern: 'C01', class: 'clip-perc', intensity: 'med', tooltip: 'Heavy delay | Sparse hits | Space' },
                            { start: 161, end: 224, label: 'Perc Full', pattern: 'B02', class: 'clip-perc', intensity: 'med', tooltip: 'Filter 75% | Full pattern' },
                            { start: 225, end: 248, label: 'Perc Strip', pattern: 'A01', class: 'clip-perc', intensity: 'low', tooltip: 'Filter closing | Fading' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Bass',
                        clips: [
                            { start: 17, end: 32, label: 'Bass Hint', pattern: 'A01', class: 'clip-bass', intensity: 'low', tooltip: 'FILTER REVEAL | LP 15% | Sub pulse' },
                            { start: 33, end: 64, label: 'Bass Build', pattern: 'A02', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 15%â†’45% | Dub bass emerging' },
                            { start: 65, end: 128, label: 'Bass Main', pattern: 'B01', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 70% | Classic dub bass | Delay: 20%' },
                            { start: 129, end: 160, label: 'Bass Sub', pattern: 'C01', class: 'clip-bass', intensity: 'low', tooltip: 'Filter closes to 25% | Sub only | Dub out' },
                            { start: 161, end: 224, label: 'Bass Deep', pattern: 'B02', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 80% | Deep groove' },
                            { start: 225, end: 256, label: 'Bass Fade', pattern: 'A01', class: 'clip-bass', intensity: 'low', tooltip: 'Filter 60%â†’15% | Outro' }
                        ],
                        automation: {
                            name: 'Bass Filter',
                            color: '#a855f7',
                            points: [
                                { bar: 17, value: 15 },
                                { bar: 32, value: 25 },
                                { bar: 48, value: 35 },
                                { bar: 64, value: 45 },
                                { bar: 65, value: 70 },
                                { bar: 128, value: 75 },
                                { bar: 129, value: 25 },
                                { bar: 160, value: 35 },
                                { bar: 161, value: 80 },
                                { bar: 224, value: 75 },
                                { bar: 240, value: 40 },
                                { bar: 256, value: 15 }
                            ]
                        }
                    },
                    { 
                        name: 'Chords',
                        clips: [
                            { start: 33, end: 64, label: 'Chord Hint', pattern: 'A02', class: 'clip-chord', intensity: 'low', tooltip: 'REVERB REVEAL | 100% wet | Minor 7ths' },
                            { start: 65, end: 128, label: 'Chord Main', pattern: 'B01', class: 'clip-chord', intensity: 'med', tooltip: 'Reverb 80%â†’40% | Dub stabs | Delay throws' },
                            { start: 129, end: 160, label: 'Chord Wash', pattern: 'C01', class: 'clip-chord', intensity: 'med', tooltip: 'Reverb 90% | Held chords | Atmospheric' },
                            { start: 161, end: 224, label: 'Chord Deep', pattern: 'B01', class: 'clip-chord', intensity: 'med', tooltip: 'Reverb 50% | Rhythmic stabs' },
                            { start: 225, end: 248, label: 'Chord Fade', pattern: 'A02', class: 'clip-chord', intensity: 'low', tooltip: 'Reverb rising | Outro' }
                        ],
                        automation: {
                            name: 'Chord Filter',
                            color: '#14b8a6',
                            points: [
                                { bar: 33, value: 30 },
                                { bar: 64, value: 50 },
                                { bar: 65, value: 70 },
                                { bar: 128, value: 75 },
                                { bar: 129, value: 45 },
                                { bar: 160, value: 55 },
                                { bar: 161, value: 80 },
                                { bar: 224, value: 70 },
                                { bar: 248, value: 30 }
                            ]
                        }
                    },
                    { 
                        name: 'Dub FX',
                        clips: [
                            { start: 1, end: 32, label: 'Atmos Intro', pattern: 'D01', class: 'clip-texture', intensity: 'low', tooltip: 'Reverb wash | Setting dub mood' },
                            { start: 65, end: 96, label: 'Siren', pattern: 'D02', class: 'clip-texture', intensity: 'med', tooltip: 'Dub siren | Filter sweep | Classic' },
                            { start: 129, end: 160, label: 'Spring Verb', pattern: 'D03', class: 'clip-texture', intensity: 'high', tooltip: 'Spring reverb hits | Dub out section' },
                            { start: 193, end: 224, label: 'Echo FX', pattern: 'D04', class: 'clip-texture', intensity: 'med', tooltip: 'Delay throws | Building to end' },
                            { start: 241, end: 256, label: 'Wash Out', pattern: 'D01', class: 'clip-texture', intensity: 'low', tooltip: 'Final reverb wash | Outro' }
                        ]
                    },
                    { 
                        name: 'FX/Trans',
                        clips: [
                            { start: 31, end: 32, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'low', tooltip: 'Kick gap before BUILD' },
                            { start: 63, end: 64, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'med', tooltip: 'Kick gap before MAIN' },
                            { start: 159, end: 160, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'med', tooltip: 'Kick gap before DEEP' },
                            { start: 223, end: 224, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'low', tooltip: 'Kick gap before OUTRO' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'T9: Bus 1 (Drums)',
                        clips: [
                            { start: 1, end: 64, label: 'Bus1 Intro', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Kick+Hats+Rim routed | Insert FX1: Compressor | Dub glue' },
                            { start: 65, end: 128, label: 'Bus1 Main', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Full drum bus | Insert FX2: Saturator | Warmth' },
                            { start: 129, end: 160, label: 'Bus1 Dub', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Dub out section | Light processing' },
                            { start: 161, end: 256, label: 'Bus1 Deep', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Deep groove | Balanced compression' }
                        ]
                    },
                    { 
                        name: 'T10: Bus 2 (Bass)',
                        clips: [
                            { start: 1, end: 64, label: 'Bus2 Sub', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Bass routed | Insert FX1: Low-pass Filter | Sub control' },
                            { start: 65, end: 128, label: 'Bus2 Main', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Full bass bus | Insert FX2: Saturator | Dub warmth' },
                            { start: 129, end: 160, label: 'Bus2 Dub', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Sub only | Dub out section' },
                            { start: 161, end: 256, label: 'Bus2 Deep', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Deep bass | Full presence' }
                        ]
                    },
                    { 
                        name: 'T11: Bus 3 (Perc)',
                        clips: [
                            { start: 17, end: 64, label: 'Bus3 Intro', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Perc routed | Insert FX1: Comb Filter | Metallic dub' },
                            { start: 65, end: 128, label: 'Bus3 Main', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Full perc bus | Delay sends active' },
                            { start: 129, end: 160, label: 'Bus3 Echo', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Heavy delay | Dub out texture' },
                            { start: 161, end: 256, label: 'Bus3 Deep', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Deep perc | Polyrhythmic' }
                        ]
                    },
                    { 
                        name: 'T12: Bus 4 (Chords/FX)',
                        clips: [
                            { start: 1, end: 64, label: 'Bus4 Atmos', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Chords+Dub FX routed | Insert FX1: Supervoid | Space' },
                            { start: 65, end: 128, label: 'Bus4 Main', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Full atmosphere | Insert FX2: Chorus | Width' },
                            { start: 129, end: 160, label: 'Bus4 Wash', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Dub out | Maximum reverb | Atmospheric' },
                            { start: 161, end: 256, label: 'Bus4 Deep', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Deep atmosphere | Balanced' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'T13: Delay',
                        clips: [
                            { start: 1, end: 64, label: 'Dly Short', pattern: 'SND', class: 'clip-texture', intensity: 'low', tooltip: 'Time: 3/16 | FB: 35% | Dub space' },
                            { start: 65, end: 128, label: 'Dly Main', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'Time: 3/16 | FB: 50% | Classic dub' },
                            { start: 129, end: 160, label: 'Dly Heavy', pattern: 'SND', class: 'clip-texture', intensity: 'high', tooltip: 'FB SWELL to 75% | Dub out madness' },
                            { start: 161, end: 224, label: 'Dly Deep', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'FB: 55% | Deep groove' },
                            { start: 225, end: 256, label: 'Dly Fade', pattern: 'SND', class: 'clip-texture', intensity: 'low', tooltip: 'FB trailing off | Outro' }
                        ],
                        automation: {
                            name: 'Delay Feedback',
                            color: '#06b6d4',
                            points: [
                                { bar: 1, value: 35 },
                                { bar: 64, value: 45 },
                                { bar: 65, value: 50 },
                                { bar: 128, value: 55 },
                                { bar: 129, value: 60 },
                                { bar: 144, value: 70 },
                                { bar: 160, value: 75 },
                                { bar: 161, value: 55 },
                                { bar: 224, value: 50 },
                                { bar: 256, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'T14: Reverb',
                        clips: [
                            { start: 1, end: 256, label: 'Dub Verb', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'Large Hall | Decay: 4s | The dub space' }
                        ],
                        automation: {
                            name: 'Reverb Send',
                            color: '#4ade80',
                            points: [
                                { bar: 1, value: 30 },
                                { bar: 64, value: 40 },
                                { bar: 128, value: 45 },
                                { bar: 129, value: 70 },
                                { bar: 160, value: 65 },
                                { bar: 224, value: 50 },
                                { bar: 256, value: 60 }
                            ]
                        }
                    },
                    { 
                        name: 'T15: Send 3 (Saturation)',
                        clips: [
                            { start: 1, end: 64, label: 'Sat Light', pattern: 'SND', class: 'clip-texture', intensity: 'low', tooltip: 'Tape saturation | Warmth: 20% | Dub warmth' },
                            { start: 65, end: 128, label: 'Sat Main', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'Drive: 35% | Analog feel | Classic dub' },
                            { start: 129, end: 160, label: 'Sat Heavy', pattern: 'SND', class: 'clip-texture', intensity: 'high', tooltip: 'Drive: 50% | Gritty dub out' },
                            { start: 161, end: 256, label: 'Sat Groove', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'Drive: 40% | Deep warmth' }
                        ],
                        automation: {
                            name: 'Saturation',
                            color: '#f97316',
                            points: [
                                { bar: 1, value: 20 },
                                { bar: 64, value: 25 },
                                { bar: 65, value: 35 },
                                { bar: 128, value: 40 },
                                { bar: 129, value: 50 },
                                { bar: 160, value: 45 },
                                { bar: 161, value: 40 },
                                { bar: 256, value: 30 }
                            ]
                        }
                    },
                    { 
                        name: 'T16: DROP',
                        clips: [
                            { start: 1, end: 256, label: 'Degrader', pattern: 'MIX', class: 'clip-kick', intensity: 'med', tooltip: 'DROP at silence bars' }
                        ],
                        automation: {
                            name: 'DROP Amount',
                            color: '#ec4899',
                            points: [
                                { bar: 1, value: 0 },
                                { bar: 30, value: 0 },
                                { bar: 31, value: 100 },
                                { bar: 32, value: 100 },
                                { bar: 33, value: 0 },
                                { bar: 62, value: 0 },
                                { bar: 63, value: 100 },
                                { bar: 64, value: 100 },
                                { bar: 65, value: 0 },
                                { bar: 158, value: 0 },
                                { bar: 159, value: 100 },
                                { bar: 160, value: 100 },
                                { bar: 161, value: 0 },
                                { bar: 222, value: 0 },
                                { bar: 223, value: 100 },
                                { bar: 224, value: 100 },
                                { bar: 225, value: 0 },
                                { bar: 256, value: 0 }
                            ]
                        }
                    }
                ]
            },
            dnb: {
                totalBars: 128,
                bpm: 174,
                sections: [
                    { bar: 1, name: 'INTRO', class: 'section-intro' },
                    { bar: 17, name: 'BUILD', class: 'section-build' },
                    { bar: 33, name: 'DROP 1', class: 'section-main' },
                    { bar: 65, name: 'BREAK', class: 'section-breakdown' },
                    { bar: 81, name: 'BUILD 2', class: 'section-build' },
                    { bar: 97, name: 'DROP 2', class: 'section-peak' },
                    { bar: 113, name: 'OUTRO', class: 'section-outro' }
                ],
                songRows: [
                    { row: 1, pattern: 'D01', label: 'Intro', section: 'intro' },
                    { row: 2, pattern: 'D02', label: 'Build', section: 'build' },
                    { row: 3, pattern: 'D03', label: 'Drop1', section: 'main' },
                    { row: 4, pattern: 'D04', label: 'Drop1', section: 'main' },
                    { row: 5, pattern: 'D05', label: 'Break', section: 'breakdown' },
                    { row: 6, pattern: 'D06', label: 'Build2', section: 'build' },
                    { row: 7, pattern: 'D07', label: 'Drop2', section: 'peak' },
                    { row: 8, pattern: 'D08', label: 'Outro', section: 'outro' }
                ],
                lanes: [
                    { type: 'header', device: 'syntakt' },
                    { 
                        name: 'Kick',
                        clips: [
                            { start: 1, end: 16, label: 'Kick Intro', pattern: 'A01', class: 'clip-kick', intensity: 'low', tooltip: 'Half-time feel | Filtered | Building' },
                            { start: 17, end: 30, label: 'Kick Build', pattern: 'A02', class: 'clip-kick', intensity: 'med', tooltip: 'Building energy | HP opening' },
                            // 2 bar silence before DROP 1
                            { start: 33, end: 64, label: 'Kick Drop', pattern: 'B01', class: 'clip-kick', intensity: 'high', tooltip: 'DnB kick pattern | Syncopated | Punchy' },
                            { start: 65, end: 80, label: 'Kick Break', pattern: 'A01', class: 'clip-kick', intensity: 'low', tooltip: 'Breakdown | Sparse or none' },
                            { start: 81, end: 94, label: 'Kick Build2', pattern: 'A02', class: 'clip-kick', intensity: 'med', tooltip: 'Building back | Tension' },
                            // 2 bar silence before DROP 2
                            { start: 97, end: 112, label: 'Kick Peak', pattern: 'B02', class: 'clip-kick', intensity: 'high', tooltip: 'Maximum punch | Peak energy' },
                            { start: 113, end: 128, label: 'Kick Outro', pattern: 'A01', class: 'clip-kick', intensity: 'med', tooltip: 'Outro groove | Winding down' }
                        ]
                    },
                    { 
                        name: 'Snare',
                        clips: [
                            { start: 17, end: 32, label: 'Snare Build', pattern: 'A02', class: 'clip-clap', intensity: 'med', tooltip: 'DELAY FB SWELL | Building roll' },
                            { start: 33, end: 64, label: 'Snare Drop', pattern: 'B01', class: 'clip-clap', intensity: 'high', tooltip: 'Classic DnB snare | Beats 2 & 4 | Punchy' },
                            { start: 65, end: 80, label: 'Snare Break', pattern: 'C01', class: 'clip-clap', intensity: 'low', tooltip: 'Sparse hits | Reverb throws' },
                            { start: 81, end: 96, label: 'Snare Roll', pattern: 'A03', class: 'clip-clap', intensity: 'high', tooltip: 'Building roll | Into drop' },
                            { start: 97, end: 112, label: 'Snare Peak', pattern: 'B02', class: 'clip-clap', intensity: 'high', tooltip: 'Layered snare | Maximum impact' },
                            { start: 113, end: 128, label: 'Snare Out', pattern: 'A02', class: 'clip-clap', intensity: 'med', tooltip: 'Outro snare | Fading' }
                        ]
                    },
                    { 
                        name: 'Hats',
                        clips: [
                            { start: 9, end: 32, label: 'HH Hint', pattern: 'A01', class: 'clip-hats', intensity: 'low', tooltip: 'FILTER REVEAL | LP 25% | Sparse' },
                            { start: 33, end: 64, label: 'HH Drop', pattern: 'B01', class: 'clip-hats', intensity: 'high', tooltip: 'Filter 85% | Fast hats | 16ths' },
                            { start: 65, end: 80, label: 'HH Break', pattern: 'C01', class: 'clip-hats', intensity: 'low', tooltip: 'Filter down | Breakdown' },
                            { start: 81, end: 96, label: 'HH Build', pattern: 'A02', class: 'clip-hats', intensity: 'med', tooltip: 'Filter opening | Building' },
                            { start: 97, end: 112, label: 'HH Peak', pattern: 'B02', class: 'clip-hats', intensity: 'high', tooltip: 'Filter 100% | Maximum energy' },
                            { start: 113, end: 124, label: 'HH Strip', pattern: 'A01', class: 'clip-hats', intensity: 'med', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'HH Filter',
                            color: '#fbbf24',
                            points: [
                                { bar: 9, value: 25 },
                                { bar: 24, value: 40 },
                                { bar: 32, value: 55 },
                                { bar: 33, value: 85 },
                                { bar: 64, value: 90 },
                                { bar: 65, value: 35 },
                                { bar: 80, value: 40 },
                                { bar: 88, value: 60 },
                                { bar: 96, value: 75 },
                                { bar: 97, value: 100 },
                                { bar: 112, value: 95 },
                                { bar: 124, value: 30 }
                            ]
                        }
                    },
                    { 
                        name: 'Breaks',
                        clips: [
                            { start: 33, end: 64, label: 'Break Loop', pattern: 'B01', class: 'clip-perc', intensity: 'high', tooltip: 'Chopped amen/think | Classic DnB | Filtered' },
                            { start: 97, end: 112, label: 'Break Peak', pattern: 'B02', class: 'clip-perc', intensity: 'high', tooltip: 'Full break | Maximum chop energy' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Reese Bass',
                        clips: [
                            { start: 17, end: 32, label: 'Reese Hint', pattern: 'A01', class: 'clip-bass', intensity: 'low', tooltip: 'FILTER REVEAL | LP 20% | Sub growl hinting' },
                            { start: 33, end: 64, label: 'Reese Drop', pattern: 'B01', class: 'clip-bass', intensity: 'high', tooltip: 'Filter 80% | Classic reese | Detuned saws' },
                            { start: 65, end: 80, label: 'Reese Sub', pattern: 'C01', class: 'clip-bass', intensity: 'med', tooltip: 'Filter closes to 30% | Sub bed' },
                            { start: 81, end: 96, label: 'Reese Rise', pattern: 'A02', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 30%â†’70% | Building' },
                            { start: 97, end: 112, label: 'Reese Peak', pattern: 'B02', class: 'clip-bass', intensity: 'high', tooltip: 'Filter 100% | Maximum aggression' },
                            { start: 113, end: 128, label: 'Reese Out', pattern: 'A01', class: 'clip-bass', intensity: 'med', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'Reese Filter',
                            color: '#a855f7',
                            points: [
                                { bar: 17, value: 20 },
                                { bar: 32, value: 40 },
                                { bar: 33, value: 80 },
                                { bar: 64, value: 85 },
                                { bar: 65, value: 30 },
                                { bar: 80, value: 35 },
                                { bar: 88, value: 50 },
                                { bar: 96, value: 70 },
                                { bar: 97, value: 100 },
                                { bar: 112, value: 95 },
                                { bar: 128, value: 30 }
                            ]
                        }
                    },
                    { 
                        name: 'Sub Bass',
                        clips: [
                            { start: 33, end: 64, label: 'Sub Drop', pattern: 'B01', class: 'clip-bass', intensity: 'high', tooltip: 'Pure sub | 40-80Hz | Under reese' },
                            { start: 65, end: 96, label: 'Sub Hold', pattern: 'C01', class: 'clip-bass', intensity: 'med', tooltip: 'Sustained sub | Breakdown bed' },
                            { start: 97, end: 112, label: 'Sub Peak', pattern: 'B02', class: 'clip-bass', intensity: 'high', tooltip: 'Maximum sub | Festival weight' }
                        ]
                    },
                    { 
                        name: 'Pad/Atmos',
                        clips: [
                            { start: 1, end: 32, label: 'Pad Intro', pattern: 'D01', class: 'clip-texture', intensity: 'med', tooltip: 'Dark atmosphere | Setting mood' },
                            { start: 65, end: 80, label: 'Pad Break', pattern: 'D02', class: 'clip-texture', intensity: 'high', tooltip: 'Emotional pad | Breakdown focus' },
                            { start: 113, end: 128, label: 'Pad Outro', pattern: 'D01', class: 'clip-texture', intensity: 'med', tooltip: 'Outro atmosphere | Fading' }
                        ]
                    },
                    { 
                        name: 'Vocals',
                        clips: [
                            { start: 25, end: 32, label: 'Vox Tease', pattern: 'V01', class: 'clip-vocal', intensity: 'low', tooltip: 'REVERSE REVERB | Swell into drop' },
                            { start: 33, end: 48, label: 'Vox Hook', pattern: 'V02', class: 'clip-vocal', intensity: 'high', tooltip: 'Main vocal | Over drop' },
                            { start: 65, end: 80, label: 'Vox Break', pattern: 'V03', class: 'clip-vocal', intensity: 'high', tooltip: 'Full vocal | Breakdown emotion' },
                            { start: 89, end: 96, label: 'Vox RevVerb', pattern: 'V01', class: 'clip-vocal', intensity: 'low', tooltip: 'REVERSE REVERB | Into drop 2' },
                            { start: 97, end: 108, label: 'Vox Peak', pattern: 'V02', class: 'clip-vocal', intensity: 'high', tooltip: 'Vocal over peak drop' }
                        ]
                    },
                    { 
                        name: 'FX/Trans',
                        clips: [
                            { start: 31, end: 32, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'high', tooltip: 'Maximum tension before DROP 1' },
                            { start: 95, end: 96, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'high', tooltip: 'Maximum tension before DROP 2' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'T9: Bus 1 (Drums)',
                        clips: [
                            { start: 1, end: 32, label: 'Bus1 Intro', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Kick+Snare+Hats routed | Insert FX1: Compressor | DnB punch' },
                            { start: 33, end: 64, label: 'Bus1 Drop', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Full drum bus | Insert FX2: Saturator | Aggression' },
                            { start: 65, end: 96, label: 'Bus1 Break', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Breakdown | Light compression' },
                            { start: 97, end: 128, label: 'Bus1 Peak', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Maximum punch | Heavy compression' }
                        ]
                    },
                    { 
                        name: 'T10: Bus 2 (Bass)',
                        clips: [
                            { start: 17, end: 32, label: 'Bus2 Sub', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Reese+Sub routed | Insert FX1: Low-pass Filter | Sub control' },
                            { start: 33, end: 64, label: 'Bus2 Drop', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Full bass bus | Insert FX2: Distortion | Reese growl' },
                            { start: 65, end: 96, label: 'Bus2 Sub', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Sub bed | Breakdown' },
                            { start: 97, end: 128, label: 'Bus2 Peak', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Maximum bass | Festival weight' }
                        ]
                    },
                    { 
                        name: 'T11: Bus 3 (Breaks)',
                        clips: [
                            { start: 33, end: 64, label: 'Bus3 Chop', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Breaks routed | Insert FX1: Compressor | Chopped energy' },
                            { start: 97, end: 128, label: 'Bus3 Peak', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Full breaks | Maximum chop' }
                        ]
                    },
                    { 
                        name: 'T12: Bus 4 (Vox/Atmos)',
                        clips: [
                            { start: 1, end: 32, label: 'Bus4 Atmos', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Pads+Vocals routed | Insert FX1: Supervoid | Dark space' },
                            { start: 33, end: 64, label: 'Bus4 Drop', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Vocal over drop | Insert FX2: Chorus' },
                            { start: 65, end: 96, label: 'Bus4 Focus', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Breakdown | Vox+Pad focus | Emotional' },
                            { start: 97, end: 128, label: 'Bus4 Peak', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Peak atmosphere' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'T13: Delay',
                        clips: [
                            { start: 1, end: 128, label: 'DnB Delay', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'Time: 3/16 | Synced to 174' }
                        ],
                        automation: {
                            name: 'Delay Feedback',
                            color: '#06b6d4',
                            points: [
                                { bar: 1, value: 20 },
                                { bar: 32, value: 35 },
                                { bar: 64, value: 30 },
                                { bar: 65, value: 50 },
                                { bar: 80, value: 45 },
                                { bar: 96, value: 30 },
                                { bar: 112, value: 35 },
                                { bar: 128, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'T14: Reverb',
                        clips: [
                            { start: 1, end: 32, label: 'Verb Tight', pattern: 'SND', class: 'clip-texture', intensity: 'low', tooltip: 'Room | Decay: 0.8s | Tight DnB space' },
                            { start: 33, end: 64, label: 'Verb Main', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'Room | Decay: 1.2s | Drop energy' },
                            { start: 65, end: 80, label: 'Verb Long', pattern: 'SND', class: 'clip-texture', intensity: 'high', tooltip: 'Hall | Decay: 2.5s | Breakdown wash' },
                            { start: 81, end: 112, label: 'Verb Peak', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'Room | Decay: 1s | Peak clarity' },
                            { start: 113, end: 128, label: 'Verb Out', pattern: 'SND', class: 'clip-texture', intensity: 'low', tooltip: 'Hall | Decay: 2s | Outro fade' }
                        ],
                        automation: {
                            name: 'Reverb Send',
                            color: '#4ade80',
                            points: [
                                { bar: 1, value: 20 },
                                { bar: 32, value: 30 },
                                { bar: 33, value: 35 },
                                { bar: 64, value: 40 },
                                { bar: 65, value: 60 },
                                { bar: 80, value: 55 },
                                { bar: 81, value: 35 },
                                { bar: 112, value: 40 },
                                { bar: 128, value: 50 }
                            ]
                        }
                    },
                    { 
                        name: 'T15: Send 3 (Comp)',
                        clips: [
                            { start: 1, end: 128, label: 'Glue Comp', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'Parallel compression | Ratio: 4:1 | DnB punch' }
                        ],
                        automation: {
                            name: 'Compression',
                            color: '#f97316',
                            points: [
                                { bar: 1, value: 30 },
                                { bar: 32, value: 40 },
                                { bar: 33, value: 50 },
                                { bar: 64, value: 55 },
                                { bar: 65, value: 35 },
                                { bar: 80, value: 40 },
                                { bar: 81, value: 60 },
                                { bar: 112, value: 55 },
                                { bar: 128, value: 35 }
                            ]
                        }
                    },
                    { 
                        name: 'T16: DROP',
                        clips: [
                            { start: 1, end: 128, label: 'Degrader', pattern: 'MIX', class: 'clip-kick', intensity: 'med', tooltip: 'DROP at silence bars' }
                        ],
                        automation: {
                            name: 'DROP Amount',
                            color: '#ec4899',
                            points: [
                                { bar: 1, value: 0 },
                                { bar: 30, value: 0 },
                                { bar: 31, value: 100 },
                                { bar: 32, value: 100 },
                                { bar: 33, value: 0 },
                                { bar: 94, value: 0 },
                                { bar: 95, value: 100 },
                                { bar: 96, value: 100 },
                                { bar: 97, value: 0 },
                                { bar: 128, value: 0 }
                            ]
                        }
                    }
                ]
            },
            ukgarage: {
                totalBars: 128,
                bpm: 130,
                sections: [
                    { bar: 1, name: 'INTRO', class: 'section-intro' },
                    { bar: 17, name: 'VERSE', class: 'section-build' },
                    { bar: 33, name: 'CHORUS', class: 'section-main' },
                    { bar: 49, name: 'VERSE 2', class: 'section-build' },
                    { bar: 65, name: 'BREAK', class: 'section-breakdown' },
                    { bar: 81, name: 'DROP', class: 'section-peak' },
                    { bar: 113, name: 'OUTRO', class: 'section-outro' }
                ],
                songRows: [
                    { row: 1, pattern: 'G01', label: 'Intro', section: 'intro' },
                    { row: 2, pattern: 'G02', label: 'Verse', section: 'build' },
                    { row: 3, pattern: 'G03', label: 'Chorus', section: 'main' },
                    { row: 4, pattern: 'G04', label: 'Verse2', section: 'build' },
                    { row: 5, pattern: 'G05', label: 'Break', section: 'breakdown' },
                    { row: 6, pattern: 'G06', label: 'Drop', section: 'peak' },
                    { row: 7, pattern: 'G07', label: 'Drop', section: 'peak' },
                    { row: 8, pattern: 'G08', label: 'Outro', section: 'outro' }
                ],
                lanes: [
                    { type: 'header', device: 'syntakt' },
                    { 
                        name: 'Kick',
                        clips: [
                            { start: 1, end: 14, label: 'Kick Intro', pattern: 'A01', class: 'clip-kick', intensity: 'med', tooltip: 'UK Garage kick | Shuffled | Bouncy' },
                            // 2 bar silence
                            { start: 17, end: 32, label: 'Kick Verse', pattern: 'A02', class: 'clip-kick', intensity: 'med', tooltip: 'Verse groove | Room for vocals' },
                            { start: 33, end: 48, label: 'Kick Chorus', pattern: 'B01', class: 'clip-kick', intensity: 'high', tooltip: 'Full kick | Chorus energy' },
                            { start: 49, end: 62, label: 'Kick V2', pattern: 'A02', class: 'clip-kick', intensity: 'med', tooltip: 'Verse 2 groove' },
                            // 2 bar silence before break
                            { start: 73, end: 78, label: 'Kick Break', pattern: 'A01', class: 'clip-kick', intensity: 'low', tooltip: 'Sparse | Mid-break' },
                            // 2 bar silence before drop
                            { start: 81, end: 112, label: 'Kick Drop', pattern: 'B02', class: 'clip-kick', intensity: 'high', tooltip: 'Full UKG bounce | Maximum energy' },
                            { start: 113, end: 128, label: 'Kick Outro', pattern: 'A01', class: 'clip-kick', intensity: 'med', tooltip: 'Outro groove' }
                        ]
                    },
                    { 
                        name: 'Snare/Clap',
                        clips: [
                            { start: 17, end: 48, label: 'Clap Groove', pattern: 'A02', class: 'clip-clap', intensity: 'med', tooltip: 'UKG clap | Shuffled | 2-step feel' },
                            { start: 49, end: 64, label: 'Clap V2', pattern: 'A02', class: 'clip-clap', intensity: 'med', tooltip: 'Verse 2 clap' },
                            { start: 81, end: 112, label: 'Clap Drop', pattern: 'B01', class: 'clip-clap', intensity: 'high', tooltip: 'Full clap pattern | Drop energy' },
                            { start: 113, end: 124, label: 'Clap Out', pattern: 'A02', class: 'clip-clap', intensity: 'med', tooltip: 'Outro clap' }
                        ]
                    },
                    { 
                        name: 'Hats',
                        clips: [
                            { start: 5, end: 16, label: 'HH Intro', pattern: 'A01', class: 'clip-hats', intensity: 'low', tooltip: 'FILTER REVEAL | LP 25% | Sparse shuffle' },
                            { start: 17, end: 48, label: 'HH Verse', pattern: 'B01', class: 'clip-hats', intensity: 'med', tooltip: 'Filter 65% | 2-step hats | Shuffled' },
                            { start: 49, end: 64, label: 'HH V2', pattern: 'B01', class: 'clip-hats', intensity: 'med', tooltip: 'Verse 2 groove' },
                            { start: 65, end: 80, label: 'HH Break', pattern: 'C01', class: 'clip-hats', intensity: 'low', tooltip: 'Filter down to 30% | Breakdown' },
                            { start: 81, end: 112, label: 'HH Drop', pattern: 'B02', class: 'clip-hats', intensity: 'high', tooltip: 'Filter 100% | Full UKG groove' },
                            { start: 113, end: 124, label: 'HH Strip', pattern: 'A01', class: 'clip-hats', intensity: 'med', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'HH Filter',
                            color: '#fbbf24',
                            points: [
                                { bar: 5, value: 25 },
                                { bar: 16, value: 40 },
                                { bar: 17, value: 65 },
                                { bar: 48, value: 70 },
                                { bar: 64, value: 68 },
                                { bar: 65, value: 30 },
                                { bar: 80, value: 40 },
                                { bar: 81, value: 100 },
                                { bar: 112, value: 95 },
                                { bar: 124, value: 35 }
                            ]
                        }
                    },
                    { 
                        name: 'Perc',
                        clips: [
                            { start: 9, end: 48, label: 'Perc Groove', pattern: 'A02', class: 'clip-perc', intensity: 'med', tooltip: 'FILTER REVEAL | Shakers/Tambourine | Shuffled' },
                            { start: 49, end: 64, label: 'Perc V2', pattern: 'A02', class: 'clip-perc', intensity: 'med', tooltip: 'Verse 2 perc' },
                            { start: 81, end: 112, label: 'Perc Drop', pattern: 'B01', class: 'clip-perc', intensity: 'high', tooltip: 'Full percussion | Drop energy' },
                            { start: 113, end: 124, label: 'Perc Strip', pattern: 'A01', class: 'clip-perc', intensity: 'low', tooltip: 'Stripping back | Outro' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Bass',
                        clips: [
                            { start: 9, end: 16, label: 'Bass Hint', pattern: 'A01', class: 'clip-bass', intensity: 'low', tooltip: 'FILTER REVEAL | LP 20% | Sub hints' },
                            { start: 17, end: 48, label: 'Bass Verse', pattern: 'B01', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 60% | UKG bassline | Wobbly' },
                            { start: 49, end: 64, label: 'Bass V2', pattern: 'B01', class: 'clip-bass', intensity: 'med', tooltip: 'Verse 2 bass' },
                            { start: 65, end: 80, label: 'Bass Sub', pattern: 'C01', class: 'clip-bass', intensity: 'low', tooltip: 'Filter closes to 25% | Sub bed' },
                            { start: 81, end: 112, label: 'Bass Drop', pattern: 'B02', class: 'clip-bass', intensity: 'high', tooltip: 'Filter 95% | Full UKG bass | Bouncy' },
                            { start: 113, end: 128, label: 'Bass Out', pattern: 'A01', class: 'clip-bass', intensity: 'med', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'Bass Filter',
                            color: '#a855f7',
                            points: [
                                { bar: 9, value: 20 },
                                { bar: 16, value: 35 },
                                { bar: 17, value: 60 },
                                { bar: 48, value: 65 },
                                { bar: 64, value: 62 },
                                { bar: 65, value: 25 },
                                { bar: 80, value: 35 },
                                { bar: 81, value: 95 },
                                { bar: 112, value: 90 },
                                { bar: 128, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'Organ/Keys',
                        clips: [
                            { start: 17, end: 48, label: 'Organ Verse', pattern: 'A02', class: 'clip-chord', intensity: 'med', tooltip: 'FILTER REVEAL | Classic UKG organ | Soulful' },
                            { start: 49, end: 64, label: 'Organ V2', pattern: 'A02', class: 'clip-chord', intensity: 'med', tooltip: 'Verse 2 organ' },
                            { start: 65, end: 80, label: 'Organ Break', pattern: 'C01', class: 'clip-chord', intensity: 'med', tooltip: 'Held chords | Breakdown emotion' },
                            { start: 81, end: 112, label: 'Organ Drop', pattern: 'B01', class: 'clip-chord', intensity: 'high', tooltip: 'Full organ stabs | Drop energy' },
                            { start: 113, end: 124, label: 'Organ Fade', pattern: 'A02', class: 'clip-chord', intensity: 'med', tooltip: 'Fading out | Outro' }
                        ],
                        automation: {
                            name: 'Organ Filter',
                            color: '#14b8a6',
                            points: [
                                { bar: 17, value: 40 },
                                { bar: 32, value: 55 },
                                { bar: 48, value: 60 },
                                { bar: 64, value: 58 },
                                { bar: 65, value: 50 },
                                { bar: 80, value: 55 },
                                { bar: 81, value: 90 },
                                { bar: 112, value: 85 },
                                { bar: 124, value: 35 }
                            ]
                        }
                    },
                    { 
                        name: 'Strings/Pad',
                        clips: [
                            { start: 33, end: 48, label: 'Strings Chorus', pattern: 'D01', class: 'clip-texture', intensity: 'med', tooltip: 'Soulful strings | Chorus lift' },
                            { start: 65, end: 80, label: 'Strings Break', pattern: 'D02', class: 'clip-texture', intensity: 'high', tooltip: 'Full strings | Breakdown emotion | Classic UKG' },
                            { start: 81, end: 96, label: 'Strings Drop', pattern: 'D01', class: 'clip-texture', intensity: 'med', tooltip: 'Strings under drop' }
                        ]
                    },
                    { 
                        name: 'Vocals',
                        clips: [
                            { start: 13, end: 16, label: 'Vox RevVerb', pattern: 'V01', class: 'clip-vocal', intensity: 'low', tooltip: 'REVERSE REVERB | Swell into verse' },
                            { start: 17, end: 32, label: 'Vox Verse', pattern: 'V02', class: 'clip-vocal', intensity: 'med', tooltip: 'Verse vocal | R&B delivery' },
                            { start: 33, end: 48, label: 'Vox Chorus', pattern: 'V03', class: 'clip-vocal', intensity: 'high', tooltip: 'Chorus hook | Full vocal' },
                            { start: 49, end: 64, label: 'Vox V2', pattern: 'V02', class: 'clip-vocal', intensity: 'med', tooltip: 'Verse 2 vocal' },
                            { start: 65, end: 80, label: 'Vox Break', pattern: 'V04', class: 'clip-vocal', intensity: 'high', tooltip: 'Breakdown vocal | Emotional peak' },
                            { start: 81, end: 96, label: 'Vox Drop', pattern: 'V03', class: 'clip-vocal', intensity: 'high', tooltip: 'Chorus over drop | Maximum energy' },
                            { start: 97, end: 108, label: 'Vox Chops', pattern: 'V05', class: 'clip-vocal', intensity: 'med', tooltip: 'Chopped vocals | Late drop' }
                        ]
                    },
                    { 
                        name: 'FX/Trans',
                        clips: [
                            { start: 15, end: 16, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'low', tooltip: 'Kick gap before VERSE' },
                            { start: 63, end: 64, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'med', tooltip: 'Kick gap before BREAK' },
                            { start: 79, end: 80, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'high', tooltip: 'Maximum tension before DROP' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'T9: Bus 1 (Drums)',
                        clips: [
                            { start: 1, end: 16, label: 'Bus1 Intro', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Kick+Clap+Hats routed | Insert FX1: Compressor | UKG bounce' },
                            { start: 17, end: 64, label: 'Bus1 Verse', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Full drum bus | Insert FX2: Saturator | Warmth' },
                            { start: 65, end: 80, label: 'Bus1 Break', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Breakdown | Light compression' },
                            { start: 81, end: 128, label: 'Bus1 Drop', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Maximum bounce | Heavy compression' }
                        ]
                    },
                    { 
                        name: 'T10: Bus 2 (Bass)',
                        clips: [
                            { start: 9, end: 16, label: 'Bus2 Sub', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Bass routed | Insert FX1: Low-pass Filter | Sub control' },
                            { start: 17, end: 64, label: 'Bus2 Groove', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Full bass bus | Insert FX2: Saturator | UKG wobble' },
                            { start: 65, end: 80, label: 'Bus2 Sub', pattern: 'BUS', class: 'clip-texture', intensity: 'low', tooltip: 'Sub bed | Breakdown' },
                            { start: 81, end: 128, label: 'Bus2 Full', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Maximum bass | Bouncy' }
                        ]
                    },
                    { 
                        name: 'T11: Bus 3 (Keys/Perc)',
                        clips: [
                            { start: 17, end: 64, label: 'Bus3 Groove', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Organ+Perc routed | Insert FX1: Compressor | Soulful' },
                            { start: 65, end: 80, label: 'Bus3 Break', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Breakdown | Keys focus' },
                            { start: 81, end: 128, label: 'Bus3 Full', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Full groove | Maximum energy' }
                        ]
                    },
                    { 
                        name: 'T12: Bus 4 (Vox/Strings)',
                        clips: [
                            { start: 13, end: 48, label: 'Bus4 Verse', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Vocals+Strings routed | Insert FX1: Supervoid | Soulful space' },
                            { start: 49, end: 80, label: 'Bus4 Focus', pattern: 'BUS', class: 'clip-texture', intensity: 'high', tooltip: 'Breakdown | Vox focus | Emotional | Insert FX2: Chorus' },
                            { start: 81, end: 128, label: 'Bus4 Drop', pattern: 'BUS', class: 'clip-texture', intensity: 'med', tooltip: 'Vox over drop | Balanced' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'T13: Delay',
                        clips: [
                            { start: 1, end: 128, label: 'UKG Delay', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'Time: 1/8d | Shuffled feel' }
                        ],
                        automation: {
                            name: 'Delay Feedback',
                            color: '#06b6d4',
                            points: [
                                { bar: 1, value: 25 },
                                { bar: 32, value: 35 },
                                { bar: 48, value: 30 },
                                { bar: 64, value: 35 },
                                { bar: 80, value: 45 },
                                { bar: 112, value: 30 },
                                { bar: 128, value: 20 }
                            ]
                        }
                    },
                    { 
                        name: 'T14: Reverb',
                        clips: [
                            { start: 1, end: 128, label: 'UKG Verb', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'Plate | Decay: 1.5s | Tight' }
                        ],
                        automation: {
                            name: 'Reverb Send',
                            color: '#4ade80',
                            points: [
                                { bar: 1, value: 20 },
                                { bar: 48, value: 30 },
                                { bar: 65, value: 55 },
                                { bar: 80, value: 50 },
                                { bar: 81, value: 25 },
                                { bar: 112, value: 30 },
                                { bar: 128, value: 40 }
                            ]
                        }
                    },
                    { 
                        name: 'T15: Send 3 (Comp)',
                        clips: [
                            { start: 1, end: 128, label: 'UKG Glue', pattern: 'SND', class: 'clip-texture', intensity: 'med', tooltip: 'Parallel comp | 2-step bounce glue' }
                        ],
                        automation: {
                            name: 'Compression',
                            color: '#f97316',
                            points: [
                                { bar: 1, value: 25 },
                                { bar: 32, value: 35 },
                                { bar: 33, value: 45 },
                                { bar: 48, value: 50 },
                                { bar: 65, value: 30 },
                                { bar: 80, value: 35 },
                                { bar: 81, value: 55 },
                                { bar: 112, value: 50 },
                                { bar: 128, value: 30 }
                            ]
                        }
                    },
                    { 
                        name: 'T16: DROP',
                        clips: [
                            { start: 1, end: 128, label: 'Degrader', pattern: 'MIX', class: 'clip-kick', intensity: 'med', tooltip: 'DROP at silence bars' }
                        ],
                        automation: {
                            name: 'DROP Amount',
                            color: '#ec4899',
                            points: [
                                { bar: 1, value: 0 },
                                { bar: 14, value: 0 },
                                { bar: 15, value: 100 },
                                { bar: 16, value: 100 },
                                { bar: 17, value: 0 },
                                { bar: 62, value: 0 },
                                { bar: 63, value: 100 },
                                { bar: 64, value: 100 },
                                { bar: 65, value: 0 },
                                { bar: 78, value: 0 },
                                { bar: 79, value: 100 },
                                { bar: 80, value: 100 },
                                { bar: 81, value: 0 },
                                { bar: 128, value: 0 }
                            ]
                        }
                    }
                ]
            },
            bootytech: {
                totalBars: 128,
                bpm: 132,
                sections: [
                    { bar: 1, name: 'INTRO', class: 'section-intro' },
                    { bar: 17, name: 'GROOVE', class: 'section-build' },
                    { bar: 33, name: 'HOOK', class: 'section-main' },
                    { bar: 49, name: 'VERSE', class: 'section-build' },
                    { bar: 65, name: 'BREAK', class: 'section-breakdown' },
                    { bar: 81, name: 'DROP', class: 'section-peak' },
                    { bar: 113, name: 'OUTRO', class: 'section-outro' }
                ],
                songRows: [
                    { row: 1, pattern: 'F01', label: 'Intro', section: 'intro' },
                    { row: 2, pattern: 'F02', label: 'Groove', section: 'build' },
                    { row: 3, pattern: 'F03', label: 'Hook', section: 'main' },
                    { row: 4, pattern: 'F04', label: 'Verse', section: 'build' },
                    { row: 5, pattern: 'F05', label: 'Break', section: 'breakdown' },
                    { row: 6, pattern: 'F06', label: 'Drop', section: 'peak' },
                    { row: 7, pattern: 'F07', label: 'Drop', section: 'peak' },
                    { row: 8, pattern: 'F08', label: 'Outro', section: 'outro' }
                ],
                lanes: [
                    { type: 'header', device: 'syntakt' },
                    { 
                        name: 'Kick',
                        clips: [
                            { start: 1, end: 14, label: 'Kick Intro', pattern: 'F01', class: 'clip-kick', intensity: 'med', tooltip: '909 kick | Punchy | Tech house weight' },
                            // 2 bar silence
                            { start: 17, end: 32, label: 'Kick Groove', pattern: 'F02', class: 'clip-kick', intensity: 'med', tooltip: 'Full kick | Bouncy groove' },
                            { start: 33, end: 46, label: 'Kick Hook', pattern: 'F01', class: 'clip-kick', intensity: 'high', tooltip: 'Hook section | Maximum punch' },
                            // 2 bar silence before verse
                            { start: 49, end: 62, label: 'Kick Verse', pattern: 'F02', class: 'clip-kick', intensity: 'med', tooltip: 'Verse groove | Room for vox' },
                            // 2 bar silence before break
                            { start: 73, end: 78, label: 'Kick Break', pattern: 'F01', class: 'clip-kick', intensity: 'low', tooltip: 'Sparse | Mid-break' },
                            // 2 bar silence before drop
                            { start: 81, end: 112, label: 'Kick Drop', pattern: 'F02', class: 'clip-kick', intensity: 'high', tooltip: 'Full energy | Booty bounce' },
                            { start: 113, end: 128, label: 'Kick Outro', pattern: 'F01', class: 'clip-kick', intensity: 'med', tooltip: 'Outro groove' }
                        ]
                    },
                    { 
                        name: 'Clap',
                        clips: [
                            { start: 17, end: 48, label: 'Clap Groove', pattern: 'F02', class: 'clip-clap', intensity: 'med', tooltip: '909 clap | 2&4 | Tight verb' },
                            { start: 49, end: 64, label: 'Clap Verse', pattern: 'F02', class: 'clip-clap', intensity: 'med', tooltip: 'Verse clap' },
                            { start: 81, end: 112, label: 'Clap Drop', pattern: 'F01', class: 'clip-clap', intensity: 'high', tooltip: 'Layered clap | Drop energy' },
                            { start: 113, end: 124, label: 'Clap Out', pattern: 'F02', class: 'clip-clap', intensity: 'med', tooltip: 'Outro' }
                        ],
                        automation: {
                            name: 'Clap Verb',
                            color: '#f472b6',
                            points: [
                                { bar: 17, value: 10 },
                                { bar: 32, value: 12 },
                                { bar: 33, value: 14 },
                                { bar: 48, value: 16 },
                                { bar: 49, value: 12 },
                                { bar: 64, value: 14 },
                                { bar: 81, value: 18 },
                                { bar: 112, value: 16 },
                                { bar: 124, value: 12 }
                            ]
                        }
                    },
                    { 
                        name: 'Hats',
                        clips: [
                            { start: 5, end: 16, label: 'HH Intro', pattern: 'F01', class: 'clip-hats', intensity: 'low', tooltip: 'FILTER REVEAL | LP 25% | 808/909 hats' },
                            { start: 17, end: 48, label: 'HH Groove', pattern: 'F01', class: 'clip-hats', intensity: 'med', tooltip: 'Filter 65% | Shuffled 16ths' },
                            { start: 49, end: 64, label: 'HH Verse', pattern: 'F01', class: 'clip-hats', intensity: 'med', tooltip: 'Verse groove' },
                            { start: 65, end: 80, label: 'HH Break', pattern: 'F01', class: 'clip-hats', intensity: 'low', tooltip: 'Filter down to 30% | Break' },
                            { start: 81, end: 112, label: 'HH Drop', pattern: 'F02', class: 'clip-hats', intensity: 'high', tooltip: 'Filter 100% | Maximum energy' },
                            { start: 113, end: 124, label: 'HH Strip', pattern: 'F01', class: 'clip-hats', intensity: 'med', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'HH Filter',
                            color: '#fbbf24',
                            points: [
                                { bar: 5, value: 25 },
                                { bar: 16, value: 40 },
                                { bar: 17, value: 65 },
                                { bar: 48, value: 70 },
                                { bar: 64, value: 68 },
                                { bar: 65, value: 30 },
                                { bar: 80, value: 40 },
                                { bar: 81, value: 100 },
                                { bar: 112, value: 95 },
                                { bar: 124, value: 35 }
                            ]
                        }
                    },
                    { 
                        name: '808 Toms',
                        clips: [
                            { start: 17, end: 32, label: 'Toms Intro', pattern: 'F02', class: 'clip-perc', intensity: 'low', tooltip: 'FILTER REVEAL | 808 toms | Classic booty' },
                            { start: 33, end: 48, label: 'Toms Hook', pattern: 'F01', class: 'clip-perc', intensity: 'med', tooltip: 'Tom pattern | Fills' },
                            { start: 49, end: 64, label: 'Toms Verse', pattern: 'F02', class: 'clip-perc', intensity: 'med', tooltip: 'Verse toms' },
                            { start: 81, end: 112, label: 'Toms Drop', pattern: 'F02', class: 'clip-perc', intensity: 'high', tooltip: 'Full tom pattern | Drop energy' },
                            { start: 113, end: 124, label: 'Toms Strip', pattern: 'F01', class: 'clip-perc', intensity: 'low', tooltip: 'Stripping back' }
                        ],
                        automation: {
                            name: 'Tom Pitch',
                            color: '#fb923c',
                            points: [
                                { bar: 17, value: 40 },
                                { bar: 32, value: 50 },
                                { bar: 33, value: 55 },
                                { bar: 48, value: 60 },
                                { bar: 49, value: 45 },
                                { bar: 64, value: 50 },
                                { bar: 81, value: 70 },
                                { bar: 96, value: 75 },
                                { bar: 112, value: 65 },
                                { bar: 124, value: 45 }
                            ]
                        }
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Bass',
                        clips: [
                            { start: 9, end: 16, label: 'Bass Hint', pattern: 'F01', class: 'clip-bass', intensity: 'low', tooltip: 'FILTER REVEAL | LP 20% | Sub pulse' },
                            { start: 17, end: 48, label: 'Bass Groove', pattern: 'F01', class: 'clip-bass', intensity: 'med', tooltip: 'Filter 65% | Bouncy bassline | Tech house weight' },
                            { start: 49, end: 64, label: 'Bass Verse', pattern: 'F01', class: 'clip-bass', intensity: 'med', tooltip: 'Verse bass' },
                            { start: 65, end: 80, label: 'Bass Sub', pattern: 'F01', class: 'clip-bass', intensity: 'low', tooltip: 'Filter closes to 25% | Sub only' },
                            { start: 81, end: 112, label: 'Bass Drop', pattern: 'F02', class: 'clip-bass', intensity: 'high', tooltip: 'Filter 95% | Full booty bass' },
                            { start: 113, end: 128, label: 'Bass Out', pattern: 'F01', class: 'clip-bass', intensity: 'med', tooltip: 'Filter closing | Outro' }
                        ],
                        automation: {
                            name: 'Bass Filter',
                            color: '#a855f7',
                            points: [
                                { bar: 9, value: 20 },
                                { bar: 16, value: 35 },
                                { bar: 17, value: 65 },
                                { bar: 48, value: 70 },
                                { bar: 64, value: 68 },
                                { bar: 65, value: 25 },
                                { bar: 80, value: 35 },
                                { bar: 81, value: 95 },
                                { bar: 112, value: 90 },
                                { bar: 128, value: 25 }
                            ]
                        }
                    },
                    { 
                        name: 'Stabs',
                        clips: [
                            { start: 17, end: 32, label: 'Stab Intro', pattern: 'F02', class: 'clip-chord', intensity: 'low', tooltip: 'FILTER REVEAL | Minimal stabs | Filtered' },
                            { start: 33, end: 48, label: 'Stab Hook', pattern: 'F01', class: 'clip-chord', intensity: 'med', tooltip: 'Filter 70% | Hook stabs' },
                            { start: 49, end: 64, label: 'Stab Verse', pattern: 'F02', class: 'clip-chord', intensity: 'med', tooltip: 'Verse stabs' },
                            { start: 65, end: 80, label: 'Stab Break', pattern: 'F01', class: 'clip-chord', intensity: 'med', tooltip: 'Held chords | Breakdown' },
                            { start: 81, end: 112, label: 'Stab Drop', pattern: 'F02', class: 'clip-chord', intensity: 'high', tooltip: 'Filter 90% | Drop stabs' },
                            { start: 113, end: 124, label: 'Stab Fade', pattern: 'F02', class: 'clip-chord', intensity: 'med', tooltip: 'Fading | Outro' }
                        ],
                        automation: {
                            name: 'Stab Filter',
                            color: '#14b8a6',
                            points: [
                                { bar: 17, value: 35 },
                                { bar: 32, value: 50 },
                                { bar: 33, value: 70 },
                                { bar: 48, value: 75 },
                                { bar: 64, value: 70 },
                                { bar: 65, value: 50 },
                                { bar: 80, value: 55 },
                                { bar: 81, value: 90 },
                                { bar: 112, value: 85 },
                                { bar: 124, value: 35 }
                            ]
                        }
                    },
                    { 
                        name: 'Vox Chops',
                        clips: [
                            { start: 17, end: 32, label: 'Vox Chop', pattern: 'V01', class: 'clip-vocal', intensity: 'med', tooltip: 'FILTER REVEAL | Chopped vox | Looped' },
                            { start: 33, end: 48, label: 'Vox Hook', pattern: 'V02', class: 'clip-vocal', intensity: 'high', tooltip: 'Main hook | Call & response' },
                            { start: 49, end: 64, label: 'Vox Verse', pattern: 'V03', class: 'clip-vocal', intensity: 'med', tooltip: 'Verse vocal | Chant style' },
                            { start: 65, end: 80, label: 'Vox Break', pattern: 'V04', class: 'clip-vocal', intensity: 'med', tooltip: 'Breakdown vocal | Stretched' },
                            { start: 81, end: 96, label: 'Vox Drop', pattern: 'V02', class: 'clip-vocal', intensity: 'high', tooltip: 'Hook over drop' },
                            { start: 97, end: 112, label: 'Vox Chops', pattern: 'V01', class: 'clip-vocal', intensity: 'med', tooltip: 'Chopped vocals | Late drop' }
                        ],
                        automation: {
                            name: 'Vox Filter',
                            color: '#c084fc',
                            points: [
                                { bar: 17, value: 35 },
                                { bar: 32, value: 50 },
                                { bar: 33, value: 70 },
                                { bar: 48, value: 75 },
                                { bar: 49, value: 55 },
                                { bar: 64, value: 60 },
                                { bar: 65, value: 45 },
                                { bar: 80, value: 55 },
                                { bar: 81, value: 85 },
                                { bar: 96, value: 80 },
                                { bar: 97, value: 65 },
                                { bar: 112, value: 55 }
                            ]
                        }
                    },
                    { 
                        name: 'FX/Trans',
                        clips: [
                            { start: 15, end: 16, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'low', tooltip: 'Kick gap before GROOVE' },
                            { start: 47, end: 48, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'med', tooltip: 'Kick gap before VERSE' },
                            { start: 63, end: 64, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'med', tooltip: 'Kick gap before BREAK' },
                            { start: 79, end: 80, label: '2 BAR SILENCE', pattern: 'SIL', class: 'clip-fx', intensity: 'high', tooltip: 'Maximum tension before DROP' }
                        ]
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Bus 1: Dirtshaper DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 35 },
                            { bar: 16, value: 40 },
                            { bar: 17, value: 50 },
                            { bar: 64, value: 55 },
                            { bar: 65, value: 30 },
                            { bar: 80, value: 35 },
                            { bar: 81, value: 70 },
                            { bar: 128, value: 65 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Bus 1: Degrader BR',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 16, value: 30 },
                            { bar: 17, value: 40 },
                            { bar: 64, value: 45 },
                            { bar: 65, value: 20 },
                            { bar: 80, value: 25 },
                            { bar: 81, value: 55 },
                            { bar: 128, value: 50 }
                        ],
                        color: '#f87171'
                    },
                    { 
                        name: 'Bus 2: Freq Warper FREQ',
                        automation: true,
                        points: [
                            { bar: 9, value: 30 },
                            { bar: 16, value: 40 },
                            { bar: 17, value: 55 },
                            { bar: 64, value: 60 },
                            { bar: 65, value: 35 },
                            { bar: 80, value: 45 },
                            { bar: 81, value: 75 },
                            { bar: 128, value: 70 }
                        ],
                        color: '#f97316'
                    },
                    { 
                        name: 'Bus 2: Dirtshaper DRV',
                        autoLane: true,
                        points: [
                            { bar: 9, value: 25 },
                            { bar: 16, value: 35 },
                            { bar: 17, value: 45 },
                            { bar: 64, value: 50 },
                            { bar: 65, value: 30 },
                            { bar: 80, value: 40 },
                            { bar: 81, value: 65 },
                            { bar: 128, value: 60 }
                        ],
                        color: '#fb923c'
                    },
                    { 
                        name: 'Bus 3: Sat Delay FDBK',
                        automation: true,
                        points: [
                            { bar: 17, value: 35 },
                            { bar: 64, value: 45 },
                            { bar: 65, value: 50 },
                            { bar: 80, value: 55 },
                            { bar: 81, value: 40 },
                            { bar: 128, value: 35 }
                        ],
                        color: '#eab308'
                    },
                    { 
                        name: 'Bus 3: Sat Delay TIME',
                        autoLane: true,
                        points: [
                            { bar: 17, value: 30 },
                            { bar: 64, value: 35 },
                            { bar: 65, value: 45 },
                            { bar: 80, value: 50 },
                            { bar: 81, value: 35 },
                            { bar: 128, value: 30 }
                        ],
                        color: '#facc15'
                    },
                    { 
                        name: 'Bus 4: Pan Chorus DEP',
                        automation: true,
                        points: [
                            { bar: 17, value: 40 },
                            { bar: 48, value: 50 },
                            { bar: 49, value: 55 },
                            { bar: 80, value: 60 },
                            { bar: 81, value: 45 },
                            { bar: 128, value: 40 }
                        ],
                        color: '#a855f7'
                    },
                    { 
                        name: 'Bus 4: Sat Delay FDBK',
                        autoLane: true,
                        points: [
                            { bar: 17, value: 35 },
                            { bar: 48, value: 45 },
                            { bar: 49, value: 50 },
                            { bar: 80, value: 55 },
                            { bar: 81, value: 40 },
                            { bar: 128, value: 35 }
                        ],
                        color: '#c084fc'
                    },
                    { type: 'header', device: 'tonverk' },
                    { 
                        name: 'Send 1: FDBK',
                        automation: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 32, value: 35 },
                            { bar: 48, value: 30 },
                            { bar: 64, value: 35 },
                            { bar: 80, value: 45 },
                            { bar: 112, value: 30 },
                            { bar: 128, value: 20 }
                        ],
                        color: '#06b6d4'
                    },
                    { 
                        name: 'Send 1: TIME',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 32, value: 35 },
                            { bar: 48, value: 30 },
                            { bar: 64, value: 40 },
                            { bar: 80, value: 50 },
                            { bar: 112, value: 35 },
                            { bar: 128, value: 25 }
                        ],
                        color: '#38bdf8'
                    },
                    { 
                        name: 'Send 2: SIZE',
                        automation: true,
                        points: [
                            { bar: 1, value: 20 },
                            { bar: 48, value: 30 },
                            { bar: 65, value: 50 },
                            { bar: 80, value: 45 },
                            { bar: 81, value: 25 },
                            { bar: 112, value: 30 },
                            { bar: 128, value: 35 }
                        ],
                        color: '#a78bfa'
                    },
                    { 
                        name: 'Send 2: DAMP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 25 },
                            { bar: 48, value: 35 },
                            { bar: 65, value: 55 },
                            { bar: 80, value: 50 },
                            { bar: 81, value: 30 },
                            { bar: 112, value: 35 },
                            { bar: 128, value: 40 }
                        ],
                        color: '#8b5cf6'
                    },
                    { 
                        name: 'Send 3: FREQ',
                        automation: true,
                        points: [
                            { bar: 1, value: 30 },
                            { bar: 32, value: 40 },
                            { bar: 48, value: 55 },
                            { bar: 65, value: 35 },
                            { bar: 80, value: 40 },
                            { bar: 81, value: 60 },
                            { bar: 112, value: 55 },
                            { bar: 128, value: 35 }
                        ],
                        color: '#f59e0b'
                    },
                    { 
                        name: 'Mix: DRV',
                        automation: true,
                        points: [
                            { bar: 1, value: 15 },
                            { bar: 32, value: 25 },
                            { bar: 48, value: 30 },
                            { bar: 65, value: 20 },
                            { bar: 80, value: 25 },
                            { bar: 81, value: 45 },
                            { bar: 112, value: 40 },
                            { bar: 128, value: 20 }
                        ],
                        color: '#ef4444'
                    },
                    { 
                        name: 'Mix: DROP',
                        autoLane: true,
                        points: [
                            { bar: 1, value: 0 },
                            { bar: 14, value: 0 },
                            { bar: 15, value: 100 },
                            { bar: 16, value: 100 },
                            { bar: 17, value: 0 },
                            { bar: 46, value: 0 },
                            { bar: 47, value: 100 },
                            { bar: 48, value: 100 },
                            { bar: 49, value: 0 },
                            { bar: 62, value: 0 },
                            { bar: 63, value: 100 },
                            { bar: 64, value: 100 },
                            { bar: 65, value: 0 },
                            { bar: 78, value: 0 },
                            { bar: 79, value: 100 },
                            { bar: 80, value: 100 },
                            { bar: 81, value: 0 },
                            { bar: 128, value: 0 }
                        ],
                        color: '#ec4899'
                    }
                ]
            }
        };

        // Generate Song Row lane above ruler
        function generateSongRows(containerId, trackData) {
            const lane = document.getElementById(containerId);
            if (!lane) return;
            
            lane.innerHTML = '';
            
            if (!showSongRows || !trackData.songRows) {
                lane.classList.add('collapsed');
                if (!trackData.songRows) {
                    lane.style.display = 'none';
                    return;
                }
            } else {
                lane.classList.remove('collapsed');
            }
            
            lane.style.display = 'flex';
            
            // Each row = 16 bars
            const barsPerRow = 16;
            
            trackData.songRows.forEach((row, idx) => {
                const cell = document.createElement('div');
                cell.className = 'song-row-cell';
                cell.style.width = (cellWidth * barsPerRow) + 'px';
                cell.style.minWidth = (cellWidth * barsPerRow) + 'px';
                
                const sectionClass = row.section || 'intro';
                cell.classList.add('section-' + sectionClass);
                
                const label = document.createElement('div');
                label.className = 'song-row-label';
                label.innerHTML = `
                    <span class="song-row-num">R${String(row.row).padStart(2, '0')}</span>
                    <span class="song-row-pattern">${row.pattern}</span>
                `;
                label.title = `Row ${row.row}: ${row.pattern} - ${row.label}`;
                
                cell.appendChild(label);
                lane.appendChild(cell);
            });
        }

        // Toggle Song Row display
        function toggleSongRows() {
            showSongRows = !showSongRows;
            
            // Update all toggle buttons
            document.querySelectorAll('.song-row-spacer .toggle-sm').forEach(toggle => {
                toggle.classList.toggle('active', showSongRows);
            });
            
            // Update all song row lanes - use collapsed class for smooth transition
            document.querySelectorAll('.song-row-lane').forEach(lane => {
                lane.classList.toggle('collapsed', !showSongRows);
                lane.style.display = 'flex'; // Always flex, height controls visibility
            });
            
            // Update all song row spacers in labels sidebar
            document.querySelectorAll('.song-row-spacer').forEach(spacer => {
                spacer.classList.toggle('collapsed', !showSongRows);
            });
            
            // Regenerate current view
            renderCurrentTrack();
        }

        // Generate ruler with bar numbers and section markers
        function generateRuler(containerId, trackData) {
            const ruler = document.getElementById(containerId);
            ruler.innerHTML = '';
            
            for (let bar = 1; bar <= trackData.totalBars; bar++) {
                const marker = document.createElement('div');
                marker.className = 'bar-marker';
                marker.style.width = cellWidth + 'px';
                marker.style.minWidth = cellWidth + 'px';
                marker.textContent = bar;
                
                // Add section markers
                const section = trackData.sections.find(s => s.bar === bar);
                if (section) {
                    const sectionMarker = document.createElement('span');
                    sectionMarker.className = `section-marker ${section.class}`;
                    sectionMarker.textContent = section.name;
                    marker.appendChild(sectionMarker);
                }
                
                ruler.appendChild(marker);
            }
        }

        // Generate track lanes with clips
        function generateLanes(containerId, trackData) {
            const lanes = document.getElementById(containerId);
            lanes.innerHTML = '';
            
            trackData.lanes.forEach((lane, index) => {
                if (lane.type === 'header') {
                    const spacer = document.createElement('div');
                    spacer.className = `track-lane device-spacer ${lane.device}`;
                    spacer.style.height = '36px'; // Force height inline
                    spacer.style.minHeight = '36px';
                    spacer.style.display = 'flex';
                    for (let bar = 1; bar <= trackData.totalBars; bar++) {
                        const cell = document.createElement('div');
                        cell.className = 'grid-cell';
                        cell.style.width = cellWidth + 'px';
                        cell.style.minWidth = cellWidth + 'px';
                        cell.style.height = '36px'; // Explicit height for device spacer cells
                        spacer.appendChild(cell);
                    }
                    lanes.appendChild(spacer);
                    return;
                }
                
                if (lane.type === 'divider') {
                    const divider = document.createElement('div');
                    divider.className = 'track-lane section-divider-lane';
                    for (let bar = 1; bar <= trackData.totalBars; bar++) {
                        const cell = document.createElement('div');
                        cell.className = 'grid-cell';
                        cell.style.width = cellWidth + 'px';
                        cell.style.minWidth = cellWidth + 'px';
                        divider.appendChild(cell);
                    }
                    lanes.appendChild(divider);
                    return;
                }
                
                const laneEl = document.createElement('div');
                laneEl.className = 'track-lane';
                
                // Check if this is an automation sub-lane
                if (lane.autoLane) {
                    laneEl.classList.add('auto-sublane');
                }
                
                // Add grid cells
                for (let bar = 1; bar <= trackData.totalBars; bar++) {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    cell.style.width = cellWidth + 'px';
                    cell.style.minWidth = cellWidth + 'px';
                    laneEl.appendChild(cell);
                }
                
                // Add clips or automation
                if (lane.automation === true || lane.autoLane) {
                    // Lane IS an automation lane (performance macro or sub-lane)
                    const automationPath = createAutomationPath(lane, trackData.totalBars);
                    laneEl.appendChild(automationPath);
                } else if (lane.clips) {
                    // Render clips
                    lane.clips.forEach(clip => {
                        const clipEl = document.createElement('div');
                        clipEl.className = `clip ${clip.class} ${clip.intensity}`;
                        clipEl.style.left = `${(clip.start - 1) * cellWidth + 4}px`;
                        clipEl.style.width = `${(clip.end - clip.start + 1) * cellWidth - 8}px`;
                        clipEl.innerHTML = `${clip.label}<span class="clip-pattern">${clip.pattern}</span>`;
                        
                        // Tooltip
                        clipEl.addEventListener('mouseenter', (e) => showTooltip(e, clip));
                        clipEl.addEventListener('mouseleave', hideTooltip);
                        clipEl.addEventListener('mousemove', moveTooltip);
                        
                        laneEl.appendChild(clipEl);
                    });
                    
                    // Also render inline automation if present and toggle is on
                    if (lane.automation && typeof lane.automation === 'object' && automationVisible) {
                        const autoOverlay = createInlineAutomation(lane.automation, trackData.totalBars);
                        laneEl.appendChild(autoOverlay);
                    }
                }
                
                lanes.appendChild(laneEl);
            });
        }

        // Create inline automation overlay for a single lane
        function createInlineAutomation(auto, totalBars) {
            const container = document.createElement('div');
            container.className = 'inline-automation';
            
            // Grid cells have 1px left border via box-shadow (inset), so total lane width = totalBars * cellWidth
            const width = totalBars * cellWidth;
            const height = 50; // Lane height
            const padding = 8;
            const drawHeight = height - padding * 2;
            
            let pathD = '';
            let fillD = `M 0 ${height} `;
            let pointsHtml = '';
            
            auto.points.forEach((point, i) => {
                // Position at the START of the bar (step 1), not center
                const x = Math.round((point.bar - 1) * cellWidth);
                const y = height - padding - (point.value / 100 * drawHeight);
                
                if (i === 0) {
                    pathD += `M ${x} ${y}`;
                    fillD += `L ${x} ${y}`;
                } else {
                    pathD += ` L ${x} ${y}`;
                    fillD += ` L ${x} ${y}`;
                }
                
                // Get previous and next point data for LFO calculation
                const prevPoint = i > 0 ? auto.points[i - 1] : null;
                const nextPoint = i < auto.points.length - 1 ? auto.points[i + 1] : null;
                const prevBar = prevPoint ? prevPoint.bar : point.bar;
                const prevValue = prevPoint ? prevPoint.value : point.value;
                const nextBar = nextPoint ? nextPoint.bar : point.bar;
                const nextValue = nextPoint ? nextPoint.value : point.value;
                
                // Add interactive point
                pointsHtml += `<circle class="auto-point" cx="${x}" cy="${y}" r="4" fill="${auto.color}" 
                    onmouseenter="showAutoTooltip(event, '${auto.name}', ${point.bar}, ${point.value}, ${prevBar}, ${prevValue}, ${nextBar}, ${nextValue})"
                    onmouseleave="hideAutoTooltip()"
                    onmousemove="moveAutoTooltip(event)"/>`;
            });
            
            // Close fill path
            const lastPoint = auto.points[auto.points.length - 1];
            const lastX = Math.round((lastPoint.bar - 1) * cellWidth);
            fillD += ` L ${lastX} ${height} Z`;
            
            container.innerHTML = `
                <svg width="${width}" height="${height}" style="overflow: visible;">
                    <path class="auto-fill" d="${fillD}" fill="${auto.color}" fill-opacity="0.15"/>
                    <path class="auto-line" d="${pathD}" stroke="${auto.color}" stroke-width="2" fill="none" 
                        stroke-linecap="round" stroke-linejoin="round" style="filter: drop-shadow(0 0 3px ${auto.color})"/>
                    ${pointsHtml}
                </svg>
            `;
            
            return container;
        }

        // Create SVG automation path
        function createAutomationPath(lane, totalBars) {
            const container = document.createElement('div');
            container.className = 'automation-path';
            
            const width = totalBars * cellWidth;
            const height = 30;
            const padding = 4;
            const drawHeight = height - padding * 2;
            
            let pathD = '';
            let fillD = `M 0 ${height} `;
            let pointsHtml = '';
            
            lane.points.forEach((point, i) => {
                // Position at the START of the bar (step 1), not center
                const x = Math.round((point.bar - 1) * cellWidth);
                const y = height - padding - (point.value / 100 * drawHeight);
                
                if (i === 0) {
                    pathD += `M ${x} ${y}`;
                    fillD += `L ${x} ${y}`;
                } else {
                    pathD += ` L ${x} ${y}`;
                    fillD += ` L ${x} ${y}`;
                }
                
                // Get previous and next point data for LFO calculation
                const prevPoint = i > 0 ? lane.points[i - 1] : null;
                const nextPoint = i < lane.points.length - 1 ? lane.points[i + 1] : null;
                const prevBar = prevPoint ? prevPoint.bar : point.bar;
                const prevValue = prevPoint ? prevPoint.value : point.value;
                const nextBar = nextPoint ? nextPoint.bar : point.bar;
                const nextValue = nextPoint ? nextPoint.value : point.value;
                
                // Add interactive point
                pointsHtml += `<circle class="auto-point" cx="${x}" cy="${y}" r="4" fill="${lane.color}" 
                    onmouseenter="showAutoTooltip(event, '${lane.name}', ${point.bar}, ${point.value}, ${prevBar}, ${prevValue}, ${nextBar}, ${nextValue})"
                    onmouseleave="hideAutoTooltip()"
                    onmousemove="moveAutoTooltip(event)"/>`;
            });
            
            // Close fill path
            const lastPoint = lane.points[lane.points.length - 1];
            const lastX = Math.round((lastPoint.bar - 1) * cellWidth);
            fillD += ` L ${lastX} ${height} Z`;
            
            container.innerHTML = `
                <div class="automation-label" style="color: ${lane.color}">${lane.name}</div>
                <svg width="${width}" height="${height}" style="overflow: visible;">
                    <path class="automation-fill" d="${fillD}" fill="${lane.color}"/>
                    <path class="automation-line" d="${pathD}" stroke="${lane.color}"/>
                    ${pointsHtml}
                </svg>
            `;
            
            return container;
        }

        // Tooltip functions
        const tooltip = document.getElementById('tooltip');

        function showTooltip(e, clip) {
            const titleEl = tooltip.querySelector('.tooltip-title');
            const detailEl = tooltip.querySelector('.tooltip-detail');
            
            titleEl.textContent = `${clip.label} [${clip.pattern}]`;
            detailEl.innerHTML = clip.tooltip.split(' | ').map(line => `<div>${line}</div>`).join('');
            
            tooltip.classList.add('visible');
            moveTooltip(e);
        }

        function hideTooltip() {
            tooltip.classList.remove('visible');
        }

        function moveTooltip(e) {
            tooltip.style.left = `${e.clientX + 15}px`;
            tooltip.style.top = `${e.clientY + 15}px`;
        }

        // Track switching
        function showTrack(trackId) {
            currentTrack = trackId;
            document.querySelectorAll('.daw-container').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.track-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(trackId).classList.add('active');
            event.target.classList.add('active');
            
            document.getElementById('bar-count').textContent = tracks[trackId].totalBars;
            document.getElementById('bpm-value').textContent = tracks[trackId].bpm;
        }

        // Zoom functions
        function updateCellWidthCSS() {
            document.documentElement.style.setProperty('--cell-width', cellWidth + 'px');
        }

        function setZoom(value) {
            cellWidth = parseInt(value);
            document.getElementById('zoom-slider').value = value;
            // Map slider 5-80 to display 0%-167% (5=0%, 50=100%, 80=167%)
            const zoomPercent = Math.round(((cellWidth - 5) / 45) * 100);
            document.getElementById('zoom-value').textContent = zoomPercent + '%';
            updateCellWidthCSS();
            
            // Toggle zoom mode classes for better display at low zoom levels
            const isSmallZoom = cellWidth < 20;
            const isTinyZoom = cellWidth < 10;
            document.querySelectorAll('.daw-container').forEach(container => {
                container.classList.toggle('zoom-small', isSmallZoom);
                container.classList.toggle('zoom-tiny', isTinyZoom);
            });
            
            // Force re-render all tracks with new cellWidth (includes inline automation if visible)
            Object.keys(tracks).forEach(trackId => {
                // Skip tracks that don't have HTML containers (hidden templates)
                if (!document.getElementById(`${trackId}-ruler`)) return;
                
                generateSongRows(`${trackId}-songrow`, tracks[trackId]);
                generateRuler(`${trackId}-ruler`, tracks[trackId]);
                generateLanes(`${trackId}-lanes`, tracks[trackId]);
            });
        }

        function zoomIn() {
            const newWidth = Math.min(cellWidth + 5, MAX_CELL_WIDTH);
            setZoom(newWidth);
        }

        function zoomOut() {
            const newWidth = Math.max(cellWidth - 5, MIN_CELL_WIDTH);
            setZoom(newWidth);
        }

        function fitToView() {
            const container = document.querySelector('.arrangement-area');
            if (!container) return;
            
            const availableWidth = container.clientWidth - 40; // Some padding
            const totalBars = tracks[currentTrack].totalBars;
            const fitWidth = Math.floor(availableWidth / totalBars);
            const clampedWidth = Math.max(MIN_CELL_WIDTH, Math.min(fitWidth, MAX_CELL_WIDTH));
            
            setZoom(clampedWidth);
        }

        function renderAllTracks() {
            Object.keys(tracks).forEach(trackId => {
                // Skip tracks that don't have HTML containers (hidden templates)
                if (!document.getElementById(`${trackId}-ruler`)) return;
                
                generateSongRows(`${trackId}-songrow`, tracks[trackId]);
                generateRuler(`${trackId}-ruler`, tracks[trackId]);
                generateLanes(`${trackId}-lanes`, tracks[trackId]);
            });
        }
        
        function renderCurrentTrack() {
            if (!document.getElementById(`${currentTrack}-ruler`)) return;
            
            generateSongRows(`${currentTrack}-songrow`, tracks[currentTrack]);
            generateRuler(`${currentTrack}-ruler`, tracks[currentTrack]);
            generateLanes(`${currentTrack}-lanes`, tracks[currentTrack]);
        }

        // Automation overlay state
        let automationVisible = false;
        let autoOnlyMode = false;
        let patternLength = 256; // 64, 128, or 256 steps
        const autoTooltip = document.getElementById('auto-tooltip');

        function toggleAutomation() {
            automationVisible = !automationVisible;
            const toggle = document.getElementById('auto-toggle');
            
            toggle.classList.toggle('active', automationVisible);
            
            // Re-render all lanes to show/hide inline automation
            Object.keys(tracks).forEach(trackId => {
                if (!document.getElementById(`${trackId}-ruler`)) return;
                generateLanes(`${trackId}-lanes`, tracks[trackId]);
            });
        }
        
        function toggleAutoOnly() {
            autoOnlyMode = !autoOnlyMode;
            const toggle = document.getElementById('auto-only-toggle');
            toggle.classList.toggle('active', autoOnlyMode);
            
            // Also enable automation view if turning on auto-only
            if (autoOnlyMode && !automationVisible) {
                toggleAutomation();
            }
            
            // Toggle auto-only class on all containers
            document.querySelectorAll('.daw-container').forEach(container => {
                container.classList.toggle('auto-only', autoOnlyMode);
            });
        }

        function setPatternLength(length) {
            patternLength = length;
            
            // Update button states
            document.querySelectorAll('.pattern-length-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`len-${length}`).classList.add('active');
            
            // Tooltips will automatically use new length on next hover
        }

        // Device filter state
        let deviceFilter = 'all'; // 'all', 'syntakt', 'tonverk'

        function setDeviceFilter(filter) {
            deviceFilter = filter;
            
            // Update button states
            document.querySelectorAll('.device-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`filter-${filter}`).classList.add('active');
            
            // Apply filter to all track labels and lanes
            applyDeviceFilter();
        }

        function applyDeviceFilter() {
            document.querySelectorAll('.daw-container').forEach(container => {
                const labels = container.querySelectorAll('.track-labels > *');
                const lanes = container.querySelectorAll('.track-lanes > .track-lane');
                
                let currentDevice = 'syntakt'; // Default device
                let labelIndex = 0;
                
                labels.forEach((label, i) => {
                    // Skip song-row-spacer and ruler-spacer
                    if (label.classList.contains('song-row-spacer') || label.classList.contains('ruler-spacer')) {
                        return;
                    }
                    
                    // Check if this is a device header
                    if (label.classList.contains('device-header')) {
                        if (label.classList.contains('syntakt')) {
                            currentDevice = 'syntakt';
                        } else if (label.classList.contains('tonverk')) {
                            currentDevice = 'tonverk';
                        } else if (label.classList.contains('drop')) {
                            currentDevice = 'drop'; // Drop controller - show with both
                        }
                        
                        // Show/hide header based on filter
                        if (deviceFilter === 'all' || currentDevice === deviceFilter || currentDevice === 'drop') {
                            label.classList.remove('device-hidden');
                        } else {
                            label.classList.add('device-hidden');
                        }
                        return;
                    }
                    
                    // Regular track label - apply current device filter
                    if (deviceFilter === 'all' || currentDevice === deviceFilter || currentDevice === 'drop') {
                        label.classList.remove('device-hidden');
                    } else {
                        label.classList.add('device-hidden');
                    }
                });
                
                // Apply to lanes - needs to track device context from data
                // For simplicity, we'll use the lane's position and track the pattern
                const trackData = tracks[container.id];
                if (!trackData) return;
                
                currentDevice = 'syntakt';
                lanes.forEach((lane, i) => {
                    const laneData = trackData.lanes[i];
                    if (!laneData) return;
                    
                    if (laneData.type === 'header') {
                        currentDevice = laneData.device || 'syntakt';
                    }
                    
                    if (deviceFilter === 'all' || currentDevice === deviceFilter || currentDevice === 'drop') {
                        lane.classList.remove('device-hidden');
                    } else {
                        lane.classList.add('device-hidden');
                    }
                });
            });
        }

        function getPatternAndStep(bar) {
            const trackData = tracks[currentTrack];
            if (!trackData || !trackData.songRows) {
                return { pattern: '???', step: 1 };
            }
            
            // Pattern length determines bars per pattern: 256=16bars, 128=8bars, 64=4bars
            const stepsPerBar = 16;
            const barsPerPattern = patternLength / stepsPerBar;
            
            // Which song row does this bar fall into?
            const songRowIndex = Math.floor((bar - 1) / barsPerPattern);
            const songRow = trackData.songRows[songRowIndex];
            
            // What bar within that pattern? (1-4, 1-8, or 1-16)
            const barInPattern = ((bar - 1) % barsPerPattern) + 1;
            
            // What step? (1-64, 1-128, or 1-256)
            const step = ((barInPattern - 1) * stepsPerBar) + 1;
            
            return {
                pattern: songRow ? songRow.pattern : '???',
                step: step,
                maxStep: patternLength
            };
        }

        function getOrdinal(n) {
            const s = ['th', 'st', 'nd', 'rd'];
            const v = n % 100;
            return s[(v - 20) % 10] || s[v] || s[0];
        }

        function getLfoSettings(bars) {
            // Calculate SPD and MULT for given bar count
            // Formula: SPD Ã— MULT = 128 / bars (for one cycle over that many bars)
            // Using MULT Ã—8 as base, SPD = 16 / bars
            if (bars <= 1) return { spd: 16, mult: 'Ã—8', note: '1 bar' };
            if (bars <= 2) return { spd: 8, mult: 'Ã—8', note: '2 bars' };
            if (bars <= 4) return { spd: 4, mult: 'Ã—8', note: '4 bars' };
            if (bars <= 8) return { spd: 2, mult: 'Ã—8', note: '8 bars' };
            if (bars <= 16) return { spd: 1, mult: 'Ã—8', note: '16 bars' };
            if (bars <= 32) return { spd: 1, mult: 'Ã—4', note: '32 bars' };
            return { spd: 1, mult: 'Ã—2', note: '64 bars' };
        }

        function showAutoTooltip(e, param, bar, value, prevBar, prevValue, nextBar, nextValue) {
            const tooltip = document.getElementById('auto-tooltip');
            const { pattern, step, maxStep } = getPatternAndStep(bar);
            
            // Convert percentage to 0-127 Elektron value
            const toElektron = (pct) => Math.round(pct * 1.27);
            const elektronValue = toElektron(value);
            
            // Calculate change from previous point
            const valueDiffPrev = value - prevValue;
            const barDiffPrev = bar - prevBar;
            
            // Calculate change to next point
            const valueDiffNext = nextValue - value;
            const barDiffNext = nextBar - bar;
            
            // Check what changes exist
            const hasPrevChange = barDiffPrev > 0 && Math.abs(valueDiffPrev) > 0;
            const hasNextChange = barDiffNext > 0 && Math.abs(valueDiffNext) > 0;
            
            // Calculate which loop iteration this should fire on for 64/128 step patterns
            let trigConditionHint = '';
            if (patternLength === 64) {
                // 64 steps = 4 bars per pattern, so bar 5 is 2nd loop (2:4), bar 9 is 3rd loop (3:4)
                const loopNum = Math.ceil(step / 64);
                if (loopNum > 1) {
                    trigConditionHint = `<div style="color: #fbbf24; font-size: 12px; margin-top: 4px;">âš  Use trig condition: <strong>${loopNum}:4</strong> (${loopNum}${getOrdinal(loopNum)} loop)</div>`;
                }
            } else if (patternLength === 128) {
                // 128 steps = 8 bars per pattern, so bar 9 is 2nd loop (2:2), bar 17 is 3rd loop (3:2)
                const loopNum = Math.ceil(step / 128);
                if (loopNum > 1) {
                    trigConditionHint = `<div style="color: #fbbf24; font-size: 12px; margin-top: 4px;">âš  Use trig condition: <strong>${loopNum}:2</strong> (${loopNum}${getOrdinal(loopNum)} loop)</div>`;
                }
            }
            
            // Build tooltip content
            let html = `
                <div><span class="auto-param">${param}</span></div>
                <div><strong>Pattern ${pattern}, Step ${step}</strong> <span style="color: #6b7280; font-size: 11px;">(0-${maxStep-1})</span></div>
                <div style="margin: 4px 0;">Bar <span class="auto-bar">${bar}</span> â†’ <span class="auto-value">${elektronValue}</span> <span style="color: #6b7280; font-size: 11px;">(0-127)</span></div>
                ${trigConditionHint}
            `;
            
            // Show change FROM previous if exists
            if (hasPrevChange) {
                const direction = valueDiffPrev > 0 ? 'â†‘' : 'â†“';
                const absValueDiff = Math.abs(valueDiffPrev);
                const elektronDiff = toElektron(absValueDiff);
                const elektronPrev = toElektron(prevValue);
                const lfo = getLfoSettings(barDiffPrev);
                html += `
                    <div style="margin-top: 4px; padding-top: 4px; border-top: 1px solid rgba(255,255,255,0.2);">
                        <span style="color: #fbbf24;">${direction} ${elektronDiff}</span> from <span style="color: #6b7280;">${elektronPrev}</span> over <span style="color: #a78bfa;">${barDiffPrev} bars</span>
                    </div>
                    <div style="color: #4ade80; font-size: 10px;">
                        LFO: SPD ${lfo.spd}, MULT ${lfo.mult}, DEP ${elektronDiff}
                    </div>
                `;
            }
            
            // Show change TO next if exists (this is where automation STARTS)
            if (hasNextChange) {
                const direction = valueDiffNext > 0 ? 'â†‘' : 'â†“';
                const absValueDiff = Math.abs(valueDiffNext);
                const elektronDiff = toElektron(absValueDiff);
                const elektronNext = toElektron(nextValue);
                const lfo = getLfoSettings(barDiffNext);
                html += `
                    <div style="margin-top: 4px; padding-top: 4px; border-top: 1px solid rgba(255,255,255,0.2);">
                        <span style="color: #38bdf8;">NEXT â†’</span> <span style="color: #fbbf24;">${direction} ${elektronDiff}</span> to <span style="color: #4ade80;">${elektronNext}</span> over <span style="color: #a78bfa;">${barDiffNext} bars</span>
                    </div>
                    <div style="color: #4ade80; font-size: 10px;">
                        LFO: SPD ${lfo.spd}, MULT ${lfo.mult}, DEP ${elektronDiff}
                    </div>
                `;
            }
            
            tooltip.innerHTML = html;
            tooltip.classList.add('visible');
            moveAutoTooltip(e);
        }

        function hideAutoTooltip() {
            document.getElementById('auto-tooltip').classList.remove('visible');
        }

        function moveAutoTooltip(e) {
            const tooltip = document.getElementById('auto-tooltip');
            tooltip.style.left = `${e.clientX + 15}px`;
            tooltip.style.top = `${e.clientY - 40}px`;
        }

        // Initialize
        function init() {
            updateCellWidthCSS();
            renderAllTracks();
            // Set initial zoom display
            document.getElementById('zoom-value').textContent = '100%';
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                // Ctrl/Cmd + Plus/Equals = Zoom In
                if ((e.ctrlKey || e.metaKey) && (e.key === '=' || e.key === '+')) {
                    e.preventDefault();
                    zoomIn();
                }
                // Ctrl/Cmd + Minus = Zoom Out
                if ((e.ctrlKey || e.metaKey) && e.key === '-') {
                    e.preventDefault();
                    zoomOut();
                }
                // Ctrl/Cmd + 0 = Fit to View
                if ((e.ctrlKey || e.metaKey) && e.key === '0') {
                    e.preventDefault();
                    fitToView();
                }
                // Ctrl/Cmd + 1 = Reset to 100%
                if ((e.ctrlKey || e.metaKey) && e.key === '1') {
                    e.preventDefault();
                    setZoom(DEFAULT_CELL_WIDTH);
                }
            });
            
            // Scroll wheel zoom (with Ctrl/Cmd)
            document.querySelector('.container').addEventListener('wheel', (e) => {
                if (e.ctrlKey || e.metaKey) {
                    e.preventDefault();
                    if (e.deltaY < 0) {
                        zoomIn();
                    } else {
                        zoomOut();
                    }
                }
            }, { passive: false });
        }

        // ============================================
        // PERFORMANCE VIEW FUNCTIONS
        // ============================================

        let currentViewMode = 'daw';

        function setViewMode(mode) {
            currentViewMode = mode;
            
            // Update buttons
            document.getElementById('daw-view-btn').classList.toggle('active', mode === 'daw');
            document.getElementById('perf-view-btn').classList.toggle('active', mode === 'performance');
            
            // Toggle views
            document.querySelectorAll('.daw-container').forEach(c => {
                c.style.display = mode === 'daw' ? '' : 'none';
            });
            
            const perfView = document.getElementById('performance-view');
            perfView.classList.toggle('active', mode === 'performance');
            
            // Hide/show DAW-specific controls
            document.querySelector('.zoom-controls').style.display = mode === 'daw' ? 'flex' : 'none';
            
            if (mode === 'performance') {
                generatePerformanceView();
            }
        }

        function generatePerformanceView() {
            const track = tracks[currentTrack];
            generateSongTimeline(track);
            generateMuteGrid(track);
            generatePerfCues(track);
            generatePatternMap(track);
            generateDeviceSplit();
        }

        function generateSongTimeline(track) {
            const container = document.getElementById('song-timeline');
            
            // Header row
            let html = `
                <div class="song-row song-row-header">
                    <div>Row</div>
                    <div>Label</div>
                    <div>Pattern</div>
                    <div>Bars</div>
                    <div>Repeat</div>
                    <div>BPM</div>
                    <div>Performance Cue</div>
                </div>
            `;
            
            // Generate rows from sections
            track.sections.forEach((section, idx) => {
                const nextSection = track.sections[idx + 1];
                const endBar = nextSection ? nextSection.bar - 1 : track.totalBars;
                const bars = endBar - section.bar + 1;
                const patternId = getPatternId(section.name);
                const cue = getPerformanceCue(section, track);
                
                html += `
                    <div class="song-row ${section.class}">
                        <div class="row-num">${String(idx + 1).padStart(2, '0')}</div>
                        <div class="row-label">${section.name}</div>
                        <div class="row-pattern">${patternId}</div>
                        <div class="row-bars">${bars}</div>
                        <div class="row-repeat">Ã—1</div>
                        <div class="row-tempo">${track.bpm || 124}</div>
                        <div class="row-cue">${cue}</div>
                    </div>
                `;
            });
            
            // END row
            html += `
                <div class="song-row">
                    <div class="row-num">END</div>
                    <div class="row-label">LOOP</div>
                    <div class="row-pattern">â€”</div>
                    <div class="row-bars">â€”</div>
                    <div class="row-repeat">â€”</div>
                    <div class="row-tempo">â€”</div>
                    <div class="row-cue">Song loops to Row 01</div>
                </div>
            `;
            
            container.innerHTML = html;
        }

        function getPatternId(sectionName) {
            const patternMap = {
                'INTRO': 'A01',
                'BUILD': 'A02',
                'BUILD 2': 'A02',
                'MAIN': 'B01',
                'VERSE': 'A03',
                'HOOK': 'B02',
                'GROOVE': 'B01',
                'BREAK': 'C01',
                'BREAKDOWN': 'C01',
                'DUB OUT': 'C01',
                'DROP': 'B03',
                'DROP 1': 'B01',
                'DROP 2': 'B03',
                'PEAK': 'B03',
                'DEEP': 'B02',
                'OUTRO': 'A01'
            };
            return patternMap[sectionName] || 'A01';
        }

        function getPerformanceCue(section, track) {
            const cues = {
                'INTRO': 'All elements filtered',
                'BUILD': 'Open filters gradually',
                'MAIN': 'Drop all mutes â†’ full energy',
                'BREAK': 'Kick mute ON, open melodics',
                'BREAKDOWN': 'Kick mute ON, reverb swell',
                'DUB OUT': 'Heavy delay throws',
                'DROP': 'Kick mute OFF â†’ impact',
                'DROP 1': 'Kick mute OFF â†’ impact',
                'DROP 2': 'Maximum energy',
                'PEAK': 'All elements open',
                'DEEP': 'Ride the groove',
                'OUTRO': 'Strip elements, close filters'
            };
            return cues[section.name] || '';
        }

        function generateMuteGrid(track) {
            const container = document.getElementById('mute-grid');
            
            // Get track names from lanes
            const trackNames = [];
            track.lanes.forEach(lane => {
                if (lane.type !== 'header' && lane.type !== 'divider' && lane.name && !lane.automation) {
                    if (!lane.name.includes('Filter') && !lane.name.includes('Saturation') && 
                        !lane.name.includes('Feedback') && !lane.name.includes('Send') &&
                        !lane.name.includes('Width') && !lane.name.includes('Comb') &&
                        !lane.name.includes('DROP Amount')) {
                        trackNames.push(lane.name);
                    }
                }
            });
            
            // Limit to 12 tracks for display
            const displayTracks = trackNames.slice(0, 12);
            
            // Calculate grid columns
            const gridCols = `100px repeat(${displayTracks.length}, 50px)`;
            container.style.gridTemplateColumns = gridCols;
            
            // Header
            let html = '<div class="mute-grid-header"><div>Section</div>';
            displayTracks.forEach((name, i) => {
                const shortName = name.length > 6 ? name.substring(0, 5) + 'â€¦' : name;
                html += `<div title="${name}">${shortName}</div>`;
            });
            html += '</div>';
            
            // Rows for each section
            track.sections.forEach((section, idx) => {
                const nextSection = track.sections[idx + 1];
                const startBar = section.bar;
                const endBar = nextSection ? nextSection.bar - 1 : track.totalBars;
                
                html += '<div class="mute-grid-row">';
                html += `<div class="section-label">${section.name}</div>`;
                
                displayTracks.forEach((trackName, i) => {
                    const isActive = isTrackActiveInSection(track, trackName, startBar, endBar);
                    const cellClass = isActive === 'full' ? 'active' : (isActive === 'partial' ? 'partial' : 'muted');
                    const icon = isActive === 'full' ? 'â—' : (isActive === 'partial' ? 'â—' : 'â—‹');
                    html += `<div><span class="mute-cell ${cellClass}" title="T${i + 1}: ${trackName}">${icon}</span></div>`;
                });
                
                html += '</div>';
            });
            
            container.innerHTML = html;
        }

        function isTrackActiveInSection(track, trackName, startBar, endBar) {
            const lane = track.lanes.find(l => l.name === trackName);
            if (!lane || !lane.clips) return 'muted';
            
            let totalBars = endBar - startBar + 1;
            let activeBars = 0;
            
            lane.clips.forEach(clip => {
                const clipStart = Math.max(clip.start, startBar);
                const clipEnd = Math.min(clip.end, endBar);
                if (clipEnd >= clipStart) {
                    activeBars += clipEnd - clipStart + 1;
                }
            });
            
            const ratio = activeBars / totalBars;
            if (ratio > 0.8) return 'full';
            if (ratio > 0.2) return 'partial';
            return 'muted';
        }

        function generatePerfCues(track) {
            const container = document.getElementById('perf-cues');
            
            // Find silence bars and key transitions
            const cues = [];
            
            track.lanes.forEach(lane => {
                if (lane.clips) {
                    lane.clips.forEach(clip => {
                        if (clip.label && clip.label.includes('SILENCE')) {
                            cues.push({
                                bar: clip.start,
                                action: `Kick mute ON`,
                                detail: `${clip.end - clip.start + 1} bar gap â†’ tension before next section`,
                                critical: true
                            });
                            cues.push({
                                bar: clip.end + 1,
                                action: `Kick mute OFF`,
                                detail: `DROP moment â†’ maximum impact`,
                                critical: true
                            });
                        }
                    });
                }
                
                // Add filter automation cues
                if (lane.automation && lane.automation.points) {
                    const points = lane.automation.points;
                    points.forEach((point, i) => {
                        if (i > 0 && Math.abs(point.value - points[i-1].value) > 30) {
                            const direction = point.value > points[i-1].value ? 'Open' : 'Close';
                            cues.push({
                                bar: point.bar,
                                action: `${lane.automation.name}: ${direction}`,
                                detail: `${points[i-1].value}% â†’ ${point.value}%`,
                                critical: false
                            });
                        }
                    });
                }
            });
            
            // Sort by bar and dedupe
            const uniqueCues = [];
            const seenBars = new Set();
            cues.sort((a, b) => a.bar - b.bar).forEach(cue => {
                const key = `${cue.bar}-${cue.action}`;
                if (!seenBars.has(key)) {
                    seenBars.add(key);
                    uniqueCues.push(cue);
                }
            });
            
            // Limit to most important cues
            const importantCues = uniqueCues.filter(c => c.critical).slice(0, 12);
            
            let html = '';
            importantCues.forEach(cue => {
                html += `
                    <div class="perf-cue ${cue.critical ? 'critical' : ''}">
                        <div class="perf-cue-bar">Bar ${cue.bar}</div>
                        <div class="perf-cue-action">${cue.action}</div>
                        <div class="perf-cue-detail">${cue.detail}</div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function generatePatternMap(track) {
            const container = document.getElementById('pattern-map');
            
            const banks = [
                {
                    letter: 'A',
                    name: 'Intro / Stripped',
                    patterns: [
                        { num: '01', name: 'Intro Pattern', use: 'Filtered, sparse' },
                        { num: '02', name: 'Build Pattern', use: 'Opening filters' },
                        { num: '03', name: 'Tease Pattern', use: 'Hints & reveals' }
                    ]
                },
                {
                    letter: 'B',
                    name: 'Main / Full Energy',
                    patterns: [
                        { num: '01', name: 'Main Groove', use: 'Full arrangement' },
                        { num: '02', name: 'Variation', use: 'Slight changes' },
                        { num: '03', name: 'Peak Pattern', use: 'Maximum energy' }
                    ]
                },
                {
                    letter: 'C',
                    name: 'Breakdown / Transition',
                    patterns: [
                        { num: '01', name: 'Breakdown', use: 'Kick out, melodics' },
                        { num: '02', name: 'Build Back', use: 'Rising tension' }
                    ]
                }
            ];
            
            let html = '';
            banks.forEach(bank => {
                html += `
                    <div class="pattern-bank">
                        <div class="pattern-bank-title">
                            <span class="bank-letter">${bank.letter}</span>
                            ${bank.name}
                        </div>
                        <div class="pattern-list">
                `;
                bank.patterns.forEach(p => {
                    html += `
                        <div class="pattern-item">
                            <span class="pattern-num">${bank.letter}${p.num}</span>
                            <span class="pattern-name">${p.name}</span>
                            <span class="pattern-use">${p.use}</span>
                        </div>
                    `;
                });
                html += '</div></div>';
            });
            
            container.innerHTML = html;
        }

        function generateDeviceSplit() {
            const container = document.getElementById('device-split');
            
            const html = `
                <div class="device-card syntakt">
                    <div class="device-card-title">SYNTAKT</div>
                    <div class="device-track-list">
                        <div class="device-track"><span class="track-num">T1-8</span> Digital voices (FM Perc, Noise, etc.)</div>
                        <div class="device-track"><span class="track-num">T9-11</span> Analog Drum voices</div>
                        <div class="device-track"><span class="track-num">T12</span> Analog Cymbal voice</div>
                        <div class="device-track"><span class="track-num">FX</span> Analog FX Block (Drive, Filter)</div>
                    </div>
                    <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(255,255,255,0.1);">
                        <strong style="color: var(--syntakt-primary); font-size: 11px;">TYPICAL ROUTING:</strong>
                        <div class="device-track-list" style="margin-top: 8px;">
                            <div class="device-track">Kick â†’ T9 (Analog BD)</div>
                            <div class="device-track">Clap/Snare â†’ T10 (Analog SD/Clap)</div>
                            <div class="device-track">Hats â†’ T11/T12 (Analog CH/OH)</div>
                            <div class="device-track">FM Perc â†’ T1-4 (Digital)</div>
                        </div>
                    </div>
                </div>
                <div class="device-card tonverk">
                    <div class="device-card-title">TONVERK</div>
                    <div class="device-track-list">
                        <div class="device-track"><span class="track-num">T1-8</span> Audio/MIDI tracks (Samples)</div>
                        <div class="device-track"><span class="track-num">T9-12</span> Bus tracks (Group processing)</div>
                        <div class="device-track"><span class="track-num">T13-15</span> Send FX tracks</div>
                        <div class="device-track"><span class="track-num">T16</span> Mix track (Master FX)</div>
                    </div>
                    <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(255,255,255,0.1);">
                        <strong style="color: var(--tonverk-primary); font-size: 11px;">TYPICAL ROUTING:</strong>
                        <div class="device-track-list" style="margin-top: 8px;">
                            <div class="device-track">Bass â†’ T1 (Single Player)</div>
                            <div class="device-track">Chords/Stabs â†’ T2 (Multi Player)</div>
                            <div class="device-track">Pads â†’ T3 (Grainer)</div>
                            <div class="device-track">Perc Loops â†’ T4 (Subtracks)</div>
                            <div class="device-track">Vocals â†’ T5 (Single Player)</div>
                            <div class="device-track">T13: Delay (Daisy/Saturator)</div>
                            <div class="device-track">T14: Reverb (Rumsklang/Supervoid)</div>
                            <div class="device-track">T16: DROP (Degrader on Master)</div>
                        </div>
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
        }

        try {
            init();
        } catch(e) {
            console.error('Init error:', e.message, e.stack);
            alert('Error: ' + e.message);
        }
    </script>
</body>
</html>
